(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{53995:(e,t,r)=>{"use strict";r.d(t,{g:()=>d});var a=r(73201),s=r(98283);function d(e,t="wei"){return(0,s.X)(e,a.eL[t])}},55261:(e,t,r)=>{Promise.resolve().then(r.bind(r,86256))},62023:(e,t,r)=>{"use strict";r.d(t,{f:()=>l,h:()=>i});var a=r(54568),s=r(7620);let d=(0,s.createContext)(null);function i(){let e=(0,s.useContext)(d);if(!e)throw Error("useWebSocket must be used within a WebSocketProvider");return e}function l(e){let{children:t,url:r="ws://localhost:8080"}=e,i=(0,s.useRef)(null),l=(0,s.useRef)(),[n,c]=(0,s.useState)(!1),[o,x]=(0,s.useState)("disconnected"),[g,m]=(0,s.useState)(new Map),[h,u]=(0,s.useState)(new Map),[y,b]=(0,s.useState)(new Map),[p,k]=(0,s.useState)(new Set),j=()=>{var e;if((null==(e=i.current)?void 0:e.readyState)!==WebSocket.OPEN){x("connecting");try{i.current=new WebSocket(r),i.current.onopen=()=>{console.log("WebSocket connected"),c(!0),x("connected"),p.forEach(e=>{var t;null==(t=i.current)||t.send(JSON.stringify({type:"subscribe",companyId:e}))})},i.current.onmessage=e=>{try{let t=JSON.parse(e.data);switch(t.type){case"price_update":m(e=>new Map(e.set(t.companyId,t.data)));break;case"orderbook_update":u(e=>new Map(e.set(t.companyId,t.data)));break;case"trade_update":b(e=>{let r=e.get(t.companyId)||[],a=[t.data,...r].slice(0,100);return new Map(e.set(t.companyId,a))});break;default:console.log("Unknown message type:",t.type)}}catch(e){console.error("Error parsing WebSocket message:",e)}},i.current.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),c(!1),x("disconnected"),e.wasClean||(l.current=setTimeout(()=>{j()},3e3))},i.current.onerror=e=>{console.error("WebSocket error:",e),x("error")}}catch(e){console.error("Failed to create WebSocket connection:",e),x("error")}}},f=()=>{l.current&&clearTimeout(l.current),i.current&&(i.current.close(1e3,"Manual disconnect"),i.current=null),c(!1),x("disconnected")};return(0,s.useEffect)(()=>(j(),()=>{f()}),[r]),(0,a.jsx)(d.Provider,{value:{isConnected:n,priceUpdates:g,orderBooks:h,recentTrades:y,subscribe:e=>{var t;k(t=>new Set(t.add(e))),(null==(t=i.current)?void 0:t.readyState)===WebSocket.OPEN&&i.current.send(JSON.stringify({type:"subscribe",companyId:e}))},unsubscribe:e=>{var t;k(t=>{let r=new Set(t);return r.delete(e),r}),(null==(t=i.current)?void 0:t.readyState)===WebSocket.OPEN&&i.current.send(JSON.stringify({type:"unsubscribe",companyId:e}))},connectionStatus:o},children:t})}},62942:(e,t,r)=>{"use strict";var a=r(42418);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},86256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(54568),s=r(7620),d=r(62942),i=r(62023),l=r(36543);function n(e){let{companyId:t,height:r=400}=e,{orderBooks:d,subscribe:n,unsubscribe:c,isConnected:o}=(0,i.h)(),{getSharePrice:x}=(0,l.P)(),[g,m]=(0,s.useState)(0),[h,u]=(0,s.useState)(0),y=d.get(t);(0,s.useEffect)(()=>(n(t),()=>c(t)),[t,n,c]),(0,s.useEffect)(()=>{if((null==y?void 0:y.asks.length)&&(null==y?void 0:y.bids.length)){let e=Math.min(...y.asks.map(e=>e.price)),t=Math.max(...y.bids.map(e=>e.price)),r=e-t,a=(e+t)/2;m(r),u(a>0?r/a*100:0)}},[y]);let b=e=>e.toFixed(4),p=e=>e.toLocaleString();if(!o)return(0,a.jsx)("div",{className:"h-96 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connecting to market data..."})]})});if(!y)return(0,a.jsx)("div",{className:"h-96 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading order book..."})});let k=Math.max(...y.bids.map(e=>e.total),...y.asks.map(e=>e.total));return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Order Book"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsxs)("span",{className:"inline-flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(o?"bg-green-500":"bg-red-500")}),o?"Live":"Disconnected"]})})]}),g>0&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Spread: ",(0,a.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:b(g)})]}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["(",(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[h.toFixed(2),"%"]}),")"]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium text-gray-600 dark:text-gray-400 mb-3",children:[(0,a.jsx)("div",{className:"text-right",children:"Price"}),(0,a.jsx)("div",{className:"text-right",children:"Amount"}),(0,a.jsx)("div",{className:"text-right",children:"Total"})]}),(0,a.jsxs)("div",{className:"space-y-1",style:{height:r-120,overflowY:"auto"},children:[(0,a.jsx)("div",{className:"space-y-1",children:y.asks.sort((e,t)=>t.price-e.price).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-red-50 dark:bg-red-900/20",style:{width:"".concat(e.total/k*100,"%"),right:0}}),(0,a.jsxs)("div",{className:"relative grid grid-cols-3 gap-4 text-sm py-1 px-2",children:[(0,a.jsx)("div",{className:"text-right text-red-600 dark:text-red-400 font-medium",children:b(e.price)}),(0,a.jsx)("div",{className:"text-right text-gray-900 dark:text-white",children:p(e.amount)}),(0,a.jsx)("div",{className:"text-right text-gray-600 dark:text-gray-400",children:p(e.total)})]})]},"ask-".concat(t)))}),g>0&&(0,a.jsx)("div",{className:"my-4 py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded text-center",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Spread: ",b(g)," (",h.toFixed(2),"%)"]})}),(0,a.jsx)("div",{className:"space-y-1",children:y.bids.sort((e,t)=>t.price-e.price).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-green-50 dark:bg-green-900/20",style:{width:"".concat(e.total/k*100,"%"),right:0}}),(0,a.jsxs)("div",{className:"relative grid grid-cols-3 gap-4 text-sm py-1 px-2",children:[(0,a.jsx)("div",{className:"text-right text-green-600 dark:text-green-400 font-medium",children:b(e.price)}),(0,a.jsx)("div",{className:"text-right text-gray-900 dark:text-white",children:p(e.amount)}),(0,a.jsx)("div",{className:"text-right text-gray-600 dark:text-gray-400",children:p(e.total)})]})]},"bid-".concat(t)))})]})]})]})}function c(e){let{companyId:t,height:r=300}=e,d=(0,s.useRef)(null),{orderBooks:l,subscribe:n,unsubscribe:c,isConnected:o}=(0,i.h)(),[x,g]=(0,s.useState)({bids:[],asks:[]}),m=l.get(t);return((0,s.useEffect)(()=>(n(t),()=>c(t)),[t,n,c]),(0,s.useEffect)(()=>{if(!m)return;let e=[...m.bids].sort((e,t)=>t.price-e.price),t=0,r=e.map(e=>(t+=e.amount,{price:e.price,cumulativeAmount:t,side:"bid"})),a=[...m.asks].sort((e,t)=>e.price-t.price),s=0;g({bids:r,asks:a.map(e=>(s+=e.amount,{price:e.price,cumulativeAmount:s,side:"ask"}))})},[m]),(0,s.useEffect)(()=>{let e=d.current;if(!e||0===x.bids.length||0===x.asks.length)return;let t=e.getContext("2d");if(!t)return;let r=window.devicePixelRatio||1,a=e.getBoundingClientRect();e.width=a.width*r,e.height=a.height*r,t.scale(r,r),e.style.width=a.width+"px",e.style.height=a.height+"px",t.clearRect(0,0,a.width,a.height);let s=[...x.bids,...x.asks],i=Math.min(...s.map(e=>e.price)),l=Math.max(...s.map(e=>e.price)),n=Math.max(...s.map(e=>e.cumulativeAmount)),c=a.width-80,o=a.height-80,g=e=>40+(e-i)/(l-i)*c,m=e=>a.height-40-e/n*o;t.strokeStyle="#e5e7eb",t.lineWidth=1;for(let e=0;e<=5;e++){let r=40+e/5*c;t.beginPath(),t.moveTo(r,40),t.lineTo(r,a.height-40),t.stroke()}for(let e=0;e<=5;e++){let r=40+e/5*o;t.beginPath(),t.moveTo(40,r),t.lineTo(a.width-40,r),t.stroke()}if(x.bids.length>0){t.fillStyle="rgba(34, 197, 94, 0.2)",t.strokeStyle="#22c55e",t.lineWidth=2,t.beginPath(),t.moveTo(g(x.bids[0].price),m(0)),x.bids.forEach((e,r)=>{let a=g(e.price),s=m(e.cumulativeAmount);0===r||t.lineTo(a,m(x.bids[r-1].cumulativeAmount)),t.lineTo(a,s)});let e=x.bids[x.bids.length-1];t.lineTo(g(e.price),m(0)),t.closePath(),t.fill(),t.beginPath(),t.moveTo(g(x.bids[0].price),m(x.bids[0].cumulativeAmount)),x.bids.forEach((e,r)=>{if(r>0){let a=g(e.price),s=m(e.cumulativeAmount);t.lineTo(a,m(x.bids[r-1].cumulativeAmount)),t.lineTo(a,s)}}),t.stroke()}if(x.asks.length>0){t.fillStyle="rgba(239, 68, 68, 0.2)",t.strokeStyle="#ef4444",t.lineWidth=2,t.beginPath(),t.moveTo(g(x.asks[0].price),m(0)),x.asks.forEach((e,r)=>{let a=g(e.price),s=m(e.cumulativeAmount);0===r||t.lineTo(a,m(x.asks[r-1].cumulativeAmount)),t.lineTo(a,s)});let e=x.asks[x.asks.length-1];t.lineTo(g(e.price),m(0)),t.closePath(),t.fill(),t.beginPath(),t.moveTo(g(x.asks[0].price),m(x.asks[0].cumulativeAmount)),x.asks.forEach((e,r)=>{if(r>0){let a=g(e.price),s=m(e.cumulativeAmount);t.lineTo(a,m(x.asks[r-1].cumulativeAmount)),t.lineTo(a,s)}}),t.stroke()}t.fillStyle="#6b7280",t.font="12px sans-serif",t.textAlign="center";for(let e=0;e<=5;e++){let r=i+e/5*(l-i),s=40+e/5*c;t.fillText(r.toFixed(4),s,a.height-10)}t.textAlign="right";for(let e=0;e<=5;e++){let r=e/5*n,s=a.height-40-e/5*o+4;t.fillText(r.toLocaleString(),30,s)}},[x]),o)?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Market Depth"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Bids"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Asks"})]})]})]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("canvas",{ref:d,className:"w-full",style:{height:r-80}})})]}):(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",style:{height:r},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading depth chart..."})]})})}var o=r(33055);function x(e){let{companyId:t,currentPrice:r=0}=e,{address:d}=(0,o.F)(),{buyShares:i,sellShares:n,placeOrder:c,isPending:x}=(0,l.P)(),[g,m]=(0,s.useState)("buy"),[h,u]=(0,s.useState)("market"),[y,b]=(0,s.useState)(""),[p,k]=(0,s.useState)(""),[j,f]=(0,s.useState)(""),N=e=>{b(e),"limit"===h&&p?f(((parseFloat(e)||0)*(parseFloat(p)||0)).toFixed(4)):"market"===h&&r&&f(((parseFloat(e)||0)*r).toFixed(4))},v=e=>{k(e),y&&f(((parseFloat(y)||0)*(parseFloat(e)||0)).toFixed(4))},w=e=>{f(e),"limit"===h&&p?b(((parseFloat(e)||0)/(parseFloat(p)||0)).toFixed(0)):"market"===h&&r&&b(((parseFloat(e)||0)/r).toFixed(0))},S=e=>{u(e),"market"===e?(k(r.toString()),y&&r&&f(((parseFloat(y)||0)*r).toFixed(4))):k("")};return d?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Place Order"}),r>0&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Current Price: ",r.toFixed(4)," DSTK"]})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d&&y&&(p||"limit"!==h)&&("market"===h?"buy"===g?i(t,y):n(t,y):c(t,"buy"===g,y,p),b(""),k(""),f(""))},className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m("buy"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("buy"===g?"bg-green-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Buy"}),(0,a.jsx)("button",{type:"button",onClick:()=>m("sell"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("sell"===g?"bg-red-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Sell"})]}),(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>S("market"),className:"flex-1 py-2 px-4 text-sm font-medium transition-colors ".concat("market"===h?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Market"}),(0,a.jsx)("button",{type:"button",onClick:()=>S("limit"),className:"flex-1 py-2 px-4 text-sm font-medium transition-colors ".concat("limit"===h?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Limit"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (Shares)"}),(0,a.jsx)("input",{type:"number",value:y,onChange:e=>N(e.target.value),placeholder:"0",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),"limit"===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price (DSTK per share)"}),(0,a.jsx)("input",{type:"number",value:p,onChange:e=>v(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total (DSTK)"}),(0,a.jsx)("input",{type:"number",value:j,onChange:e=>w(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["25%","50%","75%","100%"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{N({"25%":"25","50%":"50","75%":"75","100%":"100"}[e])},className:"py-2 px-3 text-xs font-medium text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e},e))}),(0,a.jsx)("button",{type:"submit",disabled:!(d&&y&&("limit"!==h||p)&&1)||x,className:"w-full py-3 px-4 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat("buy"===g?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),children:x?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):"".concat("buy"===g?"Buy":"Sell"," ").concat("market"===h?"Market":"Limit")}),y&&("market"===h||p)&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Order Summary"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Side:"}),(0,a.jsx)("span",{className:"font-medium ".concat("buy"===g?"text-green-600":"text-red-600"),children:g.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:h.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:[y," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Price:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["market"===h?"".concat(r.toFixed(4)," (Market)"):p," DSTK"]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[j," DSTK"]})]})]})]})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Place Order"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to start trading"})})]})}function g(){let{address:e}=(0,o.F)(),[t]=(0,s.useState)([{id:1,companyId:1,type:"buy",amount:100,price:.0025,timestamp:new Date(Date.now()-3e5)},{id:2,companyId:3,type:"sell",amount:50,price:.0034,timestamp:new Date(Date.now()-6e5)}]),r=e=>{console.log("Cancel order:",e)},d=e=>e.toLocaleString();return e?0===t.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Open Orders"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No open orders"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Place an order to see it here"})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Open Orders"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[t.length," active order",1!==t.length?"s":""]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Company"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>{let t=e.amount*e.price;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("buy"===e.type?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:"buy"===e.type?"Buy":"Sell"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.companyId]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.amount}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.price.toFixed(4)," DSTK"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[t.toFixed(4)," DSTK"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d(e.timestamp)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("button",{onClick:()=>r(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium",children:"Cancel"})})]},e.id)})})]})})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Open Orders"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to view open orders"})})]})}function m(e){let{companyId:t,currentPrice:r=0}=e,{address:d}=(0,o.F)(),{addLiquidity:i,removeLiquidity:n,getLPTokenBalance:c,isPending:x}=(0,l.P)(),[g,m]=(0,s.useState)("add"),[h,u]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[p,k]=(0,s.useState)(""),{data:j}=c(t),f=e=>{u(e),r>0&&b(((parseFloat(e)||0)/r).toFixed(0))},N=e=>{b(e),r>0&&u(((parseFloat(e)||0)*r).toFixed(4))};return d?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Liquidity Provider"}),j&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Your LP Tokens: ",j.toString()]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex mb-6 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>m("add"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("add"===g?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Add Liquidity"}),(0,a.jsx)("button",{onClick:()=>m("remove"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("remove"===g?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"),children:"Remove Liquidity"})]}),"add"===g&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h&&y&&(i(t,h,y),u(""),b(""))},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:"Important Information"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[(0,a.jsx)("li",{children:"• You'll receive LP tokens representing your share of the pool"}),(0,a.jsx)("li",{children:"• LP tokens earn trading fees from the pool"}),(0,a.jsx)("li",{children:"• Token amounts are automatically calculated based on current ratio"}),(0,a.jsx)("li",{children:"• You're exposed to impermanent loss risk"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"DSTK Token Amount"}),(0,a.jsx)("input",{type:"number",value:h,onChange:e=>f(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Share Amount"}),(0,a.jsx)("input",{type:"number",value:y,onChange:e=>N(e.target.value),placeholder:"0",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),r>0&&h&&y&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Liquidity Summary"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"DSTK Tokens:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:h})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Shares:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:y})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Rate:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["1 Share = ",r.toFixed(4)," DSTK"]})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:!(d&&h&&y&&parseFloat(h)>0&&parseFloat(y)>0)||x,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]}),"remove"===g&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p&&(n(t,p),k(""))},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-2",children:"Remove Liquidity"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Removing liquidity will burn your LP tokens and return the underlying assets. You'll stop earning fees from this pool."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LP Token Amount"}),(0,a.jsx)("input",{type:"number",value:p,onChange:e=>k(e.target.value),placeholder:"0",min:"0",max:j?j.toString():void 0,step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),j&&(0,a.jsx)("div",{className:"mt-2 flex gap-2",children:["25%","50%","75%","100%"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{k(Math.floor(Number(j)*({"25%":.25,"50%":.5,"75%":.75,"100%":1})[e]).toString())},className:"py-1 px-3 text-xs font-medium text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e},e))})]}),(0,a.jsx)("button",{type:"submit",disabled:!(d&&p&&parseFloat(p)>0)||x,className:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Removing Liquidity..."]}):"Remove Liquidity"})]})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Liquidity Provider"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to provide liquidity"})})]})}var h=r(19184);function u(){var e,t;let r=(0,d.useParams)(),i=parseInt(null==r?void 0:r.id),{getCompany:o,getSharePrice:u}=(0,l.P)(),[y,b]=(0,s.useState)("trade"),{data:p}=o(i),{data:k}=u(i),j=k?parseFloat(k.toString())/1e18:0;return p?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[p[1]," "]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Company ID: #",i]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[j.toFixed(6)," DSTK"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Price"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Price Chart"})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(h.k,{symbol:p[1],height:400})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(n,{companyId:i,height:500}),(0,a.jsx)(c,{companyId:i,height:500})]}),(0,a.jsx)(g,{})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{onClick:()=>b("trade"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("trade"===y?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Trade"}),(0,a.jsx)("button",{onClick:()=>b("liquidity"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("liquidity"===y?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Liquidity"})]})}),"trade"===y?(0,a.jsx)(x,{companyId:i,currentPrice:j}):(0,a.jsx)(m,{companyId:i,currentPrice:j}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Market Info"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Supply:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[(null==(e=p[3])?void 0:e.toString())||"0"," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Token Reserve:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[p[4]?(parseFloat(p[4].toString())/1e18).toFixed(4):"0"," DSTK"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Share Reserve:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[(null==(t=p[5])?void 0:t.toString())||"0"," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"LP Token Supply:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[p[6]?(parseFloat(p[6].toString())/1e18).toFixed(4):"0"," LP"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Collected Fees:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[p[7]?(parseFloat(p[7].toString())/1e18).toFixed(4):"0"," DSTK"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Trading Features"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Real-time order book"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Market & limit orders"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Liquidity provision"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Professional charts"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"0.25% trading fees"]})]})]})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading company data..."})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[850,319,690,532,852,587,315,358],()=>t(55261)),_N_E=e.O()}]);