(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{8527:(e,t,a)=>{Promise.resolve().then(a.bind(a,82586))},25582:(e,t,a)=>{"use strict";a.d(t,{q:()=>i});var s=a(54568),l=a(7620),r=a(57551),n=a(28558),c=a(81636);function i(e){let{value:t,format:a="decimal",decimals:i=2,prefix:o="",suffix:d="",duration:x=.5,className:u="",colorChange:m=!1,previousValue:h}=e,[p,g]=(0,l.useState)(t),[y,f]=(0,l.useState)(!1),b=(0,r.z)(t,{stiffness:100,damping:15}),v=(0,n.G)(b,e=>{let t;switch(a){case"currency":t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:i,maximumFractionDigits:i}).format(e);break;case"percentage":t="".concat(e.toFixed(i),"%");break;case"integer":t=Math.round(e).toLocaleString();break;default:t=e.toFixed(i)}return"".concat(o).concat(t).concat(d)});return(0,l.useEffect)(()=>{if(t!==p){f(!0),b.set(t),g(t);let e=setTimeout(()=>{f(!1)},1e3*x);return()=>clearTimeout(e)}},[t,p,b,x]),(0,s.jsx)(c.P.span,{className:"number-counter ".concat(!m||void 0===h?"":t>h?"text-success":t<h?"text-danger":""," ").concat(u),animate:y?{scale:[1,1.05,1]}:{},transition:{type:"tween",duration:.3,ease:"easeInOut"},"aria-live":"polite",children:v})}},29204:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(34624).A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},53995:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a(73201),l=a(98283);function r(e,t="wei"){return(0,l.X)(e,s.eL[t])}},66888:(e,t,a)=>{"use strict";a.d(t,{O:()=>x});var s=a(33055),l=a(441),r=a(34072),n=a(54953),c=a(14532),i=a(7620),o=a(98283),d=a(29548);function x(){let{address:e,chainId:t}=(0,s.F)(),a=(0,i.useMemo)(()=>{if(t)return(0,c.RZ)("DSTK_TOKEN",t)},[t]),{writeContract:x,data:u,error:m,isPending:h}=(0,l.x)(),{isLoading:p,isSuccess:g}=(0,r.g)({hash:u}),{data:y,refetch:f}=(0,n.Q)({address:a,abi:c.MO,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:!!e}}),{data:b}=(0,n.Q)({address:a,abi:c.MO,functionName:"totalSupply"}),v=(0,i.useCallback)(t=>(0,n.Q)({address:a,abi:c.MO,functionName:"allowance",args:e&&t?[e,t]:void 0,query:{enabled:!!e&&!!t}}),[a,e]),j=(0,i.useCallback)((e,t)=>{a&&x({address:a,abi:c.MO,functionName:"approve",args:[e,(0,o.X)(t,c.sI)]})},[a,x]),N=(0,i.useCallback)((e,t)=>{a&&x({address:a,abi:c.MO,functionName:"transfer",args:[e,(0,o.X)(t,c.sI)]})},[a,x]),P=(0,i.useCallback)(e=>e?(0,d.J)(e,c.sI):"0",[]),w=(0,i.useCallback)(e=>(0,o.X)(e,c.sI),[]);return{contractAddress:a,balance:y?P(y):"0",rawBalance:y,totalSupply:b?P(b):"0",getAllowance:v,refetchBalance:f,approve:j,transfer:N,formatBalance:P,parseAmount:w,hash:u,isPending:h,isConfirming:p,isConfirmed:g,error:m}}},82586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(54568),l=a(33055),r=a(66888),n=a(36543),c=a(7620),i=a(81636),o=a(49645),d=a(29204),x=a(34624);let u=(0,x.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=(0,x.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var h=a(3367),p=a(66734),g=a(22935);let y=(0,x.A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var f=a(25582),b=a(19184),v=a(39818);function j(){let{isConnected:e,address:t}=(0,l.F)(),{balance:a}=(0,r.O)(),{getShareBalance:x,nextCompanyId:j}=(0,n.P)(),[N,P]=(0,c.useState)([]),[w,C]=(0,c.useState)(!1),[k,S]=(0,c.useState)(!1),[F,A]=(0,c.useState)({totalValue:0,totalPnL:0,totalPnLPercent:0,dayChange:0,dayChangePercent:0,bestPerformer:"",worstPerformer:""}),[M,T]=(0,c.useState)("1D"),[I,O]=(0,c.useState)(!0),[L,D]=(0,c.useState)("value");(0,c.useEffect)(()=>{if(e){V();let e=setInterval(V,3e4);return()=>clearInterval(e)}},[e,j]),(0,c.useEffect)(()=>{S(!0)},[]);let V=async()=>{C(!0);try{let e=await fetch("/api/portfolio"),t=await e.json();if(t.portfolio)P(t.portfolio.holdings||[]),A(t.portfolio.stats||F);else{let e=[{companyId:0,companyName:"TechCorp Inc.",symbol:"TECH",shares:"150",currentPrice:"85.42",totalValue:"12813",change:2.34,changePercent:2.8,avgBuyPrice:"78.90",pnl:978,pnlPercent:8.26,allocation:45.2},{companyId:1,companyName:"Green Energy Solutions",symbol:"GREN",shares:"200",currentPrice:"34.76",totalValue:"6952",change:-1.12,changePercent:-3.1,avgBuyPrice:"36.80",pnl:-408,pnlPercent:-5.56,allocation:24.5},{companyId:2,companyName:"FinTech Innovations",symbol:"FINX",shares:"80",currentPrice:"92.15",totalValue:"7372",change:4.67,changePercent:5.3,avgBuyPrice:"88.20",pnl:316,pnlPercent:4.48,allocation:26},{companyId:3,companyName:"BioMed Research",symbol:"BIOM",shares:"45",currentPrice:"25.80",totalValue:"1161",change:.85,changePercent:3.4,avgBuyPrice:"27.30",pnl:-67.5,pnlPercent:-5.49,allocation:4.1}];P(e);let t=e.reduce((e,t)=>e+parseFloat(t.totalValue),0),a=e.reduce((e,t)=>e+t.pnl,0),s=e.reduce((e,t)=>e+parseFloat(t.totalValue)*t.changePercent/100,0);A({totalValue:t,totalPnL:a,totalPnLPercent:a/(t-a)*100,dayChange:s,dayChangePercent:s/t*100,bestPerformer:e.reduce((e,t)=>t.changePercent>e.changePercent?t:e).symbol,worstPerformer:e.reduce((e,t)=>t.changePercent<e.changePercent?t:e).symbol})}}catch(e){console.error("Failed to load portfolio:",e)}finally{C(!1)}},E=[...N].sort((e,t)=>{switch(L){case"value":return parseFloat(t.totalValue)-parseFloat(e.totalValue);case"pnl":return t.pnl-e.pnl;case"change":return t.changePercent-e.changePercent;default:return 0}});return e?k?(0,s.jsxs)(i.P.div,{className:"max-w-7xl mx-auto space-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},suppressHydrationWarning:!0,children:[(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Portfolio Analytics"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"Advanced portfolio tracking with real-time analytics and insights."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>O(!I),className:"glass-card p-3 hover:bg-gray-700/30 transition-all duration-200",children:I?(0,s.jsx)(u,{className:"w-5 h-5"}):(0,s.jsx)(m,{className:"w-5 h-5"})}),(0,s.jsxs)("select",{value:M,onChange:e=>T(e.target.value),className:"glass-card p-3 bg-transparent border-0 focus:ring-2 focus:ring-blue-500/50",children:[(0,s.jsx)("option",{value:"1D",children:"1 Day"}),(0,s.jsx)("option",{value:"1W",children:"1 Week"}),(0,s.jsx)("option",{value:"1M",children:"1 Month"}),(0,s.jsx)("option",{value:"3M",children:"3 Months"}),(0,s.jsx)("option",{value:"1Y",children:"1 Year"})]})]})]}),(0,s.jsx)(i.P.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[{title:"Total Portfolio Value",value:I?F.totalValue:"****",suffix:I?" DSTK":"",icon:h.A,color:"text-blue-400",bgColor:"from-blue-500/20 to-blue-600/20"},{title:"Total P&L",value:I?(F.totalPnL>=0?"+":"")+F.totalPnL.toFixed(2):"****",suffix:I?" DSTK":"",icon:p.A,color:F.totalPnL>=0?"text-green-400":"text-red-400",bgColor:F.totalPnL>=0?"from-green-500/20 to-green-600/20":"from-red-500/20 to-red-600/20"},{title:"24h Change",value:I?(F.dayChange>=0?"+":"")+F.dayChange.toFixed(2):"****",suffix:I?" (".concat(F.dayChangePercent.toFixed(2),"%)"):"",icon:F.dayChange>=0?p.A:g.A,color:F.dayChange>=0?"text-green-400":"text-red-400",bgColor:F.dayChange>=0?"from-green-500/20 to-green-600/20":"from-red-500/20 to-red-600/20"},{title:"DSTK Balance",value:I?a:"****",suffix:I?" DSTK":"",icon:d.A,color:"text-purple-400",bgColor:"from-purple-500/20 to-purple-600/20"}].map((e,t)=>(0,s.jsx)(i.P.div,{className:"glass-card p-6 bg-gradient-to-br ".concat(e.bgColor),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+.05*t},whileHover:{scale:1.02},children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:e.title}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(e.color),children:[(0,s.jsx)(f.q,{value:"string"==typeof e.value&&e.value.includes("*")?0:parseFloat(e.value.toString().replace(/[^0-9.-]/g,"")),decimals:2,duration:1e3}),e.suffix]})]}),(0,s.jsx)(e.icon,{className:"w-8 h-8 ".concat(e.color)})]})},e.title))}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsx)(b.k,{symbol:"PORTFOLIO",height:400})}),(0,s.jsxs)(i.P.div,{className:"glass-card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Holdings Overview"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Sort by:"}),(0,s.jsxs)("select",{value:L,onChange:e=>D(e.target.value),className:"glass-card p-2 bg-transparent border-0 focus:ring-2 focus:ring-blue-500/50 text-sm",children:[(0,s.jsx)("option",{value:"value",children:"Value"}),(0,s.jsx)("option",{value:"pnl",children:"P&L"}),(0,s.jsx)("option",{value:"change",children:"Change"})]})]})]}),w?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)(v.k,{size:"large"})}):0===N.length?(0,s.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[(0,s.jsx)(y,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-300 mb-2",children:"No Holdings Yet"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Start trading to build your portfolio and track your investments."})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"border-b border-gray-700/50",children:["Company","Holdings","Current Price","Total Value","P&L","24h Change","Allocation"].map(e=>(0,s.jsx)("th",{className:"text-left py-4 px-4 text-gray-300 font-medium",children:e},e))})}),(0,s.jsx)("tbody",{children:(0,s.jsx)(o.N,{children:E.map((e,t)=>(0,s.jsxs)(i.P.tr,{className:"border-b border-gray-800/30 hover:bg-gray-800/20 transition-colors duration-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},whileHover:{scale:1.01},children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500    flex items-center justify-center text-white font-bold text-sm",children:e.symbol.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-white",children:e.companyName}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:e.symbol})]})]})}),(0,s.jsxs)("td",{className:"py-4 px-4",children:[(0,s.jsxs)("div",{className:"text-white font-medium",children:[e.shares," shares"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Avg: ",I?e.avgBuyPrice:"***"," DSTK"]})]}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"font-semibold text-white",children:[I?e.currentPrice:"***"," DSTK"]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"font-semibold text-white",children:[I?e.totalValue:"***"," DSTK"]})}),(0,s.jsxs)("td",{className:"py-4 px-4",children:[(0,s.jsxs)("div",{className:"font-semibold ".concat(e.pnl>=0?"text-green-400":"text-red-400"),children:[I?(e.pnl>=0?"+":"")+e.pnl.toFixed(2):"***"," DSTK"]}),(0,s.jsxs)("div",{className:"text-sm ".concat(e.pnlPercent>=0?"text-green-400":"text-red-400"),children:["(",e.pnlPercent>=0?"+":"",e.pnlPercent.toFixed(2),"%)"]})]}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"font-semibold ".concat(e.changePercent>=0?"text-green-400":"text-red-400"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex-1 bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:"".concat(e.allocation,"%")}})}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 min-w-[3rem]",children:[e.allocation.toFixed(1),"%"]})]})})]},e.companyId))})})]})})]})]}):(0,s.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"glass-card text-center py-16",children:[(0,s.jsx)(d.A,{className:"w-20 h-20 text-blue-400 mx-auto mb-6"}),(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4",children:"Portfolio Analytics"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"Loading your portfolio..."})]})}):(0,s.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"glass-card text-center py-16",children:[(0,s.jsx)(d.A,{className:"w-20 h-20 text-blue-400 mx-auto mb-6"}),(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4",children:"Connect Your Wallet"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"Connect your wallet to view your portfolio and track your investments."})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[850,319,690,805,532,852,587,315,358],()=>t(8527)),_N_E=e.O()}]);