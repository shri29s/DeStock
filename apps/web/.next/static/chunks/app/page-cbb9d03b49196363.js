(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3498:(e,s,a)=>{"use strict";a.d(s,{CompanyList:()=>x});var t=a(4568),c=a(7620),r=a(6543),i=a(3055),l=a(7261),n=a.n(l),d=a(8521),m=a(6734),o=a(2935);function x(){let{isConnected:e}=(0,i.F)(),{nextCompanyId:s,getCompany:a,getSharePrice:l}=(0,r.P)(),[x,h]=(0,c.useState)([]),[p,u]=(0,c.useState)(!1),[y,N]=(0,c.useState)("");(0,c.useEffect)(()=>{e&&s>0&&j()},[e,s]);let j=async()=>{u(!0);try{let e=[];for(let a=0;a<s;a++)e.push(v(a));let a=await Promise.all(e);h(a.filter(Boolean))}catch(e){console.error("Failed to load companies:",e)}finally{u(!1)}},v=async e=>{try{return{id:e,name:"Company ".concat(e+1),owner:"0x1234567890123456789012345678901234567890",initialPrice:"10.0",totalSupply:"1000",currentPrice:"12.5"}}catch(s){return console.error("Failed to load company ".concat(e,":"),s),null}},g=x.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())),f=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));return e?p?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"destock-card animate-pulse",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})},s))}):0===x.length?(0,t.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,t.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Companies Listed"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to register your company on DeStock!"}),(0,t.jsx)(n(),{href:"/register",className:"destock-button-primary inline-flex items-center",children:"Register Company"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Listed Companies (",x.length,")"]}),(0,t.jsx)("div",{className:"w-64",children:(0,t.jsx)("input",{type:"text",placeholder:"Search companies...",value:y,onChange:e=>N(e.target.value),className:"destock-input text-sm"})})]}),(0,t.jsx)("div",{className:"space-y-3",children:g.map(e=>{let s=e.currentPrice&&e.initialPrice?(parseFloat(e.currentPrice)-parseFloat(e.initialPrice))/parseFloat(e.initialPrice)*100:0;return(0,t.jsx)(n(),{href:"/company/".concat(e.id),className:"block",children:(0,t.jsx)("div",{className:"company-card",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 text-destock-primary"}),(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.name})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("div",{children:["Owner: ",f(e.owner)]}),(0,t.jsxs)("div",{children:["Total Supply: ",e.totalSupply," shares"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[e.currentPrice||e.initialPrice," DSTK"]}),e.currentPrice&&0!==s&&(0,t.jsxs)("div",{className:"flex items-center text-sm ".concat(s>0?"text-green-600":"text-red-600"),children:[s>0?(0,t.jsx)(m.A,{className:"w-3 h-3 mr-1"}):(0,t.jsx)(o.A,{className:"w-3 h-3 mr-1"}),s>0?"+":"",s.toFixed(2),"%"]})]})]})})},e.id)})}),0===g.length&&y&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:['No companies found matching "',y,'"']})]}):(0,t.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,t.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Connect your wallet to view listed companies."})]})}},6492:(e,s,a)=>{Promise.resolve().then(a.bind(a,3498)),Promise.resolve().then(a.bind(a,8386))}},e=>{var s=s=>e(e.s=s);e.O(0,[850,599,78,888,98,587,315,358],()=>s(6492)),_N_E=e.O()}]);