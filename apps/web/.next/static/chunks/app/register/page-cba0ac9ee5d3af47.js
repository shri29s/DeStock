(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{36543:(e,a,s)=>{"use strict";s.d(a,{P:()=>o});var t=s(33055),i=s(441),r=s(34072),n=s(54953),l=s(14532),d=s(7620),c=s(53995);function o(){let{address:e,chainId:a}=(0,t.F)(),s=(0,d.useMemo)(()=>{if(a)return(0,l.RZ)("DESTOCK",a)},[a]),{writeContract:o,data:u,error:m,isPending:g}=(0,i.x)(),{isLoading:b,isSuccess:p}=(0,r.g)({hash:u}),{data:x}=(0,n.Q)({address:s,abi:l.$B,functionName:"nextCompanyId"}),h=(0,d.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"companies",args:[BigInt(e)]}),[s]),y=(0,d.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"getSharePrice",args:[BigInt(e)]}),[s]),N=(0,d.useCallback)((a,t)=>{let i=t||e;return(0,n.Q)({address:s,abi:l.$B,functionName:"balanceOf",args:i?[i,BigInt(a)]:void 0,query:{enabled:!!i}})},[s,e]),f=(0,d.useCallback)((a,t)=>{let i=t||e;return(0,n.Q)({address:s,abi:l.$B,functionName:"getLPTokenBalance",args:i?[i,BigInt(a)]:void 0,query:{enabled:!!i}})},[s,e]),B=(0,d.useCallback)(a=>{let t=a||e;return(0,n.Q)({address:s,abi:l.$B,functionName:"getUserOrders",args:t?[t]:void 0,query:{enabled:!!t}})},[s,e]),j=(0,d.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"getOrderDetails",args:[BigInt(e)]}),[s]),k=(0,d.useCallback)((e,a)=>(0,n.Q)({address:s,abi:l.$B,functionName:"getBuyPrice",args:[BigInt(e),BigInt(a)]}),[s]),C=(0,d.useCallback)((e,a)=>(0,n.Q)({address:s,abi:l.$B,functionName:"getSellPrice",args:[BigInt(e),BigInt(a)]}),[s]),S=(0,d.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"getTradingVolume",args:[BigInt(e)]}),[s]),I=(0,d.useCallback)((e,a,t)=>{s&&o({address:s,abi:l.$B,functionName:"registerCompany",args:[e,(0,c.g)(a),BigInt(t)]})},[s,o]),v=(0,d.useCallback)((e,a)=>{s&&o({address:s,abi:l.$B,functionName:"buyShares",args:[BigInt(e),BigInt(a)]})},[s,o]),P=(0,d.useCallback)((e,a)=>{s&&o({address:s,abi:l.$B,functionName:"sellShares",args:[BigInt(e),BigInt(a)]})},[s,o]),F=(0,d.useCallback)((e,a,t)=>{s&&o({address:s,abi:l.$B,functionName:"addLiquidity",args:[BigInt(e),(0,c.g)(a),BigInt(t)]})},[s,o]),O=(0,d.useCallback)((e,a)=>{s&&o({address:s,abi:l.$B,functionName:"removeLiquidity",args:[BigInt(e),BigInt(a)]})},[s,o]),$=(0,d.useCallback)((e,a,t,i)=>{s&&o({address:s,abi:l.$B,functionName:"placeOrder",args:[BigInt(e),a,BigInt(t),(0,c.g)(i)]})},[s,o]),T=(0,d.useCallback)(e=>{s&&o({address:s,abi:l.$B,functionName:"cancelOrder",args:[BigInt(e)]})},[s,o]);return{contractAddress:s,nextCompanyId:x?Number(x):0,getCompany:h,getSharePrice:y,getShareBalance:N,getLPTokenBalance:f,getUserOrders:B,getOrderDetails:j,getBuyPrice:k,getSellPrice:C,getTradingVolume:S,registerCompany:I,buyShares:v,sellShares:P,addLiquidity:F,removeLiquidity:O,placeOrder:$,cancelOrder:T,hash:u,isPending:g,isConfirming:b,isConfirmed:p,error:m}}},66888:(e,a,s)=>{"use strict";s.d(a,{O:()=>u});var t=s(33055),i=s(441),r=s(34072),n=s(54953),l=s(14532),d=s(7620),c=s(98283),o=s(29548);function u(){let{address:e,chainId:a}=(0,t.F)(),s=(0,d.useMemo)(()=>{if(a)return(0,l.RZ)("DSTK_TOKEN",a)},[a]),{writeContract:u,data:m,error:g,isPending:b}=(0,i.x)(),{isLoading:p,isSuccess:x}=(0,r.g)({hash:m}),{data:h,refetch:y}=(0,n.Q)({address:s,abi:l.MO,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:!!e}}),{data:N}=(0,n.Q)({address:s,abi:l.MO,functionName:"totalSupply"}),f=(0,d.useCallback)(a=>(0,n.Q)({address:s,abi:l.MO,functionName:"allowance",args:e&&a?[e,a]:void 0,query:{enabled:!!e&&!!a}}),[s,e]),B=(0,d.useCallback)((e,a)=>{s&&u({address:s,abi:l.MO,functionName:"approve",args:[e,(0,c.X)(a,l.sI)]})},[s,u]),j=(0,d.useCallback)((e,a)=>{s&&u({address:s,abi:l.MO,functionName:"transfer",args:[e,(0,c.X)(a,l.sI)]})},[s,u]),k=(0,d.useCallback)(e=>e?(0,o.J)(e,l.sI):"0",[]),C=(0,d.useCallback)(e=>(0,c.X)(e,l.sI),[]);return{contractAddress:s,balance:h?k(h):"0",rawBalance:h,totalSupply:N?k(N):"0",getAllowance:f,refetchBalance:y,approve:B,transfer:j,formatBalance:k,parseAmount:C,hash:m,isPending:b,isConfirming:p,isConfirmed:x,error:g}}},79795:(e,a,s)=>{"use strict";s.d(a,{CompanyRegistry:()=>m});var t=s(54568),i=s(7620),r=s(61938),n=s(90060),l=s(68072),d=s(36543),c=s(66888),o=s(33055);let u=l.Ik({name:l.Yj().min(1,"Company name is required").max(50,"Name too long"),initialPrice:l.Yj().min(1,"Initial price is required"),totalSupply:l.Yj().min(1,"Total supply is required")});function m(){let{isConnected:e,address:a}=(0,o.F)(),{registerCompany:s,isPending:l,isConfirming:m,isConfirmed:g,error:b}=(0,d.P)(),{balance:p,approve:x,getAllowance:h}=(0,c.O)(),[y,N]=(0,i.useState)(!0),{register:f,handleSubmit:B,formState:{errors:j},reset:k,watch:C}=(0,r.mN)({resolver:(0,n.u)(u)}),S=C(),I=S.initialPrice&&S.totalSupply?(parseFloat(S.initialPrice)*parseFloat(S.totalSupply)+100).toString():"100",v=async a=>{if(!e)return void alert("Please connect your wallet first");if(100>parseFloat(p))return void alert("Insufficient DSTK balance. You need at least 100 DSTK to register a company.");try{await s(a.name,a.initialPrice,a.totalSupply),k()}catch(e){console.error("Registration failed:",e)}};return e?(0,t.jsx)("div",{className:"destock-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-high-contrast mb-6",children:"Register Your Company"}),(0,t.jsxs)("form",{onSubmit:B(v),className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"name",children:"Company Name"}),(0,t.jsx)("input",{...f("name"),type:"text",id:"name",className:"destock-input",placeholder:"Enter company name"}),j.name&&(0,t.jsx)("p",{className:"mt-1 text-sm danger",children:j.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"initialPrice",children:"Initial Share Price (DSTK)"}),(0,t.jsx)("input",{...f("initialPrice"),type:"number",step:"0.01",min:"0.01",id:"initialPrice",className:"destock-input",placeholder:"10.00"}),j.initialPrice&&(0,t.jsx)("p",{className:"mt-1 text-sm danger",children:j.initialPrice.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"totalSupply",children:"Total Share Supply"}),(0,t.jsx)("input",{...f("totalSupply"),type:"number",min:"1",id:"totalSupply",className:"destock-input",placeholder:"1000"}),j.totalSupply&&(0,t.jsx)("p",{className:"mt-1 text-sm danger",children:j.totalSupply.message})]}),(0,t.jsxs)("div",{className:"bg-high-visibility p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-high-contrast mb-2",children:"Cost Breakdown"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-medium-contrast",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Registration Fee:"}),(0,t.jsx)("span",{children:"100 DSTK"})]}),S.initialPrice&&S.totalSupply&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Initial Liquidity:"}),(0,t.jsxs)("span",{children:[(parseFloat(S.initialPrice)*parseFloat(S.totalSupply)).toFixed(2)," DSTK"]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-medium border-t border-gray-300 dark:border-gray-600 pt-1 text-high-contrast",children:[(0,t.jsx)("span",{children:"Total Cost:"}),(0,t.jsxs)("span",{children:[I," DSTK"]})]})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-low-contrast",children:["Your Balance: ",p," DSTK"]})]}),b&&(0,t.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:(0,t.jsxs)("p",{className:"text-sm danger",children:["Registration failed: ",b.message]})}),(0,t.jsx)("button",{type:"submit",disabled:l||m||parseFloat(p)<parseFloat(I),className:"w-full destock-button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l||m?"Processing...":parseFloat(p)<parseFloat(I)?"Insufficient Balance":"Register Company"}),g&&(0,t.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:(0,t.jsx)("p",{className:"text-sm success",children:"Company registered successfully! \uD83C\uDF89"})})]})]})}):(0,t.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-high-contrast mb-2",children:"Connect Your Wallet"}),(0,t.jsx)("p",{className:"text-medium-contrast",children:"Please connect your wallet to register a company."})]})}},84169:(e,a,s)=>{Promise.resolve().then(s.bind(s,79795))}},e=>{var a=a=>e(e.s=a);e.O(0,[850,599,532,587,315,358],()=>a(84169)),_N_E=e.O()}]);