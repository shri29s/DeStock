(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{30951:(e,t,s)=>{"use strict";s.d(t,{Navigation:()=>j});var r=s(54568),a=s(27261),n=s.n(a),c=s(62942),o=s(81636),i=s(33055),l=s(1977),d=s(70092),u=s(8230),m=s(89044),x=s(66888),h=s(7620),p=s(29204),b=s(74711);function f(){let{address:e,isConnected:t,chain:s}=(0,i.F)(),{connect:a,isPending:n}=(0,l.e)(),{disconnect:c}=(0,d.u)(),{switchChain:o}=(0,u.R)(),{balance:f}=(0,x.O)(),[g,y]=(0,h.useState)(!1),[v,k]=(0,h.useState)(!1);(0,h.useEffect)(()=>{k(!0)},[]);let N=e=>{o({chainId:e}),y(!1)},j=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));return v?t?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>y(!g),className:"flex items-center space-x-3 bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-destock-primary focus:ring-offset-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 text-destock-primary"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:j(e)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[f," DSTK"]})]})]}),(0,r.jsx)(b.A,{className:"w-4 h-4"})]}),g&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:j(e)}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Balance: ",f," DSTK"]}),s&&(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Network: ",s.name]})]}),(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1",children:"Switch Network"}),(0,r.jsx)("button",{onClick:()=>N(31337),className:"w-full text-left px-2 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded",children:"Localhost"}),(0,r.jsx)("button",{onClick:()=>N(0xaa36a7),className:"w-full text-left px-2 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded",children:"Sepolia Testnet"})]}),(0,r.jsx)("div",{className:"p-2 border-t border-gray-200",children:(0,r.jsx)("button",{onClick:()=>{c(),y(!1)},className:"w-full text-left px-2 py-2 text-sm text-red-600 hover:bg-red-50 rounded",children:"Disconnect Wallet"})})]})]}):(0,r.jsxs)("button",{onClick:()=>{a({connector:(0,m.e)()})},disabled:n,className:"destock-button-primary flex items-center space-x-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:n?"Connecting...":"Connect Wallet"})]}):(0,r.jsxs)("div",{className:"destock-button-primary flex items-center space-x-2 opacity-50",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Loading..."})]})}var g=s(21752),y=s(13672),v=s(71261);function k(){let{theme:e,setTheme:t}=(0,g.D)(),[s,a]=(0,h.useState)(!1);return((0,h.useEffect)(()=>{a(!0)},[]),s)?(0,r.jsx)(o.P.button,{onClick:()=>{t("dark"===e?"light":"dark")},className:"w-9 h-9 rounded-md glass-button flex items-center justify-center text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destock-primary focus:ring-offset-2",whileTap:{scale:.95},whileHover:{scale:1.05},"aria-label":"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:(0,r.jsx)(o.P.div,{initial:!1,animate:{rotate:180*("dark"===e)},transition:{type:"spring",stiffness:200,damping:10},children:"dark"===e?(0,r.jsx)(y.A,{className:"w-4 h-4"}):(0,r.jsx)(v.A,{className:"w-4 h-4"})})}):(0,r.jsx)("div",{className:"w-9 h-9 rounded-md glass-button flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-300 animate-pulse"})})}let N=[{name:"Dashboard",href:"/"},{name:"Tokens",href:"/tokens"},{name:"Register Company",href:"/register"},{name:"Portfolio",href:"/portfolio"}];function j(){let e=(0,c.usePathname)();return(0,r.jsx)(o.P.nav,{className:"glass-nav border-b border-white/20 dark:border-black/20",initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:300,damping:30},children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(n(),{href:"/",className:"text-2xl font-bold text-destock-primary",children:"DeStock"})}),(0,r.jsx)("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-8",children:N.map(t=>(0,r.jsx)(o.P.div,{whileHover:{y:-2},whileTap:{y:0},children:(0,r.jsx)(n(),{href:t.href,className:"inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 transition-colors duration-200 ".concat(e===t.href?"border-destock-primary text-destock-primary":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600"),children:t.name})},t.name))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(k,{}),(0,r.jsx)(f,{})]})]})})})}},43013:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,57108,23)),Promise.resolve().then(s.bind(s,86425)),Promise.resolve().then(s.bind(s,30951)),Promise.resolve().then(s.t.bind(s,24938,23))},57108:()=>{},62023:(e,t,s)=>{"use strict";s.d(t,{f:()=>o,h:()=>c});var r=s(54568),a=s(7620);let n=(0,a.createContext)(null);function c(){let e=(0,a.useContext)(n);if(!e)throw Error("useWebSocket must be used within a WebSocketProvider");return e}function o(e){let{children:t,url:s="ws://localhost:8080"}=e,c=(0,a.useRef)(null),o=(0,a.useRef)(),[i,l]=(0,a.useState)(!1),[d,u]=(0,a.useState)("disconnected"),[m,x]=(0,a.useState)(new Map),[h,p]=(0,a.useState)(new Map),[b,f]=(0,a.useState)(new Map),[g,y]=(0,a.useState)(new Set),v=()=>{var e;if((null==(e=c.current)?void 0:e.readyState)!==WebSocket.OPEN){u("connecting");try{c.current=new WebSocket(s),c.current.onopen=()=>{console.log("WebSocket connected"),l(!0),u("connected"),g.forEach(e=>{var t;null==(t=c.current)||t.send(JSON.stringify({type:"subscribe",companyId:e}))})},c.current.onmessage=e=>{try{let t=JSON.parse(e.data);switch(t.type){case"price_update":x(e=>new Map(e.set(t.companyId,t.data)));break;case"orderbook_update":p(e=>new Map(e.set(t.companyId,t.data)));break;case"trade_update":f(e=>{let s=e.get(t.companyId)||[],r=[t.data,...s].slice(0,100);return new Map(e.set(t.companyId,r))});break;default:console.log("Unknown message type:",t.type)}}catch(e){console.error("Error parsing WebSocket message:",e)}},c.current.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),l(!1),u("disconnected"),e.wasClean||(o.current=setTimeout(()=>{v()},3e3))},c.current.onerror=e=>{console.error("WebSocket error:",e),u("error")}}catch(e){console.error("Failed to create WebSocket connection:",e),u("error")}}},k=()=>{o.current&&clearTimeout(o.current),c.current&&(c.current.close(1e3,"Manual disconnect"),c.current=null),l(!1),u("disconnected")};return(0,a.useEffect)(()=>(v(),()=>{k()}),[s]),(0,r.jsx)(n.Provider,{value:{isConnected:i,priceUpdates:m,orderBooks:h,recentTrades:b,subscribe:e=>{var t;y(t=>new Set(t.add(e))),(null==(t=c.current)?void 0:t.readyState)===WebSocket.OPEN&&c.current.send(JSON.stringify({type:"subscribe",companyId:e}))},unsubscribe:e=>{var t;y(t=>{let s=new Set(t);return s.delete(e),s}),(null==(t=c.current)?void 0:t.readyState)===WebSocket.OPEN&&c.current.send(JSON.stringify({type:"unsubscribe",companyId:e}))},connectionStatus:d},children:t})}},66888:(e,t,s)=>{"use strict";s.d(t,{O:()=>u});var r=s(33055),a=s(441),n=s(34072),c=s(54953),o=s(14532),i=s(7620),l=s(98283),d=s(29548);function u(){let{address:e,chainId:t}=(0,r.F)(),s=(0,i.useMemo)(()=>{if(t)return(0,o.RZ)("DSTK_TOKEN",t)},[t]),{writeContract:u,data:m,error:x,isPending:h}=(0,a.x)(),{isLoading:p,isSuccess:b}=(0,n.g)({hash:m}),{data:f,refetch:g}=(0,c.Q)({address:s,abi:o.MO,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:!!e}}),{data:y}=(0,c.Q)({address:s,abi:o.MO,functionName:"totalSupply"}),v=(0,i.useCallback)(t=>(0,c.Q)({address:s,abi:o.MO,functionName:"allowance",args:e&&t?[e,t]:void 0,query:{enabled:!!e&&!!t}}),[s,e]),k=(0,i.useCallback)((e,t)=>{s&&u({address:s,abi:o.MO,functionName:"approve",args:[e,(0,l.X)(t,o.sI)]})},[s,u]),N=(0,i.useCallback)((e,t)=>{s&&u({address:s,abi:o.MO,functionName:"transfer",args:[e,(0,l.X)(t,o.sI)]})},[s,u]),j=(0,i.useCallback)(e=>e?(0,d.J)(e,o.sI):"0",[]),w=(0,i.useCallback)(e=>(0,l.X)(e,o.sI),[]);return{contractAddress:s,balance:f?j(f):"0",rawBalance:f,totalSupply:y?j(y):"0",getAllowance:v,refetchBalance:g,approve:k,transfer:N,formatBalance:j,parseAmount:w,hash:m,isPending:h,isConfirming:p,isConfirmed:b,error:x}}},86425:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>k});var r=s(54568),a=s(56924),n=s(11932),c=s(87606),o=s(21752),i=s(48806),l=s(51092),d=s(75317),u=s(22241),m=s(87240),x=s(31588),h=s(34252),p=s(3233),b=s(89044),f=s(24338);let g=(0,u.Z)({chains:[x.o,h.G,p.r],connectors:[(0,b.e)({dappMetadata:{name:"DeStock",url:"https://destock.app",iconUrl:"https://destock.app/icon.png"}})],transports:{[x.o.id]:(0,m.L)("http://127.0.0.1:8545"),[h.G.id]:(0,m.L)("https://eth-sepolia.g.alchemy.com/v2/".concat(f.env.NEXT_PUBLIC_ALCHEMY_API_KEY)),[p.r.id]:(0,m.L)("https://eth-mainnet.g.alchemy.com/v2/".concat(f.env.NEXT_PUBLIC_ALCHEMY_API_KEY))}});var y=s(62023),v=s(7620);function k(e){let{children:t}=e,[s]=(0,v.useState)(()=>new n.E);return(0,r.jsx)(o.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!1,children:(0,r.jsx)(i.F,{features:l.l,children:(0,r.jsx)(a.x,{config:g,children:(0,r.jsx)(c.Ht,{client:s,children:(0,r.jsxs)(y.f,{url:"ws://localhost:8080",children:[t,(0,r.jsx)(d.l$,{position:"top-right",toastOptions:{className:"glass-card",style:{background:"var(--glass-bg)",color:"var(--foreground)",border:"1px solid var(--glass-border)",backdropFilter:"blur(12px)"}}})]})})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[38,850,319,261,339,532,587,315,358],()=>t(43013)),_N_E=e.O()}]);