"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{2935:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(4624).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},6543:(e,s,a)=>{a.d(s,{P:()=>o});var t=a(3055),n=a(441),r=a(4072),l=a(4953),i=a(4532),c=a(7620),d=a(3995);function o(){let{address:e,chainId:s}=(0,t.F)(),a=(0,c.useMemo)(()=>{if(s)return(0,i.RZ)("DESTOCK",s)},[s]),{writeContract:o,data:m,error:u,isPending:h}=(0,n.x)(),{isLoading:x,isSuccess:p}=(0,r.g)({hash:m}),{data:y}=(0,l.Q)({address:a,abi:i.$B,functionName:"nextCompanyId"}),g=(0,c.useCallback)(e=>(0,l.Q)({address:a,abi:i.$B,functionName:"companies",args:[BigInt(e)]}),[a]),b=(0,c.useCallback)(e=>(0,l.Q)({address:a,abi:i.$B,functionName:"getSharePrice",args:[BigInt(e)]}),[a]),f=(0,c.useCallback)((s,t)=>{let n=t||e;return(0,l.Q)({address:a,abi:i.$B,functionName:"balanceOf",args:n?[n,BigInt(s)]:void 0,query:{enabled:!!n}})},[a,e]),j=(0,c.useCallback)((e,s,t)=>{a&&o({address:a,abi:i.$B,functionName:"registerCompany",args:[e,(0,d.g)(s),BigInt(t)]})},[a,o]),N=(0,c.useCallback)((e,s)=>{a&&o({address:a,abi:i.$B,functionName:"buyShares",args:[BigInt(e),BigInt(s)]})},[a,o]),k=(0,c.useCallback)((e,s)=>{a&&o({address:a,abi:i.$B,functionName:"sellShares",args:[BigInt(e),BigInt(s)]})},[a,o]);return{contractAddress:a,nextCompanyId:y?Number(y):0,getCompany:g,getSharePrice:b,getShareBalance:f,registerCompany:j,buyShares:N,sellShares:k,hash:m,isPending:h,isConfirming:x,isConfirmed:p,error:u}}},6734:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(4624).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},8386:(e,s,a)=>{a.d(s,{TradeView:()=>p});var t=a(4568),n=a(7620),r=a(1938),l=a(60),i=a(8072),c=a(6543),d=a(6888),o=a(3055);let m=(0,a(4624).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var u=a(6734),h=a(2935);let x=i.Ik({companyId:i.Yj().min(1,"Please select a company"),amount:i.Yj().min(1,"Amount is required")});function p(){let{isConnected:e}=(0,o.F)(),{buyShares:s,sellShares:a,getSharePrice:i,getShareBalance:p,nextCompanyId:y,isPending:g,isConfirming:b,isConfirmed:f,error:j}=(0,c.P)(),{balance:N}=(0,d.O)(),[k,v]=(0,n.useState)([]),[S,w]=(0,n.useState)(null),[C,B]=(0,n.useState)("buy"),[I,T]=(0,n.useState)("0"),[F,M]=(0,n.useState)(!1),{register:A,handleSubmit:D,formState:{errors:K},watch:P,setValue:$,reset:E}=(0,r.mN)({resolver:(0,l.u)(x)}),Y=P("companyId"),Q=P("amount");(0,n.useEffect)(()=>{e&&y>0&&_()},[e,y]),(0,n.useEffect)(()=>{if(Y){let e=k.find(e=>e.id.toString()===Y);e&&(w(e),z(e.id))}},[Y,k]);let _=async()=>{try{let e=[];for(let s=0;s<y;s++)e.push({id:s,name:"Company ".concat(s+1),price:"12.5"});v(e)}catch(e){console.error("Failed to load companies:",e)}},z=async e=>{try{T("100")}catch(e){console.error("Failed to load user shares:",e),T("0")}},O=()=>S&&Q?(parseFloat(S.price)*parseFloat(Q)).toFixed(2):"0",q=async e=>{if(S){M(!0);try{"buy"===C?await s(S.id,e.amount):await a(S.id,e.amount),E()}catch(e){console.error("Trade failed:",e)}finally{M(!1)}}},H=()=>{if(!S||!Q)return!1;let e=parseFloat(Q);if(e<=0)return!1;if("buy"!==C)return parseFloat(I)>=e;{let e=parseFloat(O());return parseFloat(N)>=e}};return e?(0,t.jsxs)("div",{className:"trading-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Trade Shares"}),(0,t.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,t.jsx)("button",{onClick:()=>B("buy"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("buy"===C?"bg-white text-destock-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Buy"}),(0,t.jsx)("button",{onClick:()=>B("sell"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("sell"===C?"bg-white text-destock-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Sell"})]})]}),(0,t.jsxs)("form",{onSubmit:D(q),className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"companyId",children:"Select Company"}),(0,t.jsxs)("select",{...A("companyId"),id:"companyId",className:"destock-input",children:[(0,t.jsx)("option",{value:"",children:"Choose a company"}),k.map(e=>(0,t.jsxs)("option",{value:e.id.toString(),children:[e.name," - ",e.price," DSTK"]},e.id))]}),K.companyId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:K.companyId.message})]}),S&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:S.name}),(0,t.jsxs)("span",{className:"text-lg font-semibold text-destock-primary",children:[S.price," DSTK"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Your Balance: ",I," shares"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"amount",children:"Amount"}),(0,t.jsx)("input",{...A("amount"),type:"number",step:"1",min:"1",id:"amount",className:"destock-input",placeholder:"Number of shares"}),K.amount&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:K.amount.message})]}),S&&Q&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Transaction Summary"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shares:"}),(0,t.jsx)("span",{children:Q})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Price per share:"}),(0,t.jsxs)("span",{children:[S.price," DSTK"]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-medium border-t pt-1",children:[(0,t.jsxs)("span",{children:["Total ","buy"===C?"Cost":"Proceeds",":"]}),(0,t.jsxs)("span",{children:[O()," DSTK"]})]})]}),"buy"===C&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Your DSTK Balance: ",N," DSTK"]})]}),j&&(0,t.jsx)("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-red-800",children:["Transaction failed: ",j.message]})}),(0,t.jsxs)("button",{type:"submit",disabled:!H()||g||b||F,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat("buy"===C?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),children:["buy"===C?(0,t.jsx)(u.A,{className:"w-4 h-4"}):(0,t.jsx)(h.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:g||b||F?"Processing...":H()?"".concat("buy"===C?"Buy":"Sell"," Shares"):"buy"===C?"Insufficient Balance":"Insufficient Shares"})]}),f&&(0,t.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-green-800",children:"Transaction completed successfully! \uD83C\uDF89"})})]})]}):(0,t.jsxs)("div",{className:"trading-card text-center",children:[(0,t.jsx)(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Connect your wallet to start trading shares."})]})}},8521:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(4624).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])}}]);