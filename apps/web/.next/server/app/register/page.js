(()=>{var e={};e.id=454,e.ids=[454],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4739:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(38828),a=s(14027);function i(){return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Register Your Company"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"List your company on DeStock and enable decentralized trading of your shares."})]}),(0,r.jsx)(a.CompanyRegistry,{})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},14027:(e,t,s)=>{"use strict";s.d(t,{CompanyRegistry:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call CompanyRegistry() from the server but CompanyRegistry is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\intel\\web3ssh\\DeStock\\apps\\web\\components\\CompanyRegistry.tsx","CompanyRegistry")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},26135:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(24332),a=s(48819),i=s(67851),n=s.n(i),l=s(97540),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c={children:["",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4739)),"D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\register\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,34356)),"D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\register\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/register/page",pathname:"/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63895:(e,t,s)=>{Promise.resolve().then(s.bind(s,14027))},68623:(e,t,s)=>{Promise.resolve().then(s.bind(s,97997))},74075:e=>{"use strict";e.exports=require("zlib")},77295:(e,t,s)=>{"use strict";s.d(t,{P:()=>d});var r=s(38049),a=s(4574),i=s(61997),n=s(24665),l=s(86535),o=s(60159),c=s(77943);function d(){let{address:e,chainId:t}=(0,r.F)(),s=(0,o.useMemo)(()=>{if(t)return(0,l.RZ)("DESTOCK",t)},[t]),{writeContract:d,data:p,error:u,isPending:m}=(0,a.x)(),{isLoading:x,isSuccess:h}=(0,i.g)({hash:p}),{data:g}=(0,n.Q)({address:s,abi:l.$B,functionName:"nextCompanyId"}),y=(0,o.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"companies",args:[BigInt(e)]}),[s]),b=(0,o.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"getSharePrice",args:[BigInt(e)]}),[s]),f=(0,o.useCallback)((t,r)=>{let a=r||e;return(0,n.Q)({address:s,abi:l.$B,functionName:"balanceOf",args:a?[a,BigInt(t)]:void 0,query:{enabled:!!a}})},[s,e]),j=(0,o.useCallback)((e,t,r)=>{s&&d({address:s,abi:l.$B,functionName:"registerCompany",args:[e,(0,c.g)(t),BigInt(r)]})},[s,d]),v=(0,o.useCallback)((e,t)=>{s&&d({address:s,abi:l.$B,functionName:"buyShares",args:[BigInt(e),BigInt(t)]})},[s,d]),N=(0,o.useCallback)((e,t)=>{s&&d({address:s,abi:l.$B,functionName:"sellShares",args:[BigInt(e),BigInt(t)]})},[s,d]);return{contractAddress:s,nextCompanyId:g?Number(g):0,getCompany:y,getSharePrice:b,getShareBalance:f,registerCompany:j,buyShares:v,sellShares:N,hash:p,isPending:m,isConfirming:x,isConfirmed:h,error:u}}},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97997:(e,t,s)=>{"use strict";s.d(t,{CompanyRegistry:()=>u});var r=s(13486),a=s(60159),i=s(85626),n=s(85519),l=s(67201),o=s(77295),c=s(16818),d=s(38049);let p=l.Ik({name:l.Yj().min(1,"Company name is required").max(50,"Name too long"),initialPrice:l.Yj().min(1,"Initial price is required"),totalSupply:l.Yj().min(1,"Total supply is required")});function u(){let{isConnected:e,address:t}=(0,d.F)(),{registerCompany:s,isPending:l,isConfirming:u,isConfirmed:m,error:x}=(0,o.P)(),{balance:h,approve:g,getAllowance:y}=(0,c.O)(),[b,f]=(0,a.useState)(!0),{register:j,handleSubmit:v,formState:{errors:N},reset:S,watch:C}=(0,i.mN)({resolver:(0,n.u)(p)}),P=C(),q=P.initialPrice&&P.totalSupply?(parseFloat(P.initialPrice)*parseFloat(P.totalSupply)+100).toString():"100",k=async t=>{if(!e)return void alert("Please connect your wallet first");if(100>parseFloat(h))return void alert("Insufficient DSTK balance. You need at least 100 DSTK to register a company.");try{await s(t.name,t.initialPrice,t.totalSupply),S()}catch(e){console.error("Registration failed:",e)}};return e?(0,r.jsx)("div",{className:"destock-card",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Register Your Company"}),(0,r.jsxs)("form",{onSubmit:v(k),className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"destock-label",htmlFor:"name",children:"Company Name"}),(0,r.jsx)("input",{...j("name"),type:"text",id:"name",className:"destock-input",placeholder:"Enter company name"}),N.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"destock-label",htmlFor:"initialPrice",children:"Initial Share Price (DSTK)"}),(0,r.jsx)("input",{...j("initialPrice"),type:"number",step:"0.01",min:"0.01",id:"initialPrice",className:"destock-input",placeholder:"10.00"}),N.initialPrice&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.initialPrice.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"destock-label",htmlFor:"totalSupply",children:"Total Share Supply"}),(0,r.jsx)("input",{...j("totalSupply"),type:"number",min:"1",id:"totalSupply",className:"destock-input",placeholder:"1000"}),N.totalSupply&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.totalSupply.message})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Cost Breakdown"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Registration Fee:"}),(0,r.jsx)("span",{children:"100 DSTK"})]}),P.initialPrice&&P.totalSupply&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Initial Liquidity:"}),(0,r.jsxs)("span",{children:[(parseFloat(P.initialPrice)*parseFloat(P.totalSupply)).toFixed(2)," DSTK"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-medium border-t pt-1",children:[(0,r.jsx)("span",{children:"Total Cost:"}),(0,r.jsxs)("span",{children:[q," DSTK"]})]})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Your Balance: ",h," DSTK"]})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-red-800",children:["Registration failed: ",x.message]})}),(0,r.jsx)("button",{type:"submit",disabled:l||u||parseFloat(h)<parseFloat(q),className:"w-full destock-button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l||u?"Processing...":parseFloat(h)<parseFloat(q)?"Insufficient Balance":"Register Company"}),m&&(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-green-800",children:"Company registered successfully! \uD83C\uDF89"})})]})]})}):(0,r.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please connect your wallet to register a company."})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[191,638,397,912],()=>s(26135));module.exports=r})();