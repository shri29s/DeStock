(()=>{var t={};t.id=974,t.ids=[974],t.modules={3295:t=>{"use strict";t.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:t=>{"use strict";t.exports=require("punycode")},19121:t=>{"use strict";t.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21306:(t,e,i)=>{Promise.resolve().then(i.bind(i,22160))},21820:t=>{"use strict";t.exports=require("os")},22160:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>nb});var s,l,n,r,h,a,o,u,c,d,f,m=i(13486),p=i(60159),g=i(67892);let{createElement:v,createContext:b,forwardRef:x,useCallback:y,useContext:w,useEffect:S,useImperativeHandle:M,useLayoutEffect:z,useMemo:_,useRef:N,useState:k}=p,C=p["useId".toString()],j="function"==typeof C?C:()=>null,E=0;function L(t=null){let e=j(),i=N(t||e||null);return null===i.current&&(i.current=""+E++),i.current}let P=b(null);function $({children:t=null,className:e="",collapsedSize:i=0,collapsible:s=!1,defaultSize:l=null,forwardedRef:n,id:r=null,maxSize:h=null,minSize:a,onCollapse:o=null,onResize:u=null,order:c=null,style:d={},tagName:f="div"}){let m=w(P);if(null===m)throw Error("Panel components must be rendered within a PanelGroup container");let p=L(r),{collapsePanel:g,expandPanel:b,getPanelSize:x,getPanelStyle:y,registerPanel:z,resizePanel:_,units:k,unregisterPanel:C}=m;null==a&&(a=10*("percentages"===k));let j=N({onCollapse:o,onResize:u});S(()=>{j.current.onCollapse=o,j.current.onResize=u});let E=y(p,l),$=N({size:function(t){let{flexGrow:e}=t;return"string"==typeof e?parseFloat(e):e}(E)});return N({callbacksRef:j,collapsedSize:i,collapsible:s,defaultSize:l,id:p,idWasAutoGenerated:null==r,maxSize:h,minSize:a,order:c}),M(n,()=>({collapse:()=>g(p),expand:()=>b(p),getCollapsed:()=>0===$.current.size,getId:()=>p,getSize:t=>x(p,t),resize:(t,e)=>_(p,t,e)}),[g,b,x,p,_]),v(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-id":p,"data-panel-size":parseFloat(""+E.flexGrow).toFixed(1),id:`data-panel-id-${p}`,style:{...E,...d}})}P.displayName="PanelGroupContext";let R=x((t,e)=>v($,{...t,forwardedRef:e}));function V(t,e,i,s,l,n,r,h){let{id:a,panels:o,units:u}=e,c="pixels"===u?D(a):NaN,{sizes:d}=h||{},f=d||n,m=H(o),p=f.concat(),g=0;{let e=l<0?s:i,n=m.findIndex(t=>t.current.id===e),h=m[n],a=f[n],o=X(u,c,h,a,a+Math.abs(l),t);if(a===o)return f;0===o&&a>0&&r.set(e,a),l=l<0?a-o:o-a}let v=l<0?i:s,b=m.findIndex(t=>t.current.id===v);for(;;){let e=m[b],i=f[b],s=X(u,c,e,i,i-(Math.abs(l)-Math.abs(g)),t);if(i!==s&&(0===s&&i>0&&r.set(e.current.id,i),g+=i-s,p[b]=s,g.toPrecision(10).localeCompare(Math.abs(l).toPrecision(10),void 0,{numeric:!0})>=0))break;if(l<0){if(--b<0)break}else if(++b>=m.length)break}return 0===g?f:(v=l<0?s:i,p[b=m.findIndex(t=>t.current.id===v)]=f[b]+g,p)}function T(t,e,i){e.forEach((e,s)=>{let l=t[s];if(!l)return;let{callbacksRef:n,collapsedSize:r,collapsible:h,id:a}=l.current,o=i[a];if(o!==e){i[a]=e;let{onCollapse:t,onResize:s}=n.current;s&&s(e,o),h&&t&&((null==o||o===r)&&e!==r?t(!1):o!==r&&e===r&&t(!0))}})}function W(t,e){if(e.length<2)return[null,null];let i=e.findIndex(e=>e.current.id===t);if(i<0)return[null,null];let s=i===e.length-1;return[s?e[i-1].current.id:t,s?t:e[i+1].current.id]}function D(t){let e=I(t);if(null==e)return NaN;let i=e.getAttribute("data-panel-group-direction"),s=A(t);return"horizontal"===i?e.offsetWidth-s.reduce((t,e)=>t+e.offsetWidth,0):e.offsetHeight-s.reduce((t,e)=>t+e.offsetHeight,0)}function B(t,e,i){if(1===t.size)return"100";let s=i[H(t).findIndex(t=>t.current.id===e)];return null==s?"0":s.toPrecision(10)}function I(t){let e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function O(t){let e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function F(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function A(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function K(t,e,i){let s=O(e),l=A(t),n=s?l.indexOf(s):-1;return[i[n]?.current?.id??null,i[n+1]?.current?.id??null]}function H(t){return Array.from(t.values()).sort((t,e)=>{let i=t.current.order,s=e.current.order;return null==i&&null==s?0:null==i?-1:null==s?1:i-s})}function X(t,e,i,s,l,n=null){let{collapsedSize:r,collapsible:h,maxSize:a,minSize:o}=i.current;if("pixels"===t&&(r=r/e*100,null!=a&&(a=a/e*100),o=o/e*100),h){if(s>r){if(l<=o/2+r)return r}else if(!n?.type?.startsWith("key")&&l<o)return r}return Math.min(null!=a?a:100,Math.max(o,l))}function q(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function G(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function U(t,e,i,s=0,l=null){let n="horizontal"===i,r=0;if(J(t))r=n?t.clientX:t.clientY;else{if(!Q(t))return 0;let e=t.touches[0];r=n?e.screenX:e.screenY}let h=O(e),a=l||h.getBoundingClientRect();return r-(n?a.left:a.top)-s}function J(t){return t.type.startsWith("mouse")}function Q(t){return t.type.startsWith("touch")}$.displayName="Panel",R.displayName="forwardRef(Panel)";let Y=null,Z=null;function tt(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function te(t){if(Y===t)return;Y=t;let e=tt(t);null===Z&&(Z=document.createElement("style"),document.head.appendChild(Z)),Z.innerHTML=`*{cursor: ${e}!important;}`}function ti(t,e,i,s){let l=e.map(t=>{let{minSize:e,order:i}=t.current;return i?`${i}:${e}`:`${e}`}).sort((t,e)=>t.localeCompare(e)).join(","),n=function(t,e){try{let i=e.getItem(`PanelGroup:sizes:${t}`);if(i){let t=JSON.parse(i);if("object"==typeof t&&null!=t)return t}}catch(t){}return null}(t,s)||{};n[l]=i;try{s.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(n))}catch(t){console.error(t)}}let ts={};function tl(t){try{if("undefined"!=typeof localStorage)t.getItem=t=>localStorage.getItem(t),t.setItem=(t,e)=>{localStorage.setItem(t,e)};else throw Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}let tn={getItem:t=>(tl(tn),tn.getItem(t)),setItem:(t,e)=>{tl(tn),tn.setItem(t,e)}};function tr({autoSaveId:t,children:e=null,className:i="",direction:s,disablePointerEventsDuringResize:l=!1,forwardedRef:n,id:r=null,onLayout:h,storage:a=tn,style:o={},tagName:u="div",units:c="percentages"}){let d=L(r),[f,m]=k(null),[p,g]=k(new Map),b=N(null);N({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,didLogInvalidLayoutWarning:!1,prevPanelIds:[]});let x=N({onLayout:h});S(()=>{x.current.onLayout=h});let w=N({}),[z,C]=k([]),j=N(new Map),E=N(0),$=N({direction:s,id:d,panels:p,sizes:z,units:c});M(n,()=>({getId:()=>d,getLayout:t=>{let{sizes:e,units:i}=$.current;if("pixels"!==(t??i))return e;{let t=D(d);return e.map(e=>e/100*t)}},setLayout:(t,e)=>{let{id:i,panels:s,sizes:l,units:n}=$.current;if("pixels"===(e||n)){let e=D(i);t=t.map(t=>t/e*100)}let r=w.current,h=H(s),a=function({groupId:t,panels:e,nextSizes:i,prevSizes:s,units:l}){i=[...i];let n=H(e),r="pixels"===l?D(t):NaN,h=0;for(let t=0;t<n.length;t++){let e=n[t],a=s[t],o=i[t],u=X(l,r,e,a,o);o!=u&&(h+=o-u,i[t]=u)}if("0.000"!==h.toFixed(3))for(let t=0;t<n.length;t++){let{maxSize:e,minSize:s}=n[t].current;"pixels"===l&&(s=s/r*100,null!=e&&(e=e/r*100));let a=Math.min(null!=e?e:100,Math.max(s,i[t]+h));if(a!==i[t]&&(h-=a-i[t],i[t]=a,"0.000"===Math.abs(h).toFixed(3)))break}return h.toFixed(3),i}({groupId:i,panels:s,nextSizes:t,prevSizes:l,units:n});G(l,a)||(C(a),T(h,a,r))}}),[d]),function({committedValuesRef:t,groupId:e,panels:i,setSizes:s,sizes:l,panelSizeBeforeCollapse:n}){S(()=>{let{direction:i,panels:r}=t.current,h=I(e);q(null!=h,`No group found for id "${e}"`);let{height:a,width:o}=h.getBoundingClientRect(),u=A(e).map(h=>{let u=h.getAttribute("data-panel-resize-handle-id"),c=H(r),[d,f]=K(e,u,c);if(null==d||null==f)return()=>{};let m=0,p=100,g=0,v=0;c.forEach(t=>{let{id:e,maxSize:i,minSize:s}=t.current;e===d?(m=s,p=null!=i?i:100):(g+=s,v+=null!=i?i:100)});let b=Math.min(p,100-g),x=Math.max(m,(c.length-1)*100-v),y=B(r,d,l);h.setAttribute("aria-valuemax",""+Math.round(b)),h.setAttribute("aria-valuemin",""+Math.round(x)),h.setAttribute("aria-valuenow",""+Math.round(parseInt(y)));let w=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let r=c.findIndex(t=>t.current.id===d);if(r>=0){let h=c[r],u=l[r];if(null!=u){let r=0;r=u.toPrecision(10)<=h.current.minSize.toPrecision(10)?"horizontal"===i?o:a:-("horizontal"===i?o:a);let c=V(e,t.current,d,f,r,l,n.current,null);l!==c&&s(c)}}}};h.addEventListener("keydown",w);let S=function(t){let e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}(d);return null!=S&&h.setAttribute("aria-controls",S.id),()=>{h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow"),h.removeEventListener("keydown",w),null!=S&&h.removeAttribute("aria-controls")}});return()=>{u.forEach(t=>t())}},[t,e,i,n,s,l])}({committedValuesRef:$,groupId:d,panels:p,setSizes:C,sizes:z,panelSizeBeforeCollapse:j}),S(()=>{let{onLayout:t}=x.current,{panels:e,sizes:i}=$.current;if(i.length>0){t&&t(i);let s=w.current;T(H(e),i,s)}},[z]),S(()=>{if(t){if(0===z.length||z.length!==p.size)return;let e=H(p);ts[t]||(ts[t]=function(t,e=10){let i=null;return(...s)=>{null!==i&&clearTimeout(i),i=setTimeout(()=>{t(...s)},e)}}(ti,100)),ts[t](t,e,z,a)}},[t,p,z,a]);let R=y((t,e)=>{let{panels:i,units:s}=$.current,l=z[H(i).findIndex(e=>e.current.id===t)];return"pixels"===(e??s)?l/100*D(d):l},[d,z]),F=y((t,e)=>{let{panels:i}=$.current;return 0===i.size?{flexBasis:0,flexGrow:null!=e?e:void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:B(i,t,z),flexShrink:1,overflow:"hidden",pointerEvents:l&&null!==f?"none":void 0}},[f,l,z]),tt=y((t,e)=>{let{units:i}=$.current,{collapsible:s,defaultSize:l,maxSize:n,minSize:r}=e.current;(r<0||"percentages"===i&&r>100)&&(e.current.minSize=0),null!=n&&(n<0||"percentages"===i&&n>100)&&(e.current.maxSize=null),null!==l&&(l<0||"percentages"===i&&l>100?e.current.defaultSize=null:l<r&&!s?e.current.defaultSize=r:null!=n&&l>n&&(e.current.defaultSize=n)),g(i=>{if(i.has(t))return i;let s=new Map(i);return s.set(t,e),s})},[]),tl=y(t=>e=>{e.preventDefault();let{direction:i,panels:s,sizes:l}=$.current,n=H(s),[r,h]=K(d,t,n);if(null==r||null==h)return;let a=function(t,e,i,s,l,n,r){let{dragOffset:h=0,dragHandleRect:a,sizes:o}=r||{};if("keydown"!==t.type)return U(t,i,l,h,a);{let r="horizontal"===l,h=I(e).getBoundingClientRect(),a=r?h.width:h.height,u=a/(t.shiftKey?10:100),c=0;switch(t.key){case"ArrowDown":c=r?0:u;break;case"ArrowLeft":c=r?-u:0;break;case"ArrowRight":c=r?u:0;break;case"ArrowUp":c=r?0:-u;break;case"End":c=a;break;case"Home":c=-a}let[d,f]=K(e,i,s),m=c<0?d:f,p=s.findIndex(t=>t.current.id===m),g=s[p];if(g.current.collapsible){let t=(o||n)[p];(0===t||t.toPrecision(10)===g.current.minSize.toPrecision(10))&&(c=c<0?-g.current.minSize*a:g.current.minSize*a)}return c}}(e,d,t,n,i,l,b.current);if(0===a)return;let o=I(d).getBoundingClientRect(),u="horizontal"===i;"rtl"===document.dir&&u&&(a=-a);let c=a/(u?o.width:o.height)*100,f=V(e,$.current,r,h,c,l,j.current,b.current),m=!G(l,f);if((J(e)||Q(e))&&E.current!=c&&(m?te(u?"horizontal":"vertical"):u?te(a<0?"horizontal-min":"horizontal-max"):te(a<0?"vertical-min":"vertical-max")),m){let t=w.current;C(f),T(n,f,t)}E.current=c},[d]),tr=y(t=>{g(e=>{if(!e.has(t))return e;let i=new Map(e);return i.delete(t),i})},[]),th=y(t=>{let{panels:e,sizes:i}=$.current,s=e.get(t);if(null==s)return;let{collapsedSize:l,collapsible:n}=s.current;if(!n)return;let r=H(e),h=r.indexOf(s);if(h<0)return;let a=i[h];if(a===l)return;j.current.set(t,a);let[o,u]=W(t,r);if(null==o||null==u)return;let c=h===r.length-1?a:l-a,d=V(null,$.current,o,u,c,i,j.current,null);if(i!==d){let t=w.current;C(d),T(r,d,t)}},[]),ta=y(t=>{let{panels:e,sizes:i}=$.current,s=e.get(t);if(null==s)return;let{collapsedSize:l,minSize:n}=s.current,r=j.current.get(t)||n;if(!r)return;let h=H(e),a=h.indexOf(s);if(a<0||i[a]!==l)return;let[o,u]=W(t,h);if(null==o||null==u)return;let c=a===h.length-1,d=V(null,$.current,o,u,c?l-r:r,i,j.current,null);if(i!==d){let t=w.current;C(d),T(h,d,t)}},[]),to=y((t,e,i)=>{let{id:s,panels:l,sizes:n,units:r}=$.current;"pixels"===(i||r)&&(e=e/D(s)*100);let h=l.get(t);if(null==h)return;let{collapsedSize:a,collapsible:o,maxSize:u,minSize:c}=h.current;if("pixels"===r){let t=D(s);c=c/t*100,null!=u&&(u=u/t*100)}let d=H(l),f=d.indexOf(h);if(f<0)return;let m=n[f];if(m===e)return;o&&e===a||(e=Math.min(null!=u?u:100,Math.max(c,e)));let[p,g]=W(t,d);if(null==p||null==g)return;let v=f===d.length-1?m-e:e-m,b=V(null,$.current,p,g,v,n,j.current,null);if(n!==b){let t=w.current;C(b),T(d,b,t)}},[]),tu=_(()=>({activeHandleId:f,collapsePanel:th,direction:s,expandPanel:ta,getPanelSize:R,getPanelStyle:F,groupId:d,registerPanel:tt,registerResizeHandle:tl,resizePanel:to,startDragging:(t,e)=>{m(t),(J(e)||Q(e))&&(b.current={dragHandleRect:O(t).getBoundingClientRect(),dragOffset:U(e,t,s),sizes:$.current.sizes})},stopDragging:()=>{null!==Z&&(document.head.removeChild(Z),Y=null,Z=null),m(null),b.current=null},units:c,unregisterPanel:tr}),[f,th,s,ta,R,F,d,tt,tl,to,c,tr]);return v(P.Provider,{children:v(u,{children:e,className:i,"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":d,"data-panel-group-units":c,style:{display:"flex",flexDirection:"horizontal"===s?"row":"column",height:"100%",overflow:"hidden",width:"100%",...o}}),value:tu})}let th=x((t,e)=>v(tr,{...t,forwardedRef:e}));function ta({children:t=null,className:e="",disabled:i=!1,id:s=null,onDragging:l,style:n={},tagName:r="div"}){let h=N(null),a=N({onDragging:l});S(()=>{a.current.onDragging=l});let o=w(P);if(null===o)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{activeHandleId:u,direction:c,groupId:d,registerResizeHandle:f,startDragging:m,stopDragging:p}=o,g=L(s),b=u===g,[x,M]=k(!1),[z,_]=k(null),C=y(()=>{h.current.blur(),p();let{onDragging:t}=a.current;t&&t(!1)},[p]);S(()=>{if(i)_(null);else{let t=f(g);_(()=>t)}},[i,g,f]),S(()=>{if(i||null==z||!b)return;let t=t=>{z(t)},e=t=>{z(t)},s=h.current.ownerDocument;return s.body.addEventListener("contextmenu",C),s.body.addEventListener("mousemove",t),s.body.addEventListener("touchmove",t),s.body.addEventListener("mouseleave",e),window.addEventListener("mouseup",C),window.addEventListener("touchend",C),()=>{s.body.removeEventListener("contextmenu",C),s.body.removeEventListener("mousemove",t),s.body.removeEventListener("touchmove",t),s.body.removeEventListener("mouseleave",e),window.removeEventListener("mouseup",C),window.removeEventListener("touchend",C)}},[c,i,b,z,C]),function({disabled:t,handleId:e,resizeHandler:i}){S(()=>{if(t||null==i)return;let s=O(e);if(null==s)return;let l=t=>{if(!t.defaultPrevented)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":t.preventDefault(),i(t);break;case"F6":{t.preventDefault();let i=F(),s=F().findIndex(t=>t.getAttribute("data-panel-resize-handle-id")===e)??null;q(null!==s);let l=t.shiftKey?s>0?s-1:i.length-1:s+1<i.length?s+1:0;i[l].focus()}}};return s.addEventListener("keydown",l),()=>{s.removeEventListener("keydown",l)}},[t,e,i])}({disabled:i,handleId:g,resizeHandler:z});let j={cursor:tt(c),touchAction:"none",userSelect:"none"};return v(r,{children:t,className:e,"data-resize-handle-active":b?"pointer":x?"keyboard":void 0,"data-panel-group-direction":c,"data-panel-group-id":d,"data-panel-resize-handle-enabled":!i,"data-panel-resize-handle-id":g,onBlur:()=>M(!1),onFocus:()=>M(!0),onMouseDown:t=>{m(g,t.nativeEvent);let{onDragging:e}=a.current;e&&e(!0)},onMouseUp:C,onTouchCancel:C,onTouchEnd:C,onTouchStart:t=>{m(g,t.nativeEvent);let{onDragging:e}=a.current;e&&e(!0)},ref:h,role:"separator",style:{...j,...n},tabIndex:0})}tr.displayName="PanelGroup",th.displayName="forwardRef(PanelGroup)",ta.displayName="PanelResizeHandle";var to=i(59734),tu=i(11650),tc=i(46257),td=i(95834),tf=i(80880),tm=i(267);class tp extends p.Component{getSnapshotBeforeUpdate(t){let e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){let t=e.offsetParent,i=(0,tf.s)(t)&&t.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tg({children:t,isPresent:e,anchorX:i,root:s}){let l=(0,p.useId)(),n=(0,p.useRef)(null),r=(0,p.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,p.useContext)(tm.Q);return(0,p.useInsertionEffect)(()=>{let{width:t,height:a,top:o,left:u,right:c}=r.current;if(e||!n.current||!t||!a)return;let d="left"===i?`left: ${u}`:`right: ${c}`;n.current.dataset.motionPopId=l;let f=document.createElement("style");h&&(f.nonce=h);let m=s??document.head;return m.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${t}px !important;
            height: ${a}px !important;
            ${d}px !important;
            top: ${o}px !important;
          }
        `),()=>{m.removeChild(f),m.contains(f)&&m.removeChild(f)}},[e]),(0,m.jsx)(tp,{isPresent:e,childRef:n,sizeRef:r,children:p.cloneElement(t,{ref:n})})}let tv=({children:t,initial:e,isPresent:i,onExitComplete:s,custom:l,presenceAffectsLayout:n,mode:r,anchorX:h,root:a})=>{let o=(0,tu.M)(tb),u=(0,p.useId)(),c=!0,d=(0,p.useMemo)(()=>(c=!1,{id:u,initial:e,isPresent:i,custom:l,onExitComplete:t=>{for(let e of(o.set(t,!0),o.values()))if(!e)return;s&&s()},register:t=>(o.set(t,!1),()=>o.delete(t))}),[i,o,s]);return n&&c&&(d={...d}),(0,p.useMemo)(()=>{o.forEach((t,e)=>o.set(e,!1))},[i]),p.useEffect(()=>{i||o.size||!s||s()},[i]),"popLayout"===r&&(t=(0,m.jsx)(tg,{isPresent:i,anchorX:h,root:a,children:t})),(0,m.jsx)(td.t.Provider,{value:d,children:t})};function tb(){return new Map}var tx=i(50945);let ty=t=>t.key||"";function tw(t){let e=[];return p.Children.forEach(t,t=>{(0,p.isValidElement)(t)&&e.push(t)}),e}let tS=({children:t,custom:e,initial:i=!0,onExitComplete:s,presenceAffectsLayout:l=!0,mode:n="sync",propagate:r=!1,anchorX:h="left",root:a})=>{let[o,u]=(0,tx.xQ)(r),c=(0,p.useMemo)(()=>tw(t),[t]),d=r&&!o?[]:c.map(ty),f=(0,p.useRef)(!0),g=(0,p.useRef)(c),v=(0,tu.M)(()=>new Map),[b,x]=(0,p.useState)(c),[y,w]=(0,p.useState)(c);(0,tc.E)(()=>{f.current=!1,g.current=c;for(let t=0;t<y.length;t++){let e=ty(y[t]);d.includes(e)?v.delete(e):!0!==v.get(e)&&v.set(e,!1)}},[y,d.length,d.join("-")]);let S=[];if(c!==b){let t=[...c];for(let e=0;e<y.length;e++){let i=y[e],s=ty(i);d.includes(s)||(t.splice(e,0,i),S.push(i))}return"wait"===n&&S.length&&(t=S),w(tw(t)),x(c),null}let{forceRender:M}=(0,p.useContext)(to.L);return(0,m.jsx)(m.Fragment,{children:y.map(t=>{let p=ty(t),b=(!r||!!o)&&(c===y||d.includes(p));return(0,m.jsx)(tv,{isPresent:b,initial:(!f.current||!!i)&&void 0,custom:e,presenceAffectsLayout:l,mode:n,root:a,onExitComplete:b?void 0:()=>{if(!v.has(p))return;v.set(p,!0);let t=!0;v.forEach(e=>{e||(t=!1)}),t&&(M?.(),w(g.current),r&&u?.(),s&&s())},anchorX:h,children:t},p)})})};var tM=i(29697);let tz=(0,tM.A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),t_=(0,tM.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tN=(0,tM.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),tk=(0,tM.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tC(){for(var t,e,i=0,s="",l=arguments.length;i<l;i++)(t=arguments[i])&&(e=function t(e){var i,s,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(i=0;i<n;i++)e[i]&&(s=t(e[i]))&&(l&&(l+=" "),l+=s)}else for(s in e)e[s]&&(l&&(l+=" "),l+=s);return l}(t))&&(s&&(s+=" "),s+=e);return s}function tj({size:t="medium",variant:e="circular",className:i="",overlay:s=!1}){return"circular"===e?(0,m.jsx)("div",{className:tC("flex items-center justify-center",s&&"fixed inset-0 glass-modal z-50",i),children:(0,m.jsx)(g.P.div,{className:tC("border-2 border-destock-primary/20 border-t-destock-primary rounded-full",{small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t]),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):"dots"===e?(0,m.jsx)("div",{className:tC("flex items-center justify-center space-x-1",s&&"fixed inset-0 glass-modal z-50",i),children:[0,1,2].map(t=>(0,m.jsx)(g.P.div,{className:"w-2 h-2 bg-destock-primary rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2*t}},t))}):"bars"===e?(0,m.jsx)("div",{className:tC("flex items-center justify-center space-x-1",s&&"fixed inset-0 glass-modal z-50",i),children:[0,1,2,3].map(e=>(0,m.jsx)(g.P.div,{className:"w-1 bg-destock-primary rounded-full",style:{height:"small"===t?16:"medium"===t?24:32},animate:{scaleY:[1,2,1]},transition:{duration:1,repeat:1/0,delay:.1*e}},e))}):null}function tE({title:t,id:e,children:i,className:s="",isCollapsed:l=!1,isLoading:n=!1,error:r,onToggle:h,onClose:a,onSettings:o,showControls:u=!0,draggable:c=!0,resizable:d=!0,size:f="medium"}){let[v,b]=(0,p.useState)(!1),x=(t,e)=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),e())};return(0,m.jsxs)(g.P.div,{className:tC("glass-card widget-enter",{small:"min-h-[200px]",medium:"min-h-[300px]",large:"min-h-[400px]",full:"h-full"}[f],s),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),layout:!0,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:300,damping:20},role:"region","aria-labelledby":`widget-${e}-title`,children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/10 dark:border-black/10",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&(0,m.jsx)(g.P.div,{className:"cursor-grab text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,m.jsx)(tz,{className:"w-4 h-4"})}),(0,m.jsx)("h3",{id:`widget-${e}-title`,className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t})]}),u&&(0,m.jsx)(tS,{children:(v||l)&&(0,m.jsxs)(g.P.div,{className:"flex items-center space-x-1",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:[o&&(0,m.jsx)(g.P.button,{onClick:o,onKeyDown:t=>x(t,o),className:"p-1 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":`Settings for ${t}`,children:(0,m.jsx)(t_,{className:"w-4 h-4"})}),h&&(0,m.jsx)(g.P.button,{onClick:h,onKeyDown:t=>x(t,h),className:"p-1 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":l?`Expand ${t}`:`Collapse ${t}`,children:(0,m.jsx)(tN,{className:"w-4 h-4"})}),a&&(0,m.jsx)(g.P.button,{onClick:a,onKeyDown:t=>x(t,a),className:"p-1 rounded-md text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":`Close ${t}`,children:(0,m.jsx)(tk,{className:"w-4 h-4"})})]})})]}),(0,m.jsx)(tS,{mode:"wait",children:!l&&(0,m.jsx)(g.P.div,{className:"p-4 h-full overflow-auto custom-scrollbar",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},children:r?(0,m.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-red-500 dark:text-red-400 text-sm font-medium mb-2",children:"Error loading widget"}),(0,m.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:r})]})}):n?(0,m.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,m.jsx)(tj,{})}):i})}),d&&!l&&(0,m.jsx)("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize opacity-0 hover:opacity-100 transition-opacity duration-200",children:(0,m.jsx)("div",{className:"w-full h-full bg-gray-400 dark:bg-gray-600 transform rotate-45 translate-x-2 translate-y-2"})})]})}function tL({widgets:t,layout:e="grid",className:i=""}){let[s,l]=(0,p.useState)(!1),[n,r]=(0,p.useState)(0),[h,a]=(0,p.useState)(new Set),o=t=>{let e=new Set(h);e.has(t)?e.delete(t):e.add(t),a(e)};return s||"tabs"===e?(0,m.jsxs)("div",{className:`space-y-4 ${i}`,children:[(0,m.jsx)("div",{className:"flex space-x-1 glass-card p-1 rounded-lg",children:t.map((t,e)=>(0,m.jsx)(g.P.button,{onClick:()=>r(e),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${n===e?"bg-destock-primary text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,whileTap:{scale:.98},children:t.title},t.id))}),(0,m.jsx)(g.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(0,m.jsx)(tE,{title:t[n].title,id:t[n].id,onToggle:()=>o(t[n].id),isCollapsed:h.has(t[n].id),showControls:!1,children:t[n].component})},n)]}):(0,m.jsx)(g.P.div,{className:`h-[calc(100vh-200px)] ${i}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:(0,m.jsx)(th,{direction:"horizontal",className:"space-x-4",children:t.map((e,i)=>(0,m.jsxs)(R,{defaultSize:e.defaultSize||50,minSize:e.minSize||20,collapsible:e.collapsible,children:[(0,m.jsx)(g.P.div,{className:"h-full",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1*i,duration:.3},children:(0,m.jsx)(tE,{title:e.title,id:e.id,onToggle:()=>o(e.id),isCollapsed:h.has(e.id),className:"h-full",children:!h.has(e.id)&&e.component})}),i<t.length-1&&(0,m.jsx)(ta,{className:"w-4 flex items-center justify-center",children:(0,m.jsx)("div",{className:"w-1 h-8 bg-gray-300 dark:bg-gray-600 rounded-full hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors duration-200"})})]},e.id))})})}var tP=i(85626),t$=i(85519),tR=i(67201),tV=i(77295),tT=i(16818),tW=i(38049);let tD=(0,tM.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),tB=(0,tM.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),tI=(0,tM.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),tO=(0,tM.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),tF=(0,tM.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var tA=i(28360),tK=i(43446),tH=i(13272);function tX(t){return"number"==typeof t?t:parseFloat(t)}var tq=i(30281);function tG(t){let e=(0,tu.M)(()=>(0,tq.OQ)(t)),{isStatic:i}=(0,p.useContext)(tm.Q);if(i){let[,i]=(0,p.useState)(t);(0,p.useEffect)(()=>e.on("change",i),[])}return e}var tU=i(82756);function tJ(t,e){let i=tG(e()),s=()=>i.set(e());return s(),(0,tc.E)(()=>{let e=()=>tH.Gt.preRender(s,!1,!0),i=t.map(t=>t.on("change",e));return()=>{i.forEach(t=>t()),(0,tH.WG)(s)}}),i}function tQ(t,e,i,s){if("function"==typeof t){tq.bt.current=[],t();let e=tJ(tq.bt.current,t);return tq.bt.current=void 0,e}let l="function"==typeof e?e:function(...t){let e=!Array.isArray(t[0]),i=e?0:-1,s=t[0+i],l=t[1+i],n=t[2+i],r=t[3+i],h=(0,tU.G)(l,n,r);return e?h(s):h}(e,i,s);return Array.isArray(t)?tY(t,l):tY([t],([t])=>l(t))}function tY(t,e){let i=(0,tu.M)(()=>[]);return tJ(t,()=>{i.length=0;let s=t.length;for(let e=0;e<s;e++)i[e]=t[e].get();return e(i)})}function tZ({value:t,format:e="decimal",decimals:i=2,prefix:s="",suffix:l="",duration:n=.5,className:r="",colorChange:h=!1,previousValue:a}){let[o,u]=(0,p.useState)(t),[c,d]=(0,p.useState)(!1),f=function(t,e={}){let{isStatic:i}=(0,p.useContext)(tm.Q),s=()=>(0,tA.S)(t)?t.get():t;if(i)return tQ(s);let l=tG(s());return(0,p.useInsertionEffect)(()=>(function(t,e,i){let s,l,n=t.get(),r=null,h=n,a="string"==typeof n?n.replace(/[\d.-]/g,""):void 0,o=()=>{r&&(r.stop(),r=null)},u=()=>{o(),r=new tK.s({keyframes:[tX(t.get()),tX(h)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:s})};return t.attach((e,i)=>(h=e,s=t=>{var e,s;return i((e=t,(s=a)?e+s:e))},tH.Gt.postRender(u),t.get()),o),(0,tA.S)(e)&&(l=e.on("change",e=>{var i,s;return t.set((i=e,(s=a)?i+s:i))}),t.on("destroy",l)),l})(l,t,e),[l,JSON.stringify(e)]),l}(t,{stiffness:100,damping:15}),v=tQ(f,t=>{let n;switch(e){case"currency":n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:i,maximumFractionDigits:i}).format(t);break;case"percentage":n=`${t.toFixed(i)}%`;break;case"integer":n=Math.round(t).toLocaleString();break;default:n=t.toFixed(i)}return`${s}${n}${l}`});return(0,m.jsx)(g.P.span,{className:`number-counter ${!h||void 0===a?"":t>a?"text-success":t<a?"text-danger":""} ${r}`,animate:c?{scale:[1,1.05,1]}:{},transition:{type:"tween",duration:.3,ease:"easeInOut"},"aria-live":"polite",children:v})}let t0=tR.Ik({companyId:tR.Yj().min(1,"Please select a company"),amount:tR.Yj().min(1,"Amount is required")});function t1(){let{isConnected:t}=(0,tW.F)(),{buyShares:e,sellShares:i,getSharePrice:s,getShareBalance:l,nextCompanyId:n,isPending:r,isConfirming:h,isConfirmed:a,error:o}=(0,tV.P)(),{balance:u}=(0,tT.O)(),[c,d]=(0,p.useState)([]),[f,v]=(0,p.useState)(null),[b,x]=(0,p.useState)("buy"),[y,w]=(0,p.useState)("0"),[S,M]=(0,p.useState)(!1),[z,_]=(0,p.useState)(!1),{register:N,handleSubmit:k,formState:{errors:C},watch:j,setValue:E,reset:L}=(0,tP.mN)({resolver:(0,t$.u)(t0)});j("companyId");let P=j("amount"),$=()=>f&&P?(parseFloat(f.price)*parseFloat(P)).toFixed(2):"0",R=async t=>{if(f){M(!0);try{"buy"===b?await e(f.id,t.amount):await i(f.id,t.amount),L()}catch(t){console.error("Trade failed:",t)}finally{M(!1)}}},V=()=>{if(!f||!P)return!1;let t=parseFloat(P);if(t<=0)return!1;if("buy"!==b)return parseFloat(y)>=t;{let t=parseFloat($());return parseFloat(u)>=t}};return t?z?(0,m.jsxs)(g.P.div,{className:"glass-card p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},suppressHydrationWarning:!0,children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)(g.P.h3,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:"Trade Shares"}),(0,m.jsxs)(g.P.div,{className:"flex glass-button rounded-lg p-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,m.jsx)(g.P.button,{onClick:()=>x("buy"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${"buy"===b?"bg-success text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,whileTap:{scale:.95},children:(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(tB,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Buy"})]})}),(0,m.jsx)(g.P.button,{onClick:()=>x("sell"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${"sell"===b?"bg-danger text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,whileTap:{scale:.95},children:(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(tI,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Sell"})]})})]})]}),(0,m.jsxs)(g.P.form,{onSubmit:k(R),className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,m.jsxs)(g.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,m.jsx)("label",{className:"destock-label",htmlFor:"companyId",children:"Select Company"}),(0,m.jsxs)("select",{...N("companyId"),id:"companyId",className:"destock-input",children:[(0,m.jsx)("option",{value:"",children:"Choose a company"}),c.map(t=>(0,m.jsxs)("option",{value:t.id.toString(),children:[t.name," - ",t.price," DSTK"]},t.id))]}),(0,m.jsx)(tS,{children:C.companyId&&(0,m.jsxs)(g.P.p,{className:"mt-1 text-sm text-danger flex items-center space-x-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,m.jsx)(tO,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:C.companyId.message})]})})]}),(0,m.jsx)(tS,{children:f&&(0,m.jsxs)(g.P.div,{className:"glass-card p-4",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",stiffness:300,damping:25},children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,m.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:f.name}),(0,m.jsx)(g.P.span,{className:"text-lg font-bold text-destock-primary",initial:{scale:1.2,color:"#10B981"},animate:{scale:1,color:"#3B82F6"},transition:{duration:.3},children:(0,m.jsx)(tZ,{value:parseFloat(f.price),suffix:" DSTK",decimals:2})},f.price)]}),(0,m.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center justify-between",children:[(0,m.jsx)("span",{children:"Your Holdings:"}),(0,m.jsx)(tZ,{value:parseFloat(y),suffix:" shares",decimals:0,className:"font-medium"})]})]})}),(0,m.jsxs)(g.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,m.jsx)("label",{className:"destock-label",htmlFor:"amount",children:"Amount"}),(0,m.jsx)("input",{...N("amount"),type:"number",step:"1",min:"1",id:"amount",className:"destock-input",placeholder:"Number of shares"}),(0,m.jsx)(tS,{children:C.amount&&(0,m.jsxs)(g.P.p,{className:"mt-1 text-sm text-danger flex items-center space-x-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,m.jsx)(tO,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:C.amount.message})]})})]}),(0,m.jsx)(tS,{children:f&&P&&(0,m.jsxs)(g.P.div,{className:"glass-card p-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:300,damping:25},children:[(0,m.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center space-x-2",children:[(0,m.jsx)(tF,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Transaction Summary"})]}),(0,m.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{children:"Shares:"}),(0,m.jsx)("span",{className:"font-medium",children:P})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{children:"Price per share:"}),(0,m.jsxs)("span",{className:"font-medium",children:[f.price," DSTK"]})]}),(0,m.jsxs)("div",{className:"flex justify-between font-semibold border-t border-white/10 dark:border-black/10 pt-2 text-gray-900 dark:text-gray-100",children:[(0,m.jsxs)("span",{children:["Total ","buy"===b?"Cost":"Proceeds",":"]}),(0,m.jsx)(tZ,{value:parseFloat($()),suffix:" DSTK",decimals:2,className:"buy"===b?"text-danger":"text-success"})]})]}),"buy"===b&&(0,m.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between",children:[(0,m.jsx)("span",{children:"Your DSTK Balance:"}),(0,m.jsx)(tZ,{value:parseFloat(u||"0"),suffix:" DSTK",decimals:2,className:"font-medium"})]})]})}),(0,m.jsx)(tS,{children:o&&(0,m.jsx)(g.P.div,{className:"glass-card p-4 border border-danger/30 bg-danger/10",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:(0,m.jsxs)("p",{className:"text-sm text-danger flex items-center space-x-2",children:[(0,m.jsx)(tO,{className:"w-4 h-4"}),(0,m.jsxs)("span",{children:["Transaction failed: ",o.message]})]})})}),(0,m.jsxs)(g.P.button,{type:"submit",disabled:!V()||r||h||S,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-md font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${"buy"===b?"bg-success hover:bg-success/80 text-white shadow-lg":"bg-danger hover:bg-danger/80 text-white shadow-lg"}`,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[r||h||S?(0,m.jsx)(tj,{size:"small"}):"buy"===b?(0,m.jsx)(tB,{className:"w-5 h-5"}):(0,m.jsx)(tI,{className:"w-5 h-5"}),(0,m.jsx)("span",{children:r||h||S?"Processing...":V()?`${"buy"===b?"Buy":"Sell"} Shares`:"buy"===b?"Insufficient Balance":"Insufficient Shares"})]}),(0,m.jsx)(tS,{children:a&&(0,m.jsx)(g.P.div,{className:"glass-card p-4 border border-success/30 bg-success/10",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",stiffness:300,damping:25},children:(0,m.jsxs)("p",{className:"text-sm text-success flex items-center space-x-2",children:[(0,m.jsx)(tB,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Transaction completed successfully! \uD83C\uDF89"})]})})})]})]}):(0,m.jsxs)("div",{className:"trading-card text-center",children:[(0,m.jsx)(tD,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Trade Shares"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading trading interface..."})]}):(0,m.jsxs)("div",{className:"trading-card text-center",children:[(0,m.jsx)(tD,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Connect Your Wallet"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to start trading shares."})]})}var t2=i(2984),t5=i(49989),t3=i.n(t5);let t4=(0,tM.A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);function t6(){let{isConnected:t}=(0,tW.F)(),{nextCompanyId:e,getCompany:i,getSharePrice:s}=(0,tV.P)(),l=(0,t2.useRouter)(),[n,r]=(0,p.useState)([]),[h,a]=(0,p.useState)(!1),[o,u]=(0,p.useState)(""),[c,d]=(0,p.useState)("marketCap"),[f,v]=(0,p.useState)("desc"),[b,x]=(0,p.useState)(""),y=t=>{c===t?v("asc"===f?"desc":"asc"):(d(t),v("desc"))},w=n.filter(t=>{let e=t.name.toLowerCase().includes(o.toLowerCase())||t.symbol&&t.symbol.toLowerCase().includes(o.toLowerCase()),i=!b||t.sector===b;return e&&i}).sort((t,e)=>{let i,s;switch(c){case"name":i=t.name,s=e.name;break;case"currentPrice":i=parseFloat(t.currentPrice||"0"),s=parseFloat(e.currentPrice||"0");break;case"change":i=t.change||0,s=e.change||0;break;case"volume":i=t.volume||0,s=e.volume||0;break;case"marketCap":i=t.marketCap||0,s=e.marketCap||0;break;default:return 0}return"string"==typeof i?"asc"===f?i.localeCompare(s):s.localeCompare(i):"asc"===f?i-s:s-i}),S=Array.from(new Set(n.map(t=>t.sector).filter(Boolean))),M=t=>`${t.slice(0,6)}...${t.slice(-4)}`,z=t=>t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();return t?h?(0,m.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((t,e)=>(0,m.jsx)("div",{className:"destock-card animate-pulse",children:(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,m.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,m.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})},e))}):0===n.length?(0,m.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,m.jsx)(t4,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Companies Listed"}),(0,m.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to register your company on DeStock!"}),(0,m.jsx)(t3(),{href:"/register",className:"destock-button-primary inline-flex items-center",children:"Register Company"})]}):(0,m.jsxs)(g.P.div,{className:"glass-card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,m.jsx)("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Market Overview"}),(0,m.jsx)(g.P.div,{className:"mb-6 space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,m.jsxs)("div",{className:"relative flex-1",children:[(0,m.jsx)("input",{type:"text",placeholder:"Search companies or symbols...",value:o,onChange:t=>u(t.target.value),className:"w-full p-3 pl-10 rounded-xl bg-gray-800/50 border border-gray-700/50  text-white placeholder-gray-400 focus:outline-none focus:ring-2  focus:ring-blue-500/50 transition-all duration-200"}),(0,m.jsx)("svg",{className:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,m.jsxs)("select",{value:b,onChange:t=>x(t.target.value),className:"p-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white  focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-200",children:[(0,m.jsx)("option",{value:"",children:"All Sectors"}),S.map(t=>(0,m.jsx)("option",{value:t,children:t},t))]})]})}),(0,m.jsx)(g.P.div,{className:"overflow-x-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:(0,m.jsxs)("table",{className:"w-full",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"border-b border-gray-700/50",children:[[{key:"name",label:"Company"},{key:"currentPrice",label:"Price"},{key:"change",label:"Change (24h)"},{key:"volume",label:"Volume"},{key:"marketCap",label:"Market Cap"}].map(({key:t,label:e})=>(0,m.jsx)("th",{className:"text-left py-4 px-4 text-gray-300 font-medium cursor-pointer  hover:text-white transition-colors duration-200",onClick:()=>y(t),children:(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)("span",{children:e}),c===t&&(0,m.jsx)("svg",{className:`w-4 h-4 transition-transform duration-200 ${"desc"===f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},t)),(0,m.jsx)("th",{className:"text-left py-4 px-4 text-gray-300 font-medium",children:"Actions"})]})}),(0,m.jsx)("tbody",{children:w.map((t,e)=>{let i=(t.change||0)>=0?"text-green-400":"text-red-400",s=(t.change||0)>=0?"+":"";return(0,m.jsxs)(g.P.tr,{className:"border-b border-gray-800/30 hover:bg-gray-800/20 transition-colors duration-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*e},whileHover:{scale:1.01},children:[(0,m.jsx)("td",{className:"py-4 px-4",children:(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500  flex items-center justify-center text-white font-bold",children:t.symbol?t.symbol.charAt(0):t.name.charAt(0)}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"font-semibold text-white",children:t.name}),(0,m.jsx)("div",{className:"text-sm text-gray-400",children:t.symbol||M(t.id.toString())})]})]})}),(0,m.jsx)("td",{className:"py-4 px-4",children:(0,m.jsxs)("div",{className:"font-semibold text-white",children:[t.currentPrice," DSTK"]})}),(0,m.jsxs)("td",{className:`py-4 px-4 font-semibold ${i}`,children:[s,t.change?.toFixed(2)||"0.00","%"]}),(0,m.jsx)("td",{className:"py-4 px-4 text-gray-300",children:z(t.volume||0)}),(0,m.jsxs)("td",{className:"py-4 px-4 text-gray-300",children:[z(t.marketCap||0)," DSTK"]}),(0,m.jsx)("td",{className:"py-4 px-4",children:(0,m.jsx)(g.P.button,{onClick:()=>l.push(`/company/${t.id}`),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600  hover:from-blue-700 hover:to-purple-700 rounded-lg  transition-all duration-200 text-sm font-medium text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Trade"})})]},t.id)})})]})}),0===w.length&&(0,m.jsxs)(g.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 text-gray-400",children:[(0,m.jsx)("div",{className:"text-lg font-medium mb-2",children:"No companies found"}),(0,m.jsx)("div",{className:"text-sm",children:o?`No results for "${o}"`:"No companies available"})]})]}):(0,m.jsxs)("div",{className:"destock-card text-center py-8",children:[(0,m.jsx)(t4,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,m.jsx)("p",{className:"text-gray-600",children:"Connect your wallet to view listed companies."})]})}function t9(t){var e=t.width,i=t.height;if(e<0)throw Error("Negative width is not allowed for Size");if(i<0)throw Error("Negative height is not allowed for Size");return{width:e,height:i}}function t8(t,e){return t.width===e.width&&t.height===e.height}i(34562);var t7=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(t){return t!==i})}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}(),et=function(){function t(t,e,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=t9({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null==(s=null==i?void 0:i.allowResizeObserver)||s,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw Error("Object is disposed");null==(t=this._canvasElementResizeObserver)||t.disconnect(),this._canvasElementResizeObserver=null,null==(e=this._devicePixelRatioObservable)||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return t9({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=t9(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;t8(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=t9(this._transformBitmapSize(t,this._canvasElementClientSize)),s=t8(this.bitmapSize,i)?null:i;(null!==e||null!==s)&&(null!==e&&null!==s&&t8(e,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(e,s)))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver)return void this._initDevicePixelRatioObservable();new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(t){return"devicePixelContentBoxSize"in t})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=ee(this._canvasElement);if(null===e)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new t7(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var t,e,i=ee(this._canvasElement);if(null!==i){var s,l,n=null!=(e=null==(t=this._devicePixelRatioObservable)?void 0:t.value)?e:i.devicePixelRatio,r=this._canvasElement.getClientRects(),h=void 0!==r[0]?(s=r[0],l=n,t9({width:Math.round(s.left*l+s.width*l)-Math.round(s.left*l),height:Math.round(s.top*l+s.height*l)-Math.round(s.top*l)})):t9({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(h)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(e){return e.target===t._canvasElement});if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var s=i.devicePixelContentBoxSize[0],l=t9({width:s.inlineSize,height:s.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function ee(t){return t.ownerDocument.defaultView}var ei=function(){function t(t,e,i){if(0===e.width||0===e.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function es(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var l=t.canvasElement.getContext("2d",e);return null===l?null:new ei(l,i,s)}let el={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},en={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},er={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},eh={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},ea={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},eo={color:"#26a69a",base:0},eu={color:"#2196f3"},ec={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function ed(t,e){let i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function ef(t,e,i,s){t.beginPath();let l=t.lineWidth%2?.5:0;t.moveTo(i,e+l),t.lineTo(s,e+l),t.stroke()}function em(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))}function ep(t){if(void 0===t)throw Error("Value is undefined");return t}function eg(t){if(null===t)throw Error("Value is null");return t}function ev(t){return eg(ep(t))}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"}(s||(s={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(l||(l={}));let eb={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function ex(t){return t<0?0:t>255?255:Math.round(t)||0}function ey(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}let ew=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,eS=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,eM=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,ez=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function e_(t){(t=t.toLowerCase())in eb&&(t=eb[t]);{let e=ez.exec(t)||eM.exec(t);if(e)return[ex(parseInt(e[1],10)),ex(parseInt(e[2],10)),ex(parseInt(e[3],10)),ey(e.length<5?1:parseFloat(e[4]))]}{let e=eS.exec(t);if(e)return[ex(parseInt(e[1],16)),ex(parseInt(e[2],16)),ex(parseInt(e[3],16)),1]}{let e=ew.exec(t);if(e)return[ex(17*parseInt(e[1],16)),ex(17*parseInt(e[2],16)),ex(17*parseInt(e[3],16)),1]}throw Error(`Cannot parse color: ${t}`)}function eN(t){return .199*t[0]+.687*t[1]+.114*t[2]}function ek(t){let e=e_(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:eN(e)>160?"black":"white"}}class eC{constructor(){this.h=[]}l(t,e,i){this.h.push({o:t,_:e,u:!0===i})}v(t){let e=this.h.findIndex(e=>t===e.o);e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,i){let s=[...this.h];this.h=this.h.filter(t=>!t.u),s.forEach(s=>s.o(t,e,i))}M(){return this.h.length>0}S(){this.h=[]}}function ej(t,...e){for(let i of e)for(let e in i)void 0!==i[e]&&Object.prototype.hasOwnProperty.call(i,e)&&!["__proto__","constructor","prototype"].includes(e)&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:ej(t[e],i[e]));return t}function eE(t){return"number"==typeof t&&isFinite(t)}function eL(t){return"number"==typeof t&&t%1==0}function eP(t){return"string"==typeof t}function e$(t){return"boolean"==typeof t}function eR(t){let e,i,s;if(!t||"object"!=typeof t)return t;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(s=t[i],e[i]=s&&"object"==typeof s?eR(s):s);return e}function eV(t){return null!==t}function eT(t){return null===t?void 0:t}let eW="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function eD(t,e,i){return void 0===e&&(e=eW),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class eB{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=t}W(){let t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=eD(e,i),t.L=2.5/12*e,t.B=t.L,t.A=e/12*t.T,t.I=e/12*t.T,t.N=0),t.V=this.$(),t.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class eI{constructor(){this.Y=[]}Z(t){this.Y=t}X(t,e,i){this.Y.forEach(s=>{s.X(t,e,i)})}}class eO{X(t,e,i){t.useBitmapCoordinateSpace(t=>this.K(t,e,i))}}class eF extends eO{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.G||null===this.G.tt)return;let s=this.G.tt,l=this.G,n=Math.max(1,Math.floor(e))%2/2,r=r=>{t.beginPath();for(let h=s.to-1;h>=s.from;--h){let s=l.it[h],a=Math.round(s.nt*e)+n,o=s.st*i,u=r*i+n;t.moveTo(a,o),t.arc(a,o,u,0,2*Math.PI)}t.fill()};l.et>0&&(t.fillStyle=l.rt,r(l.ht+l.et)),t.fillStyle=l.lt,r(l.ht)}}function eA(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}let eK={from:0,to:1};class eH{constructor(t,e){this.ut=new eI,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.Z(this.ct)}bt(t){let e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(eA),this.ct=this.dt.map(t=>{let e=new eF;return e.J(t),e}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){let t=2===this.vt.W().mode,e=this.F.wt(),i=this.vt.xt(),s=this.F.St();e.forEach((e,l)=>{var n;let r=this.dt[l],h=e.kt(i);if(t||null===h||!e.yt())return void(r.tt=null);let a=eg(e.Ct());r.lt=h.Tt,r.ht=h.ht,r.et=h.Pt,r.it[0]._t=h._t,r.it[0].st=e.Dt().Rt(h._t,a.Vt),r.rt=null!=(n=h.Ot)?n:this.F.Bt(r.it[0].st/e.Dt().At()),r.it[0].ot=i,r.it[0].nt=s.It(i),r.tt=eK})}}class eX extends eO{constructor(t){super(),this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;let l=this.zt.Lt.yt,n=this.zt.Et.yt;if(!l&&!n)return;let r=Math.round(this.zt.nt*i),h=Math.round(this.zt.st*s);t.lineCap="butt",l&&r>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.V,t.fillStyle=this.zt.Lt.V,ed(t,this.zt.Lt.Nt),function(t,e,i,s){t.beginPath();let l=t.lineWidth%2?.5:0;t.moveTo(e+l,0),t.lineTo(e+l,s),t.stroke()}(t,r,0,e.height)),n&&h>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*s),t.strokeStyle=this.zt.Et.V,t.fillStyle=this.zt.Et.V,ed(t,this.zt.Et.Nt),ef(t,h,0,e.width))}}class eq{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new eX(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let t=this.jt.yt(),e=eg(this.jt.Ht()),i=e.$t().W().crosshair,s=this.Ft;if(2===i.mode)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=t&&this.jt.Ut(e),s.Lt.yt=t&&this.jt.qt(),s.Et.et=i.horzLine.width,s.Et.Nt=i.horzLine.style,s.Et.V=i.horzLine.color,s.Lt.et=i.vertLine.width,s.Lt.Nt=i.vertLine.style,s.Lt.V=i.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Zt()}}function eG(t,e,i,s,l,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,s,l),t.restore()}function eU(t,e,i,s,l,n){t.beginPath(),t.roundRect?t.roundRect(e,i,s,l,n):(t.lineTo(e+s-n[1],i),0!==n[1]&&t.arcTo(e+s,i,e+s,i+n[1],n[1]),t.lineTo(e+s,i+l-n[2]),0!==n[2]&&t.arcTo(e+s,i+l,e+s-n[2],i+l,n[2]),t.lineTo(e+n[3],i+l),0!==n[3]&&t.arcTo(e,i+l,e,i+l-n[3],n[3]),t.lineTo(e,i+n[0]),0!==n[0]&&t.arcTo(e,i,e+n[0],i,n[0]))}function eJ(t,e,i,s,l,n,r=0,h=[0,0,0,0],a=""){var o;if(t.save(),!r||!a||a===n)return eU(t,e,i,s,l,h),t.fillStyle=n,t.fill(),void t.restore();let u=r/2;eU(t,e+u,i+u,s-r,l-r,(o=-u,h.map(t=>0===t?t:t+o))),"transparent"!==n&&(t.fillStyle=n,t.fill()),"transparent"!==a&&(t.lineWidth=r,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function eQ(t,e,i,s,l,n,r){t.save(),t.globalCompositeOperation="copy";let h=t.createLinearGradient(0,0,0,l);h.addColorStop(0,n),h.addColorStop(1,r),t.fillStyle=h,t.fillRect(e,i,s,l),t.restore()}class eY{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Xt=e}At(t,e){return this.zt.yt?t.P+t.L+t.B:0}X(t,e,i,s){if(!this.zt.yt||0===this.zt.Kt.length)return;let l=this.zt.V,n=this.Xt.t,r=t.useBitmapCoordinateSpace(t=>{let r=t.context;r.font=e.R;let h=this.Gt(t,e,i,s),a=h.Jt;return h.Qt?eJ(r,a.ti,a.ii,a.ni,a.si,n,a.ei,[a.ht,0,0,a.ht],n):eJ(r,a.ri,a.ii,a.ni,a.si,n,a.ei,[0,a.ht,a.ht,0],n),this.zt.hi&&(r.fillStyle=l,r.fillRect(a.ri,a.li,a.ai-a.ri,a.oi)),this.zt._i&&(r.fillStyle=e.O,r.fillRect(h.Qt?a.ui-a.ei:0,a.ii,a.ei,a.ci-a.ii)),h});t.useMediaCoordinateSpace(({context:t})=>{let i=r.di;t.font=e.R,t.textAlign=r.Qt?"right":"left",t.textBaseline="middle",t.fillStyle=l,t.fillText(this.zt.Kt,i.fi,(i.ii+i.ci)/2+i.pi)})}Gt(t,e,i,s){var l;let n,r,h,{context:a,bitmapSize:o,mediaSize:u,horizontalPixelRatio:c,verticalPixelRatio:d}=t,f=this.zt.hi||!this.zt.mi?e.T:0,m=this.zt.bi?e.C:0,p=e.L+this.Xt.wi,g=e.B+this.Xt.gi,v=e.A,b=e.I,x=this.zt.Kt,y=e.P,w=i.Mi(a,x),S=Math.ceil(i.xi(a,x)),M=e.C+v+b+S+f,z=Math.max(1,Math.floor(d)),_=Math.round((y+p+g)*d);_%2!=z%2&&(_+=1);let N=m>0?Math.max(1,Math.floor(m*c)):0,k=Math.round(M*c),C=Math.round(f*c),j=Math.round((null!=(l=this.Xt.Si)?l:this.Xt.ki)*d)-Math.floor(.5*d),E=Math.floor(j+z/2-_/2),L=E+_,P="right"===s,$=P?u.width-m:m,R=P?o.width-N:N;return P?(n=R-k,r=R-C,h=$-f-v-m):(n=R+k,r=R+C,h=$+f+v),{Qt:P,Jt:{ii:E,li:j,ci:L,ni:k,si:_,ht:2*c,ei:N,ti:n,ri:R,ai:r,oi:z,ui:o.width},di:{ii:E/d,ci:L/d,fi:h,pi:w}}}}class eZ{constructor(t){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(t||eY)(this.Ci,this.yi),this.Ri=new(t||eY)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(t,e=!1){return Math.max(this.Pi.At(t,e),this.Ri.At(t,e))}Vi(){return this.yi.Si||0}Oi(t){this.yi.Si=t}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(t){return this.Di(),this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.hi=this.Ti.hi&&t.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class e0 extends eZ{constructor(t,e,i){super(),this.jt=t,this.Li=e,this.Ei=i}zi(t,e,i){if(t.yt=!1,2===this.jt.W().mode)return;let s=this.jt.W().horzLine;if(!s.labelVisible)return;let l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||null===l)return;let n=ek(s.labelBackgroundColor);i.t=n.t,t.V=n.i;let r=2/12*this.Li.P();i.wi=r,i.gi=r;let h=this.Ei(this.Li);i.ki=h.ki,t.Kt=this.Li.Fi(h._t,l),t.yt=!0}}let e1=/[1-9]/g;class e2{constructor(){this.zt=null}J(t){this.zt=t}X(t,e){if(null===this.zt||!1===this.zt.yt||0===this.zt.Kt.length)return;let i=t.useMediaCoordinateSpace(({context:t})=>(t.font=e.R,Math.round(e.Wi.xi(t,eg(this.zt).Kt,e1))));if(i<=0)return;let s=e.ji,l=i+2*s,n=l/2,r=this.zt.Hi,h=this.zt.ki,a=Math.floor(h-n)+.5;a<0?(h+=Math.abs(0-a),a=Math.floor(h-n)+.5):a+l>r&&(h-=Math.abs(r-(a+l)),a=Math.floor(h-n)+.5);let o=a+l,u=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{let l=eg(this.zt);t.fillStyle=l.t;let n=Math.round(a*i),r=Math.round(0*s),h=Math.round(o*i),c=Math.round(u*s),d=Math.round(2*i);if(t.beginPath(),t.moveTo(n,r),t.lineTo(n,c-d),t.arcTo(n,c,n+d,c,d),t.lineTo(h-d,c),t.arcTo(h,c,h,c-d,d),t.lineTo(h,r),t.fill(),l.hi){let n=Math.round(l.ki*i),h=Math.round((r+e.T)*s);t.fillStyle=l.V;let a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);t.fillRect(n-o,r,a,h-r)}}),t.useMediaCoordinateSpace(({context:t})=>{let i=eg(this.zt),l=0+e.C+e.T+e.L+e.P/2;t.font=e.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.V;let n=e.Wi.Mi(t,"Apr0");t.translate(a+s,l+n),t.fillText(i.Kt,0,0)})}}class e5{constructor(t,e,i){this.ft=!0,this.Wt=new e2,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=t,this.$i=e,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){let t=this.Ft;if(t.yt=!1,2===this.vt.W().mode)return;let e=this.vt.W().vertLine;if(!e.labelVisible)return;let i=this.$i.St();if(i.Ni())return;t.Hi=i.Hi();let s=this.Ei();if(null===s)return;t.ki=s.ki;let l=i.Ui(this.vt.xt());t.Kt=i.qi(eg(l)),t.yt=!0;let n=ek(e.labelBackgroundColor);t.t=n.t,t.V=n.i,t.hi=i.W().ticksVisible}}class e3{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(t){this.Zi=t}Dt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}yt(){return!0}}!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(n||(n={}));class e4 extends e3{constructor(t,e){let i,s,l,n;super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=t,this.cn=e,this.dn=new eH(t,this),this.fn=(i=()=>this.nn,s=()=>this.an,t=>{let e=s(),l=i();if(t===eg(this.tn).vn())return{_t:l,ki:e};{let i=eg(t.Ct());return{_t:t.pn(e,i),ki:e}}});let r=(l=()=>this.sn,n=()=>this.Yt(),()=>{let t=this.$i.St().mn(l()),e=n();return t&&Number.isFinite(e)?{ot:t,ki:e}:null});this.bn=new e5(this,t,r),this.wn=new eq(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(t){return null!==this.tn?[this.wn,this.dn]:[]}Ut(t){return t===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(t,e){this.en&&this.tn===t||this.rn.clear();let i=[];return this.tn===t&&i.push(this.Dn(this.rn,e,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(t=>t.bt()),this.bn.bt(),this.dn.bt()}On(t){return t&&!t.vn().Ni()?t.vn():null}yn(t,e,i){this.Bn(t,e,i)&&this.Vn()}Bn(t,e,i){let s=this.ln,l=this.an,n=this.nn,r=this.sn,h=this.tn,a=this.On(i);this.sn=t,this.ln=isNaN(t)?NaN:this.$i.St().It(t),this.tn=i;let o=null!==a?a.Ct():null;return null!==a&&null!==o?(this.nn=e,this.an=a.Rt(e,o)):(this.nn=NaN,this.an=NaN),s!==this.ln||l!==this.an||r!==this.sn||n!==this.nn||h!==this.tn}Tn(){let t=this.$i.wt().map(t=>t.In().An()).filter(eV),e=0===t.length?null:Math.max(...t);this.sn=null!==e?e:NaN}Dn(t,e,i){let s=t.get(e);return void 0===s&&(s=new e0(this,e,i),t.set(e,s)),s}}function e6(t){return"left"===t||"right"===t}class e9{constructor(t){this.zn=new Map,this.Ln=[],this.En=t}Nn(t,e){var i;let s=(i=this.zn.get(t),void 0===i?e:{Fn:Math.max(i.Fn,e.Fn),Wn:i.Wn||e.Wn});this.zn.set(t,s)}jn(){return this.En}Hn(t){let e=this.zn.get(t);return void 0===e?{Fn:this.En}:{Fn:Math.max(this.En,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(t){this.Un(),this.Ln=[{qn:1,Vt:t}]}Zn(t){this.Xn(),this.Ln.push({qn:5,Vt:t})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(t){this.Un(),this.Ln.push({qn:2,Vt:t})}Jn(t){this.Un(),this.Ln.push({qn:3,Vt:t})}Qn(){return this.Ln}ts(t){for(let e of t.Ln)this.ns(e);this.En=Math.max(this.En,t.En),t.zn.forEach((t,e)=>{this.Nn(e,t)})}static ss(){return new e9(2)}static es(){return new e9(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Kn();break;case 5:this.Zn(t.Vt);break;case 6:this.Xn()}}Xn(){let t=this.Ln.findIndex(t=>5===t.qn);-1!==t&&this.Ln.splice(t,1)}}function e8(t,e){if(!eE(t))return"n/a";if(!eL(e)||e<0||e>16)throw TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class e7{constructor(t,e){if(e||(e=1),eE(t)&&eL(t)||(t=100),t<0)throw TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){let e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this._s++}}ls(t){let e=this.Li/this.rs,i=Math.floor(t),s="",l=void 0!==this._s?this._s:NaN;if(e>1){let n=+(Math.round(t*e)-i*e).toFixed(this._s);n>=e&&(n-=e,i+=1),s="."+e8(n.toFixed(this._s)*this.rs,l)}else i=Math.round(i*e)/e,l>0&&(s="."+e8(0,l));return i.toFixed(0)+s}}class it extends e7{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class ie{constructor(t){this.us=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.cs(t):t<999995?e+this.cs(t/1e3)+"K":t<0x3b9ac9fb?(t=1e3*Math.round(t/1e3),e+this.cs(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.cs(t/1e9)+"B")}cs(t){let e=Math.pow(10,this.us);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.us).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(t,e)=>e)}}function ii(t,e,i,s,l,n,r){if(0===e.length||s.from>=e.length||s.to<=0)return;let{context:h,horizontalPixelRatio:a,verticalPixelRatio:o}=t,u=e[s.from],c=n(t,u),d=u;if(s.to-s.from<2){let e=l/2;h.beginPath();let i={nt:u.nt-e,st:u.st},s={nt:u.nt+e,st:u.st};h.moveTo(i.nt*a,i.st*o),h.lineTo(s.nt*a,s.st*o),r(t,c,i,s)}else{let l=(e,i)=>{r(t,c,d,i),h.beginPath(),c=e,d=i},f=d;h.beginPath(),h.moveTo(u.nt*a,u.st*o);for(let r=s.from+1;r<s.to;++r){let s=n(t,f=e[r]);switch(i){case 0:h.lineTo(f.nt*a,f.st*o);break;case 1:h.lineTo(f.nt*a,e[r-1].st*o),s!==c&&(l(s,f),h.lineTo(f.nt*a,e[r-1].st*o)),h.lineTo(f.nt*a,f.st*o);break;case 2:{let[t,i]=function(t,e,i){var s,l;let n=Math.max(0,e-1),r=Math.min(t.length-1,i+1);return[(s=t[e],l=il(is(t[i],t[n]),6),{nt:s.nt+l.nt,st:s.st+l.st}),is(t[i],il(is(t[r],t[e]),6))]}(e,r-1,r);h.bezierCurveTo(t.nt*a,t.st*o,i.nt*a,i.st*o,f.nt*a,f.st*o)}}1!==i&&s!==c&&(l(s,f),h.moveTo(f.nt*a,f.st*o))}(d!==f||d===f&&1===i)&&r(t,c,d,f)}}function is(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function il(t,e){return{nt:t.nt/e,st:t.st/e}}function ir(t,e,i,s,l){let{context:n,horizontalPixelRatio:r,verticalPixelRatio:h}=e;n.lineTo(l.nt*r,t*h),n.lineTo(s.nt*r,t*h),n.closePath(),n.fillStyle=i,n.fill()}class ih extends eO{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){var e;if(null===this.G)return;let{it:i,tt:s,ds:l,et:n,Nt:r,fs:h}=this.G,a=null!=(e=this.G.vs)?e:this.G.ps?0:t.mediaSize.height;if(null===s)return;let o=t.context;o.lineCap="butt",o.lineJoin="round",o.lineWidth=n,ed(o,r),o.lineWidth=1,ii(t,i,h,s,l,this.bs.bind(this),ir.bind(null,a))}}function ia(t,e,i){return Math.min(Math.max(t,e),i)}function io(t){let e=Math.ceil(t);return e%2==0?e-1:e}class iu{ws(t,e){let i=this.gs,{Ms:s,xs:l,Ss:n,ks:r,ys:h,vs:a}=e;if(void 0===this.Cs||void 0===i||i.Ms!==s||i.xs!==l||i.Ss!==n||i.ks!==r||i.vs!==a||i.ys!==h){let i=t.context.createLinearGradient(0,0,0,h);if(i.addColorStop(0,s),null!=a){let e=ia(a*t.verticalPixelRatio/h,0,1);i.addColorStop(e,l),i.addColorStop(e,n)}i.addColorStop(1,r),this.Cs=i,this.gs=e}return this.Cs}}class ic extends ih{constructor(){super(...arguments),this.Ts=new iu}bs(t,e){return this.Ts.ws(t,{Ms:e.Ps,xs:"",Ss:"",ks:e.Rs,ys:t.bitmapSize.height})}}function id(t,e){let i=t.context;i.strokeStyle=e,i.stroke()}class im extends eO{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){if(null===this.G)return;let{it:e,tt:i,ds:s,fs:l,et:n,Nt:r,Ds:h}=this.G;if(null===i)return;let a=t.context;a.lineCap="butt",a.lineWidth=n*t.verticalPixelRatio,ed(a,r),a.lineJoin="round";let o=this.Vs.bind(this);void 0!==l&&ii(t,e,l,i,s,o,id),h&&function(t,e,i,s,l){let{horizontalPixelRatio:n,verticalPixelRatio:r,context:h}=t,a=null,o=Math.max(1,Math.floor(n))%2/2,u=i*r+o;for(let i=s.to-1;i>=s.from;--i){let s=e[i];if(s){let e=l(t,s);e!==a&&(h.beginPath(),null!==a&&h.fill(),h.fillStyle=e,a=e);let i=Math.round(s.nt*n)+o,c=s.st*r;h.moveTo(i,c),h.arc(i,c,u,0,2*Math.PI)}}h.fill()}(t,e,h,i,o)}}class ip extends im{Vs(t,e){return e.lt}}function ig(t,e,i,s,l=0,n=e.length){let r=n-l;for(;0<r;){let n=r>>1,h=l+n;s(e[h],i)===t?(l=h+1,r-=n+1):r=n}return l}let iv=ig.bind(null,!0),ib=ig.bind(null,!1);function ix(t,e){return t.ot<e}function iy(t,e){return e<t.ot}function iw(t,e,i){let s=e.Os(),l=e.ui(),n=iv(t,s,ix),r=ib(t,l,iy);if(!i)return{from:n,to:r};let h=n,a=r;return n>0&&n<t.length&&t[n].ot>=s&&(h=n-1),r>0&&r<t.length&&t[r-1].ot<=l&&(a=r+1),{from:h,to:a}}class iS{constructor(t,e,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=t,this.Ns=e,this.Fs=i}bt(t){this.Bs=!0,"data"===t&&(this.As=!0),"options"===t&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),null===this.Ls?null:this.js):null}Hs(){this.zs=this.zs.map(t=>Object.assign(Object.assign({},t),this.Es.Us().$s(t.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){let t=this.Es.Dt(),e=this.Ns.St();if(this.qs(),e.Ni()||t.Ni())return;let i=e.Xs();if(null===i||0===this.Es.In().Ks())return;let s=this.Es.Ct();null!==s&&(this.Ls=iw(this.zs,i,this.Fs),this.Gs(t,e,s.Vt),this.Js())}}class iM extends iS{constructor(t,e){super(t,e,!0)}Gs(t,e,i){e.Qs(this.zs,eT(this.Ls)),t.te(this.zs,i,eT(this.Ls))}ie(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}Ys(){let t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>{let i=e.Vt[3];return this.se(e.ee,i,t)})}}class iz extends iM{constructor(t,e){super(t,e),this.js=new eI,this.re=new ic,this.he=new ip,this.js.Z([this.re,this.he])}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){let t=this.Es.W();this.re.J({fs:t.lineType,it:this.zs,Nt:t.lineStyle,et:t.lineWidth,vs:null,ps:t.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:t.lineVisible?t.lineType:void 0,it:this.zs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class i_ extends eO{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(t){this.zt=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;this.ae=this._e(e),this.ae>=2&&Math.max(1,Math.floor(e))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(e)):this.ae;let s=null,l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*e);for(let n=this.zt.tt.from;n<this.zt.tt.to;++n){let r=this.zt.In[n];s!==r.ce&&(t.fillStyle=r.ce,s=r.ce);let h=Math.floor(.5*this.oe),a=Math.round(r.nt*e),o=a-h,u=this.oe,c=o+u-1,d=Math.min(r.de,r.fe),f=Math.max(r.de,r.fe),m=Math.round(d*i)-h,p=Math.max(Math.round(f*i)+h-m,this.oe);t.fillRect(o,m,u,p);let g=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){let e=a-g,s=Math.max(m,Math.round(r.pe*i)-h),l=s+u-1;l>m+p-1&&(s=(l=m+p-1)-u+1),t.fillRect(e,s,o-e,l-s+1)}let e=a+g,s=Math.max(m,Math.round(r.me*i)-h),l=s+u-1;l>m+p-1&&(s=(l=m+p-1)-u+1),t.fillRect(c+1,s,e-c,l-s+1)}}}_e(t){return Math.max(Math.floor(t),Math.floor(Math.floor(.3*eg(this.zt).le*t)))}}class iN extends iS{constructor(t,e){super(t,e,!1)}Gs(t,e,i){e.Qs(this.zs,eT(this.Ls)),t.be(this.zs,i,eT(this.Ls))}we(t,e,i){return{ot:t,ge:e.Vt[0],Me:e.Vt[1],xe:e.Vt[2],Se:e.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){let t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>this.se(e.ee,e,t))}}class ik extends iN{constructor(){super(...arguments),this.js=new i_}se(t,e,i){return Object.assign(Object.assign({},this.we(t,e,i)),i.$s(t))}Js(){let t=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:t.openVisible,ue:t.thinBars,tt:this.Ls})}}class iC extends ih{constructor(){super(...arguments),this.Ts=new iu}bs(t,e){let i=this.G;return this.Ts.ws(t,{Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:e.Te,ys:t.bitmapSize.height,vs:i.vs})}}class ij extends im{constructor(){super(...arguments),this.Pe=new iu}Vs(t,e){let i=this.G;return this.Pe.ws(t,{Ms:e.Re,xs:e.Re,Ss:e.De,ks:e.De,ys:t.bitmapSize.height,vs:i.vs})}}class iE extends iM{constructor(t,e){super(t,e),this.js=new eI,this.Ve=new iC,this.Oe=new ij,this.js.Z([this.Ve,this.Oe])}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){let t=this.Es.Ct();if(null===t)return;let e=this.Es.W(),i=this.Es.Dt().Rt(e.baseValue.price,t.Vt),s=this.Ns.St().le();this.Ve.J({it:this.zs,et:e.lineWidth,Nt:e.lineStyle,fs:e.lineType,vs:i,ps:!1,tt:this.Ls,ds:s}),this.Oe.J({it:this.zs,et:e.lineWidth,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:s})}}class iL extends eO{constructor(){super(...arguments),this.zt=null,this.ae=0}J(t){this.zt=t}K(t){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;let{horizontalPixelRatio:e}=t;this.ae=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);let i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.min(Math.floor(t*i*e),Math.floor(t*e));return Math.max(Math.floor(e),s)}(this.zt.le,e),this.ae>=2&&Math.floor(e)%2!=this.ae%2&&this.ae--;let i=this.zt.In;this.zt.Be&&this.Ae(t,i,this.zt.tt),this.zt._i&&this.Ie(t,i,this.zt.tt);let s=this.ze(e);(!this.zt._i||this.ae>2*s)&&this.Le(t,i,this.zt.tt)}Ae(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:l,verticalPixelRatio:n}=t,r="",h=Math.min(Math.floor(l),Math.floor(this.zt.le*l)),a=Math.floor(.5*(h=Math.max(Math.floor(l),Math.min(h,this.ae)))),o=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.Ee!==r&&(s.fillStyle=i.Ee,r=i.Ee);let u=Math.round(Math.min(i.pe,i.me)*n),c=Math.round(Math.max(i.pe,i.me)*n),d=Math.round(i.de*n),f=Math.round(i.fe*n),m=Math.round(l*i.nt)-a,p=m+h-1;null!==o&&(m=Math.min(m=Math.max(o+1,m),p));let g=p-m+1;s.fillRect(m,d,g,u-d),s.fillRect(m,c+1,g,f-c),o=p}}ze(t){let e=Math.floor(+t);this.ae<=2*e&&(e=Math.floor(.5*(this.ae-1)));let i=Math.max(Math.floor(t),e);return this.ae<=2*i?Math.max(Math.floor(t),Math.floor(+t)):i}Ie(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:l,verticalPixelRatio:n}=t,r="",h=this.ze(l),a=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.Ne!==r&&(s.fillStyle=i.Ne,r=i.Ne);let d=Math.round(i.nt*l)-Math.floor(.5*this.ae),f=d+this.ae-1,m=Math.round(Math.min(i.pe,i.me)*n),p=Math.round(Math.max(i.pe,i.me)*n);if(null!==a&&(d=Math.min(d=Math.max(a+1,d),f)),this.zt.le*l>2*h){var o,u,c;o=d,u=f-d+1,c=p-m+1,s.fillRect(o+h,m,u-2*h,h),s.fillRect(o+h,m+c-h,u-2*h,h),s.fillRect(o,m,h,c),s.fillRect(o+u-h,m,h,c)}else{let t=f-d+1;s.fillRect(d,m,t,p-m+1)}a=f}}Le(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:l,verticalPixelRatio:n}=t,r="",h=this.ze(l);for(let t=i.from;t<i.to;t++){let i=e[t],a=Math.round(Math.min(i.pe,i.me)*n),o=Math.round(Math.max(i.pe,i.me)*n),u=Math.round(i.nt*l)-Math.floor(.5*this.ae),c=u+this.ae-1;if(i.ce!==r){let t=i.ce;s.fillStyle=t,r=t}this.zt._i&&(u+=h,a+=h,c-=h,o-=h),a>o||s.fillRect(u,a,c-u+1,o-a+1)}}}class iP extends iN{constructor(){super(...arguments),this.js=new iL}se(t,e,i){return Object.assign(Object.assign({},this.we(t,e,i)),i.$s(t))}Js(){let t=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:t.wickVisible,_i:t.borderVisible,tt:this.Ls})}}class i${constructor(t,e){this.Fe=t,this.Li=e}X(t,e,i){this.Fe.draw(t,this.Li,e,i)}}class iR extends iS{constructor(t,e,i){super(t,e,!1),this.wn=i,this.js=new i$(this.wn.renderer(),e=>{let i=t.Ct();return null===i?null:t.Dt().Rt(e,i.Vt)})}We(t){return this.wn.priceValueBuilder(t)}je(t){return this.wn.isWhitespace(t)}Ys(){let t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>Object.assign(Object.assign({ot:e.ee,nt:NaN},t.$s(e.ee)),{He:e.$e}))}Gs(t,e){e.Qs(this.zs,eT(this.Ls))}Js(){this.wn.update({bars:this.zs.map(iV),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function iV(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class iT extends eO{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(t){this.zt=t,this.Ue=[]}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.Ue.length||this.qe(e);let s=Math.max(1,Math.floor(i)),l=Math.round(this.zt.Ye*i)-Math.floor(s/2),n=l+s;for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let r,h,a=this.zt.it[e],o=this.Ue[e-this.zt.tt.from],u=Math.round(a.st*i);t.fillStyle=a.ce,u<=l?(r=u,h=n):(r=l,h=u-Math.floor(s/2)+s),t.fillRect(o.Os,r,o.ui-o.Os+1,h-r)}}qe(t){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.Ue=[]);let e=1>=Math.ceil(this.zt.le*t)?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.le*t)-e;this.Ue=Array(this.zt.tt.to-this.zt.tt.from);for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let s,l,n=this.zt.it[e],r=Math.round(n.nt*t);if(i%2){let t=(i-1)/2;s=r-t,l=r+t}else{let t=i/2;s=r-t,l=r+t-1}this.Ue[e-this.zt.tt.from]={Os:s,ui:l,Ze:r,Xe:n.nt*t,ot:n.ot}}for(let t=this.zt.tt.from+1;t<this.zt.tt.to;t++){let i=this.Ue[t-this.zt.tt.from],s=this.Ue[t-this.zt.tt.from-1];i.ot===s.ot+1&&i.Os-s.ui!==e+1&&(s.Ze>s.Xe?s.ui=i.Os-e-1:i.Os=s.ui+e+1)}let s=Math.ceil(this.zt.le*t);for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){let e=this.Ue[t-this.zt.tt.from];e.ui<e.Os&&(e.ui=e.Os),s=Math.min(e.ui-e.Os+1,s)}if(e>0&&s<4)for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){let e=this.Ue[t-this.zt.tt.from];e.ui-e.Os+1>s&&(e.Ze>e.Xe?e.ui-=1:e.Os+=1)}}}class iW extends iM{constructor(){super(...arguments),this.js=new iT}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){let t={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,eg(this.Es.Ct()).Vt)};this.js.J(t)}}class iD extends iM{constructor(){super(...arguments),this.js=new ip}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){let t=this.Es.W(),e={it:this.zs,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(e)}}let iB=/[2-9]/g;class iI{constructor(t=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=t}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(t,e,i){return this.sr(t,e,i).width}Mi(t,e,i){let s=this.sr(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}sr(t,e,i){let s=String(e).replace(i||iB,"0");if(this.tr.has(s))return ep(this.tr.get(s)).er;if(this.Ke===this.ir){let t=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(t),this.Je++,this.Ke--}t.save(),t.textBaseline="middle";let l=t.measureText(s);return t.restore(),0===l.width&&e.length||(this.tr.set(s,{er:l,rr:this.Ge}),this.Qe[this.Ge]=s,this.Ke++,this.Ge++),l}}class iO{constructor(t){this.hr=null,this.k=null,this.lr="right",this.ar=t}_r(t,e,i){this.hr=t,this.k=e,this.lr=i}X(t){null!==this.k&&null!==this.hr&&this.hr.X(t,this.k,this.ar,this.lr)}}class iF{constructor(t,e,i){this.ur=t,this.ar=new iI(50),this.cr=e,this.F=i,this.j=-1,this.Wt=new iO(this.ar)}gt(){let t=this.F.dr(this.cr);if(null===t)return null;let e=t.vr(this.cr)?t.pr():this.cr.Dt();if(null===e)return null;let i=t.mr(e);if("overlay"===i)return null;let s=this.F.br();return s.P!==this.j&&(this.j=s.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),s,i),this.Wt}}class iA extends eO{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}wr(t,e){var i;if(!(null==(i=this.zt)?void 0:i.yt))return null;let{st:s,et:l,gr:n}=this.zt;return e>=s-l-7&&e<=s+l+7?{Mr:this.zt,gr:n}:null}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt||!1===this.zt.yt)return;let l=Math.round(this.zt.st*s);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.V,t.lineWidth=Math.floor(this.zt.et*i),ed(t,this.zt.Nt),ef(t,l,0,e.width))}}class iK{constructor(t){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new iA,this.ft=!0,this.Es=t,this.Ns=t.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class iH extends iK{constructor(t){super(t)}yr(){this.Sr.yt=!1;let t=this.Es.Dt(),e=t.Cr().Cr;if(2!==e&&3!==e)return;let i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;let s=this.Es.Ct();null!==s&&(this.Sr.yt=!0,this.Sr.st=t.Rt(s.Vt,s.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class iX extends eO{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}$e(){return this.zt}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let s=this.zt;if(null===s)return;let l=Math.max(1,Math.floor(e)),n=l%2/2,r=Math.round(s.Xe.x*e)+n,h=s.Xe.y*i;t.fillStyle=s.Tr,t.beginPath();let a=Math.max(2,1.5*s.Pr)*e;t.arc(r,h,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Rr,t.beginPath(),t.arc(r,h,s.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=s.Dr,t.beginPath(),t.arc(r,h,s.ht*e+l/2,0,2*Math.PI,!1),t.stroke()}}let iq=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function iG(t,e,i,s){if("transparent"===t)return t;let l=e_(t),n=l[3];return`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${(i+(s-i)*e)*n})`}function iU(t,e){var i;let s,l=t%2600/2600;for(let t of iq)if(l>=t.Vr&&l<=t.Or){s=t;break}em(void 0!==s,"Last price animation internal logic error");let n=(l-s.Vr)/(s.Or-s.Vr);return{Rr:iG(e,n,s.Ir,s.zr),Dr:iG(e,n,s.Lr,s.Er),ht:(i=s.Br)+(s.Ar-i)*n}}class iJ{constructor(t){this.Wt=new iX,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=t}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),2===this.jr.W().lastPriceAnimation){let t=performance.now(),e=this.Wr-t;if(e>0)return void(e<650&&(this.Wr+=2600));this.Fr=t,this.Wr=t+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return 0!==this.jr.W().lastPriceAnimation}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);let t=this.jr.$t().St(),e=t.Xs(),i=this.jr.Ct();if(null===e||null===i)return;let s=this.jr.Zr(!0);if(s.Xr||!e.Kr(s.ee))return;let l={x:t.It(s.ee),y:this.jr.Dt().Rt(s._t,i.Vt)},n=s.V,r=this.jr.W().lineWidth,h=iU(this.Gr(),n);this.Wt.J({Tr:n,Pr:r,Rr:h.Rr,Dr:h.Dr,ht:h.ht,Xe:l})}Yr(){let t=this.Wt.$e();if(null!==t){let e=iU(this.Gr(),t.Tr);t.Rr=e.Rr,t.Dr=e.Dr,t.ht=e.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function iQ(t,e){return io(Math.min(Math.max(t,12),30)*e)}function iY(t,e){switch(t){case"arrowDown":case"arrowUp":return iQ(e,1);case"circle":return iQ(e,.8);case"square":return iQ(e,.7)}}function iZ(t){let e=Math.ceil(iQ(t,1));return e%2!=0?e-1:e}function i0(t){return Math.max(iQ(t,.1),3)}function i1(t,e,i){return e?t:i?Math.ceil(t/2):0}function i2(t,e,i,s,l){let n=iY("square",i),r=(n-1)/2,h=t-r,a=e-r;return s>=h&&s<=h+n&&l>=a&&l<=a+n}function i5(t,e,i,s){let l=(iY("arrowUp",s)-1)/2*i.Jr,n=(io(s/2)-1)/2*i.Jr;e.beginPath(),t?(e.moveTo(i.nt-l,i.st),e.lineTo(i.nt,i.st-l),e.lineTo(i.nt+l,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st+l),e.lineTo(i.nt-n,i.st+l)):(e.moveTo(i.nt-l,i.st),e.lineTo(i.nt,i.st+l),e.lineTo(i.nt+l,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st-l),e.lineTo(i.nt-n,i.st-l)),e.lineTo(i.nt-n,i.st),e.fill()}class i3 extends eO{constructor(){super(...arguments),this.zt=null,this.ar=new iI,this.j=-1,this.H="",this.Qr=""}J(t){this.zt=t}_r(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Qr=eD(t,e),this.ar.nr())}wr(t,e){if(null===this.zt||null===this.zt.tt)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){var i,s,l;let r=this.zt.it[n];if(i=r,s=t,l=e,!(void 0===i.Kt||!function(t,e,i,s,l,n){let r=s/2;return l>=t&&l<=t+i&&n>=e-r&&n<=e+r}(i.Kt.nt,i.Kt.st,i.Kt.Hi,i.Kt.At,s,l))||function(t,e,i){if(0===t.Ks)return!1;switch(t.nh){case"arrowDown":case"arrowUp":var s,l;return s=t.nt,l=t.st,i2(s,l,t.Ks,e,i);case"circle":return function(t,e,i,s,l){let n=2+iY("circle",i)/2,r=t-s,h=e-l;return Math.sqrt(r*r+h*h)<=n}(t.nt,t.st,t.Ks,e,i);case"square":return i2(t.nt,t.st,t.Ks,e,i)}}(i,s,l))return{Mr:r.th,gr:r.gr}}return null}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},s,l){if(null!==this.zt&&null!==this.zt.tt){t.textBaseline="middle",t.font=this.Qr;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){let l=this.zt.it[s];void 0!==l.Kt&&(l.Kt.Hi=this.ar.xi(t,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),function(t,e,i,s){var l,n,r;e.fillStyle=t.V,void 0!==t.Kt&&(l=t.Kt.ih,n=t.Kt.nt,r=t.Kt.st,e.save(),e.scale(i,s),e.fillText(l,n,r),e.restore()),function(t,e,i){if(0!==t.Ks){switch(t.nh){case"arrowDown":return i5(!1,e,i,t.Ks);case"arrowUp":return i5(!0,e,i,t.Ks);case"circle":let s=(iY("circle",t.Ks)-1)/2;e.beginPath(),e.arc(i.nt,i.st,s*i.Jr,0,2*Math.PI,!1),e.fill();return;case"square":return function(t,e,i){let s=iY("square",i),l=(s-1)*e.Jr/2,n=e.nt-l,r=e.st-l;t.fillRect(n,r,s*e.Jr,s*e.Jr)}(e,i,t.Ks)}t.nh}}(t,e,function(t,e,i){let s=Math.max(1,Math.floor(e))%2/2;return{nt:Math.round(t.nt*e)+s,st:t.st*i,Jr:e}}(t,i,s))}(l,t,e,i)}}}}class i4{constructor(t,e){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new i3,this.jr=t,this.$i=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.hh=!0,"data"===t&&(this.rh=!0,this.oh=null)}gt(t){if(!this.jr.yt())return null;this.ft&&this._h();let e=this.$i.W().layout;return this.Wt._r(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){let t=this.$i.St().le(),e=i0(t),i=1.5*iZ(t)+2*e,s=this.fh();this.ah={above:i1(i,s.aboveBar,s.inBar),below:i1(i,s.belowBar,s.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return null===this.oh&&(this.oh=this.jr.dh().reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){let t=this.jr.Dt(),e=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(t=>({ot:t.time,nt:0,st:0,Ks:0,nh:t.shape,V:t.color,th:t.th,gr:t.id,Kt:void 0})),this.rh=!1);let s=this.$i.W().layout;this.zt.tt=null;let l=e.Xs();if(null===l)return;let n=this.jr.Ct();if(null===n||0===this.zt.it.length)return;let r=NaN,h=i0(e.le()),a={sh:h,eh:h};this.zt.tt=iw(this.zt.it,l,!0);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){let o=i[l];o.time!==r&&(a.sh=h,a.eh=h,r=o.time);let u=this.zt.it[l];u.nt=e.It(o.time),void 0!==o.text&&o.text.length>0&&(u.Kt={ih:o.text,nt:0,st:0,Hi:0,At:0});let c=this.jr.ph(o.time);null!==c&&function(t,e,i,s,l,n,r,h,a){let o=eE(i)?i:i.Se,u=eE(i)?i:i.Me,c=eE(i)?i:i.xe,d=eE(e.size)?Math.max(e.size,0):1,f=iZ(h.le())*d,m=f/2;switch(t.Ks=f,e.position){case"inBar":return t.st=r.Rt(o,a),void 0!==t.Kt&&(t.Kt.st=t.st+m+n+.6*l);case"aboveBar":return t.st=r.Rt(u,a)-m-s.sh,void 0!==t.Kt&&(t.Kt.st=t.st-m-.6*l,s.sh+=1.2*l),s.sh+=f+n;case"belowBar":return t.st=r.Rt(c,a)+m+s.eh,void 0!==t.Kt&&(t.Kt.st=t.st+m+n+.6*l,s.eh+=1.2*l),s.eh+=f+n}e.position}(u,o,c,a,s.fontSize,h,t,e,n.Vt)}this.ft=!1}}class i6 extends iK{constructor(t){super(t)}yr(){let t=this.Sr;t.yt=!1;let e=this.Es.W();if(!e.priceLineVisible||!this.Es.yt())return;let i=this.Es.Zr(0===e.priceLineSource);i.Xr||(t.yt=!0,t.st=i.ki,t.V=this.Es.mh(i.V),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class i9 extends eZ{constructor(t){super(),this.jt=t}zi(t,e,i){t.yt=!1,e.yt=!1;let s=this.jt;if(!s.yt())return;let l=s.W(),n=l.lastValueVisible,r=""!==s.bh(),h=0===l.seriesLastValueMode,a=s.Zr(!1);if(a.Xr)return;n&&(t.Kt=this.wh(a,n,h),t.yt=0!==t.Kt.length),(r||h)&&(e.Kt=this.gh(a,n,r,h),e.yt=e.Kt.length>0);let o=s.mh(a.V),u=ek(o);i.t=u.t,i.ki=a.ki,e.Ot=s.$t().Bt(a.ki/s.Dt().At()),t.Ot=o,t.V=u.i,e.V=u.i}gh(t,e,i,s){let l="",n=this.jt.bh();return i&&0!==n.length&&(l+=`${n} `),e&&s&&(l+=this.jt.Dt().Mh()?t.xh:t.Sh),l.trim()}wh(t,e,i){return e?i?this.jt.Dt().Mh()?t.Sh:t.xh:t.Kt:""}}function i8(t,e,i,s){let l=Number.isFinite(e),n=Number.isFinite(i);return l&&n?t(e,i):l||n?l?e:i:s}class i7{constructor(t,e){this.kh=t,this.yh=e}Ch(t){return null!==t&&this.kh===t.kh&&this.yh===t.yh}Th(){return new i7(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(t){return null===t?this:new i7(i8(Math.min,this.Ph(),t.Ph(),-1/0),i8(Math.max,this.Rh(),t.Rh(),1/0))}Vh(t){if(!eE(t)||0==this.yh-this.kh)return;let e=.5*(this.yh+this.kh),i=this.yh-e,s=this.kh-e;i*=t,s*=t,this.yh=e+i,this.kh=e+s}Oh(t){eE(t)&&(this.yh+=t,this.kh+=t)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(t){return null===t?null:new i7(t.minValue,t.maxValue)}}class st{constructor(t,e){this.Ih=t,this.zh=e||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return null===this.Ih?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(t){return null===t?null:new st(i7.Ah(t.priceRange),t.margins)}}class se extends iK{constructor(t,e){super(t),this.Nh=e}yr(){let t=this.Sr;t.yt=!1;let e=this.Nh.W();if(!this.Es.yt()||!e.lineVisible)return;let i=this.Nh.Fh();null!==i&&(t.yt=!0,t.st=i,t.V=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.gr=this.Nh.W().id)}}class si extends eZ{constructor(t,e){super(),this.jr=t,this.Nh=e}zi(t,e,i){t.yt=!1,e.yt=!1;let s=this.Nh.W(),l=s.axisLabelVisible,n=""!==s.title,r=this.jr;if(!l||!r.yt())return;let h=this.Nh.Fh();if(null===h)return;n&&(e.Kt=s.title,e.yt=!0),e.Ot=r.$t().Bt(h/r.Dt().At()),t.Kt=this.Wh(s.price),t.yt=!0;let a=ek(s.axisLabelColor||s.color);i.t=a.t;let o=s.axisLabelTextColor||a.i;t.V=o,e.V=o,i.ki=h}Wh(t){let e=this.jr.Ct();return null===e?"":this.jr.Dt().Fi(t,e.Vt)}}class ss{constructor(t,e){this.jr=t,this.cn=e,this.jh=new se(t,this),this.ur=new si(t,this),this.Hh=new iF(this.ur,t,t.$t())}$h(t){ej(this.cn,t),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){let t=this.jr,e=t.Dt();if(t.$t().St().Ni()||e.Ni())return null;let i=t.Ct();return null===i?null:e.Rt(this.cn.price,i.Vt)}}class sl extends e3{constructor(t){super(),this.$i=t}$t(){return this.$i}}let sn={Bar:(t,e,i,s)=>{var l;let n=e.upColor,r=e.downColor,h=eg(t(i,s)),a=ev(h.Vt[0])<=ev(h.Vt[3]);return{ce:null!=(l=h.V)?l:a?n:r}},Candlestick:(t,e,i,s)=>{var l,n,r;let h=e.upColor,a=e.downColor,o=e.borderUpColor,u=e.borderDownColor,c=e.wickUpColor,d=e.wickDownColor,f=eg(t(i,s)),m=ev(f.Vt[0])<=ev(f.Vt[3]);return{ce:null!=(l=f.V)?l:m?h:a,Ne:null!=(n=f.Ot)?n:m?o:u,Ee:null!=(r=f.Xh)?r:m?c:d}},Custom:(t,e,i,s)=>{var l;return{ce:null!=(l=eg(t(i,s)).V)?l:e.color}},Area:(t,e,i,s)=>{var l,n,r,h;let a=eg(t(i,s));return{ce:null!=(l=a.lt)?l:e.lineColor,lt:null!=(n=a.lt)?n:e.lineColor,Ps:null!=(r=a.Ps)?r:e.topColor,Rs:null!=(h=a.Rs)?h:e.bottomColor}},Baseline:(t,e,i,s)=>{var l,n,r,h,a,o;let u=eg(t(i,s));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:null!=(l=u.Re)?l:e.topLineColor,De:null!=(n=u.De)?n:e.bottomLineColor,ke:null!=(r=u.ke)?r:e.topFillColor1,ye:null!=(h=u.ye)?h:e.topFillColor2,Ce:null!=(a=u.Ce)?a:e.bottomFillColor1,Te:null!=(o=u.Te)?o:e.bottomFillColor2}},Line:(t,e,i,s)=>{var l,n;let r=eg(t(i,s));return{ce:null!=(l=r.V)?l:e.color,lt:null!=(n=r.V)?n:e.color}},Histogram:(t,e,i,s)=>{var l;return{ce:null!=(l=eg(t(i,s)).V)?l:e.color}}};class sr{constructor(t){this.Kh=(t,e)=>void 0!==e?e.Vt:this.jr.In().Gh(t),this.jr=t,this.Jh=sn[t.Qh()]}$s(t,e){return this.Jh(this.Kh,this.jr.W(),t,e)}}!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(r||(r={}));class sh{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return 0===this.Ks()}Kr(t){return null!==this.hl(t,0)}Gh(t){return this.ll(t)}ll(t,e=0){let i=this.hl(t,e);return null===i?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(t,e,i){if(this.Ni())return null;let s=null;for(let l of i)s=sa(s,this._l(t,e,l));return s}J(t){this.nl.clear(),this.il.clear(),this.tl=t}rl(t){return this.tl[t].ee}al(t){return this.tl[t]}hl(t,e){let i=this.ul(t);if(null===i&&0!==e)switch(e){case -1:return this.cl(t);case 1:return this.dl(t);default:throw TypeError("Unknown search mode")}return i}cl(t){let e=this.fl(t);return e>0&&(e-=1),e!==this.tl.length&&this.rl(e)<t?e:null}dl(t){let e=this.vl(t);return e!==this.tl.length&&t<this.rl(e)?e:null}ul(t){let e=this.fl(t);return e===this.tl.length||t<this.tl[e].ee?null:e}fl(t){return iv(this.tl,t,(t,e)=>t.ee<e)}vl(t){return ib(this.tl,t,(t,e)=>t.ee>e)}pl(t,e,i){let s=null;for(let l=t;l<e;l++){let t=this.tl[l].Vt[i];Number.isNaN(t)||(null===s?s={ml:t,bl:t}:(t<s.ml&&(s.ml=t),t>s.bl&&(s.bl=t)))}return s}_l(t,e,i){if(this.Ni())return null;let s=null,l=eg(this.el()),n=eg(this.An()),r=Math.max(t,l),h=Math.min(e,n),a=30*Math.ceil(r/30),o=Math.max(a,30*Math.floor(h/30));{let t=this.fl(r),l=this.vl(Math.min(h,a,e));s=sa(s,this.pl(t,l,i))}let u=this.il.get(i);void 0===u&&(u=new Map,this.il.set(i,u));for(let t=Math.max(a+1,r);t<o;t+=30){let e=Math.floor(t/30),l=u.get(e);if(void 0===l){let t=this.fl(30*e),s=this.vl((e+1)*30-1);l=this.pl(t,s,i),u.set(e,l)}s=sa(s,l)}{let t=this.fl(o),e=this.vl(h);s=sa(s,this.pl(t,e,i))}return s}}function sa(t,e){return null===t?e:null===e?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class so{constructor(t){this.wl=t}X(t,e,i){this.wl.draw(t)}gl(t,e,i){var s,l;null==(l=(s=this.wl).drawBackground)||l.call(s,t)}}class su{constructor(t){this.tr=null,this.wn=t}gt(){var t;let e=this.wn.renderer();if(null===e)return null;if((null==(t=this.tr)?void 0:t.Ml)===e)return this.tr.xl;let i=new so(e);return this.tr={Ml:e,xl:i},i}Sl(){var t,e,i;return null!=(i=null==(e=(t=this.wn).zOrder)?void 0:e.call(t))?i:"normal"}}function sc(t){var e,i,s,l,n;return{Kt:t.text(),ki:t.coordinate(),Si:null==(e=t.fixedCoordinate)?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:null==(s=null==(i=t.visible)?void 0:i.call(t))||s,hi:null==(n=null==(l=t.tickVisible)?void 0:l.call(t))||n}}class sd{constructor(t,e){this.Wt=new e2,this.kl=t,this.yl=e}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},sc(this.kl))),this.Wt}}class sf extends eZ{constructor(t,e){super(),this.kl=t,this.Li=e}zi(t,e,i){let s=sc(this.kl);i.t=s.t,t.V=s.V;let l=2/12*this.Li.P();i.wi=l,i.gi=l,i.ki=s.ki,i.Si=s.Si,t.Kt=s.Kt,t.yt=s.yt,t.hi=s.hi}}class sm{constructor(t,e){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=t,this.jr=e}Ol(){return this.Vl}Vn(){var t,e;null==(e=(t=this.Vl).updateAllViews)||e.call(t)}Pn(){var t,e,i,s;let l=null!=(i=null==(e=(t=this.Vl).paneViews)?void 0:e.call(t))?i:[];if((null==(s=this.Cl)?void 0:s.Ml)===l)return this.Cl.xl;let n=l.map(t=>new su(t));return this.Cl={Ml:l,xl:n},n}Qi(){var t,e,i,s;let l=null!=(i=null==(e=(t=this.Vl).timeAxisViews)?void 0:e.call(t))?i:[];if((null==(s=this.Tl)?void 0:s.Ml)===l)return this.Tl.xl;let n=this.jr.$t().St(),r=l.map(t=>new sd(t,n));return this.Tl={Ml:l,xl:r},r}Rn(){var t,e,i,s;let l=null!=(i=null==(e=(t=this.Vl).priceAxisViews)?void 0:e.call(t))?i:[];if((null==(s=this.Pl)?void 0:s.Ml)===l)return this.Pl.xl;let n=this.jr.Dt(),r=l.map(t=>new sf(t,n));return this.Pl={Ml:l,xl:r},r}Bl(){var t,e,i,s;let l=null!=(i=null==(e=(t=this.Vl).priceAxisPaneViews)?void 0:e.call(t))?i:[];if((null==(s=this.Rl)?void 0:s.Ml)===l)return this.Rl.xl;let n=l.map(t=>new su(t));return this.Rl={Ml:l,xl:n},n}Al(){var t,e,i,s;let l=null!=(i=null==(e=(t=this.Vl).timeAxisPaneViews)?void 0:e.call(t))?i:[];if((null==(s=this.Dl)?void 0:s.Ml)===l)return this.Dl.xl;let n=l.map(t=>new su(t));return this.Dl={Ml:l,xl:n},n}Il(t,e){var i,s,l;return null!=(l=null==(s=(i=this.Vl).autoscaleInfo)?void 0:s.call(i,t,e))?l:null}wr(t,e){var i,s,l;return null!=(l=null==(s=(i=this.Vl).hitTest)?void 0:s.call(i,t,e))?l:null}}function sp(t,e,i,s){t.forEach(t=>{e(t).forEach(t=>{t.Sl()===i&&s.push(t)})})}function sg(t){return t.Pn()}function sv(t){return t.Bl()}function sb(t){return t.Al()}class sx extends sl{constructor(t,e,i,s,l){super(t),this.zt=new sh,this.jh=new i6(this),this.zl=[],this.Ll=new iH(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=e,this.$l=i;let n=new i9(this);this.rn=[n],this.Hh=new iF(n,this,t),"Area"!==i&&"Line"!==i&&"Baseline"!==i||(this.El=new iJ(this)),this.Ul(),this.ql(l)}S(){null!==this.jl&&clearTimeout(this.jl)}mh(t){return this.cn.priceLineColor||t}Zr(t){let e,i,s={Xr:!0},l=this.Dt();if(this.$t().St().Ni()||l.Ni()||this.zt.Ni())return s;let n=this.$t().St().Xs(),r=this.Ct();if(null===n||null===r)return s;if(t){let t=this.zt.sl();if(null===t)return s;e=t,i=t.ee}else{let t=this.zt.ll(n.ui(),-1);if(null===t||null===(e=this.zt.Gh(t.ee)))return s;i=t.ee}let h=e.Vt[3],a=this.Us().$s(i,{Vt:e}),o=l.Rt(h,r.Vt);return{Xr:!1,_t:h,Kt:l.Fi(h,r.Vt),xh:l.Yl(h),Sh:l.Zl(h,r.Vt),V:a.ce,ki:o,ee:i}}Us(){return null!==this.Nl||(this.Nl=new sr(this)),this.Nl}W(){return this.cn}$h(t){let e=t.priceScaleId;void 0!==e&&e!==this.cn.priceScaleId&&this.$t().Xl(this,e),ej(this.cn,t),void 0!==t.priceFormat&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(t,e){this.zt.J(t),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),null!==this.El&&(e&&e.ta?this.El.$r():0===t.length&&this.El.Hr());let i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(t){this.Fl=t,this.Ql();let e=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(e),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(t){let e=new ss(this,t);return this.zl.push(e),this.$t().Gl(this),e}ra(t){let e=this.zl.indexOf(t);-1!==e&&this.zl.splice(e,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){let t=this.ha();return null===t?null:{Vt:t.Vt[3],la:t.ot}}ha(){let t=this.$t().St().Xs();if(null===t)return null;let e=t.Os();return this.zt.ll(e,1)}In(){return this.zt}ph(t){let e=this.zt.Gh(t);return null===e?null:"Bar"===this.$l||"Candlestick"===this.$l||"Custom"===this.$l?{ge:e.Vt[0],Me:e.Vt[1],xe:e.Vt[2],Se:e.Vt[3]}:e.Vt[3]}aa(t){let e=[];sp(this.Hl,sg,"top",e);let i=this.El;return null!==i&&i.yt()&&(null===this.jl&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),e.unshift(i)),e}Pn(){let t=[];this._a()||t.push(this.Ll),t.push(this.wn,this.jh,this.dn);let e=this.zl.map(t=>t.qh());return t.push(...e),sp(this.Hl,sg,"normal",t),t}ua(){return this.ca(sg,"bottom")}da(t){return this.ca(sv,t)}fa(t){return this.ca(sb,t)}va(t,e){return this.Hl.map(i=>i.wr(t,e)).filter(t=>null!==t)}Ji(t){return[this.Hh,...this.zl.map(t=>t.Yh())]}Rn(t,e){if(e!==this.Yi&&!this._a())return[];let i=[...this.rn];for(let t of this.zl)i.push(t.Zh());return this.Hl.forEach(t=>{i.push(...t.Rn())}),i}Qi(){let t=[];return this.Hl.forEach(e=>{t.push(...e.Qi())}),t}Il(t,e){if(void 0!==this.cn.autoscaleInfoProvider){let i=this.cn.autoscaleInfoProvider(()=>{let i=this.pa(t,e);return null===i?null:i.Bh()});return st.Ah(i)}return this.pa(t,e)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var t;for(let t of(this.wn.bt(),this.dn.bt(),this.rn))t.bt();for(let t of this.zl)t.bt();this.jh.bt(),this.Ll.bt(),null==(t=this.El)||t.bt(),this.Hl.forEach(t=>t.Vn())}Dt(){return eg(super.Dt())}kt(t){if(!(("Line"===this.$l||"Area"===this.$l||"Baseline"===this.$l)&&this.cn.crosshairMarkerVisible))return null;let e=this.zt.Gh(t);return null===e?null:{_t:e.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(t)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(t){this.Hl.push(new sm(t,this))}ya(t){this.Hl=this.Hl.filter(e=>e.Ol()!==t)}Ca(){if(this.wn instanceof iR!=!1)return t=>this.wn.We(t)}Ta(){if(this.wn instanceof iR!=!1)return t=>this.wn.je(t)}_a(){return!e6(this.Dt().Pa())}pa(t,e){if(!eL(t)||!eL(e)||this.zt.Ni())return null;let i="Line"===this.$l||"Area"===this.$l||"Baseline"===this.$l||"Histogram"===this.$l?[3]:[2,1],s=this.zt.ol(t,e,i),l=null!==s?new i7(s.ml,s.bl):null;if("Histogram"===this.Qh()){let t=this.cn.base,e=new i7(t,t);l=null!==l?l.ts(e):e}let n=this.dn.uh();return this.Hl.forEach(i=>{var s,r,h,a;let o=i.Il(t,e);if(null==o?void 0:o.priceRange){let t=new i7(o.priceRange.minValue,o.priceRange.maxValue);l=null!==l?l.ts(t):t}(null==o?void 0:o.margins)&&(s=n,r=o.margins,n={above:Math.max(null!=(h=null==s?void 0:s.above)?h:0,r.above),below:Math.max(null!=(a=null==s?void 0:s.below)?a:0,r.below)})}),new st(l,n)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{let t=this.cn.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(t){switch(this.$l){case"Line":case"Area":case"Baseline":{let t=this.cn.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.Us().$s(t).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new ie(this.cn.priceFormat.precision);break;case"percent":this.wa=new it(this.cn.priceFormat.precision);break;default:{let t=Math.pow(10,this.cn.priceFormat.precision);this.wa=new e7(t,this.cn.priceFormat.minMove*t)}}null!==this.Yi&&this.Yi.Ra()}Ql(){let t=this.$t().St();if(!t.Da()||this.zt.Ni())return void(this.Wl=[]);let e=eg(this.zt.el());this.Wl=this.Fl.map((i,s)=>{let l=eg(t.Va(i.time,!0));return{time:eg(this.zt.ll(l,l<e?1:-1)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:s,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(t){switch(this.dn=new i4(this,this.$t()),this.$l){case"Bar":this.wn=new ik(this,this.$t());break;case"Candlestick":this.wn=new iP(this,this.$t());break;case"Line":this.wn=new iD(this,this.$t());break;case"Custom":this.wn=new iR(this,this.$t(),ep(t));break;case"Area":this.wn=new iz(this,this.$t());break;case"Baseline":this.wn=new iE(this,this.$t());break;case"Histogram":this.wn=new iW(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(t,e){let i=[];return sp(this.Hl,t,e,i),i}}class sy{constructor(t){this.cn=t}Oa(t,e,i){if(0===this.cn.mode)return t;let s=i.vn(),l=s.Ct();if(null===l)return t;let n=s.Rt(t,l),r=i.Ba().filter(t=>t instanceof sx).reduce((t,s)=>{if(i.vr(s)||!s.yt())return t;let l=s.Dt(),n=s.In();if(l.Ni()||!n.Kr(e))return t;let r=n.Gh(e);if(null===r)return t;let h=ev(s.Ct());return t.concat([l.Rt(r.Vt[3],h.Vt)])},[]);if(0===r.length)return t;r.sort((t,e)=>Math.abs(t-n)-Math.abs(e-n));let h=r[0];return s.pn(h,l)}}class sw extends eO{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;let l=Math.max(1,Math.floor(i));t.lineWidth=l,t.save(),t.lineWidth%2&&t.translate(.5,.5),(()=>{let n=eg(this.zt);if(n.Aa){for(let s of(t.strokeStyle=n.Ia,ed(t,n.za),t.beginPath(),n.La)){let n=Math.round(s.Ea*i);t.moveTo(n,-l),t.lineTo(n,e.height+l)}t.stroke()}if(n.Na){for(let i of(t.strokeStyle=n.Fa,ed(t,n.Wa),t.beginPath(),n.ja)){let n=Math.round(i.Ea*s);t.moveTo(-l,n),t.lineTo(e.width+l,n)}t.stroke()}})(),t.restore()}}class sS{constructor(t){this.Wt=new sw,this.ft=!0,this.tn=t}bt(){this.ft=!0}gt(){if(this.ft){let t=this.tn.$t().W().grid,e={Na:t.horzLines.visible,Aa:t.vertLines.visible,Fa:t.horzLines.color,Ia:t.vertLines.color,Wa:t.horzLines.style,za:t.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(t=>({Ea:t.coord}))};this.Wt.J(e),this.ft=!1}return this.Wt}}class sM{constructor(t){this.wn=new sS(t)}qh(){return this.wn}}let sz={$a:4,Ua:1e-4};function s_(t,e){let i=100*(t-e)/e;return e<0?-i:i}function sN(t,e){let i=100*(t-e)/e+100;return e<0?-i:i}function sk(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.log10(i+e.Ua)+e.$a;return t<0?-s:s}function sC(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.pow(10,i-e.$a)-e.Ua;return t<0?-s:s}function sj(t,e){return null===t?null:new i7(sk(t.Ph(),e),sk(t.Rh(),e))}function sE(t,e){return null===t?null:new i7(sC(t.Ph(),e),sC(t.Rh(),e))}function sL(t){if(null===t)return sz;let e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return sz;let i=Math.ceil(Math.abs(Math.log10(e))),s=sz.$a+i;return{$a:s,Ua:1/Math.pow(10,s)}}class sP{constructor(t,e){if(this.qa=t,this.Ya=e,function(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let t=this.qa;1!==t;){if(t%2==0)this.Za.push(2),t/=2;else{if(t%5!=0)throw Error("unexpected base");this.Za.push(2,2.5),t/=5}if(this.Za.length>100)throw Error("something wrong with base")}}}Xa(t,e,i){let s=0===this.qa?0:1/this.qa,l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),n=0,r=this.Ya[0];for(;;){let t=s-l<=1e-14&&l>s+1e-14,e=i*r-l<=1e-14,h=1-l<=1e-14;if(!(t&&e&&h))break;l/=r,r=this.Ya[++n%this.Ya.length]}if(l<=s+1e-14&&(l=s),l=Math.max(1,l),this.Za.length>0&&1e-14>Math.abs(l-1))for(n=0,r=this.Za[0];i*r-l<=1e-14&&l>s+1e-14;)l/=r,r=this.Za[++n%this.Za.length];return l}}class s${constructor(t,e,i,s){this.Ka=[],this.Li=t,this.qa=e,this.Ga=i,this.Ja=s}Xa(t,e){if(t<e)throw Error("high < low");let i=this.Li.At(),s=(t-e)*this.Qa()/i,l=new sP(this.qa,[2,2.5,2]),n=new sP(this.qa,[2,2,2.5]),r=new sP(this.qa,[2.5,2,2]),h=[];return h.push(l.Xa(t,e,s),n.Xa(t,e,s),r.Xa(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(h)}io(){let t=this.Li,e=t.Ct();if(null===e)return void(this.Ka=[]);let i=t.At(),s=this.Ga(i-1,e),l=this.Ga(0,e),n=this.Li.W().entireTextOnly?this.no()/2:0,r=i-1-n,h=Math.max(s,l),a=Math.min(s,l);if(h===a)return void(this.Ka=[]);let o=this.Xa(h,a),u=h%o;u+=u<0?o:0;let c=h>=a?1:-1,d=null,f=0;for(let i=h-u;i>a;i-=o){let s=this.Ja(i,e,!0);null!==d&&Math.abs(s-d)<this.Qa()||s<n||s>r||(f<this.Ka.length?(this.Ka[f].Ea=s,this.Ka[f].so=t.eo(i)):this.Ka.push({Ea:s,so:t.eo(i)}),f++,d=s,t.ro()&&(o=this.Xa(i*c,a)))}this.Ka.length=f}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function sR(t){return t.slice().sort((t,e)=>eg(t.Xi())-eg(e.Xi()))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(h||(h={}));let sV=new it,sT=new e7(100,1);class sW{constructor(t,e,i,s){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new eC,this.vo=new eC,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=sT,this.xo=sL(null),this.So=t,this.cn=e,this.ko=i,this.yo=s,this.Co=new s$(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(t){if(ej(this.cn,t),this.Ra(),void 0!==t.mode&&this.Ro({Cr:t.mode}),void 0!==t.scaleMargins){let e=ep(t.scaleMargins.top),i=ep(t.scaleMargins.bottom);if(e<0||e>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return 1===this.cn.mode}Mh(){return 2===this.cn.mode}Oo(){return 3===this.cn.mode}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(t){let e=this.Cr(),i=null;void 0!==t.Wn&&(this.cn.autoScale=t.Wn),void 0!==t.Cr&&(this.cn.mode=t.Cr,2!==t.Cr&&3!==t.Cr||(this.cn.autoScale=!0),this.oo._o=!1),1===e.Cr&&t.Cr!==e.Cr&&(function(t,e){if(null===t)return!1;let i=sC(t.Ph(),e),s=sC(t.Rh(),e);return isFinite(i)&&isFinite(s)}(this.Ih,this.xo)?null!==(i=sE(this.Ih,this.xo))&&this.Ao(i):this.cn.autoScale=!0),1===t.Cr&&t.Cr!==e.Cr&&null!==(i=sj(this.Ih,this.xo))&&this.Ao(i);let s=e.Cr!==this.cn.mode;s&&(2===e.Cr||this.Mh())&&this.Ra(),s&&(3===e.Cr||this.Oo())&&this.Ra(),void 0!==t.Bo&&e.Bo!==t.Bo&&(this.cn.invertScale=t.Bo,this.Io()),this.vo.m(e,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(t){this.ho!==t&&(this.ho=t,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;let t=this.At()-this.No()-this.Fo();return this.lo=t,t}Lh(){return this.Wo(),this.Ih}Ao(t,e){let i=this.Ih;(e||null===i&&null!==t||null!==i&&!i.Ch(t))&&(this.bo=null,this.Ih=t)}Ni(){return this.Wo(),0===this.ho||!this.Ih||this.Ih.Ni()}jo(t){return this.Bo()?t:this.At()-1-t}Rt(t,e){return this.Mh()?t=s_(t,e):this.Oo()&&(t=sN(t,e)),this.Po(t,e)}te(t,e,i){this.Wo();let s=this.Fo(),l=eg(this.Lh()),n=l.Ph(),r=l.Rh(),h=this.Eo()-1,a=this.Bo(),o=h/(r-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.Ho();for(let i=u;i<c;i++){let l=t[i],r=l._t;if(isNaN(r))continue;let h=r;null!==d&&(h=d(l._t,e));let u=s+o*(h-n);l.st=a?u:this.ho-1-u}}be(t,e,i){this.Wo();let s=this.Fo(),l=eg(this.Lh()),n=l.Ph(),r=l.Rh(),h=this.Eo()-1,a=this.Bo(),o=h/(r-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.Ho();for(let i=u;i<c;i++){let l=t[i],r=l.ge,h=l.Me,u=l.xe,c=l.Se;null!==d&&(r=d(l.ge,e),h=d(l.Me,e),u=d(l.xe,e),c=d(l.Se,e));let f=s+o*(r-n),m=a?f:this.ho-1-f;l.pe=m,f=s+o*(h-n),l.de=m=a?f:this.ho-1-f,f=s+o*(u-n),l.fe=m=a?f:this.ho-1-f,f=s+o*(c-n),l.me=m=a?f:this.ho-1-f}}pn(t,e){let i=this.To(t,e);return this.$o(i,e)}$o(t,e){var i,s;let l=t;return this.Mh()?(i=l,e<0&&(i=-i),l=i/100*e+e):this.Oo()&&(s=l-100,e<0&&(s=-s),l=s/100*e+e),l}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let t=[];for(let e=0;e<this.po.length;e++){let i=this.po[e];null===i.Xi()&&i.Ki(e+1),t.push(i)}return t=sR(t),this.mo=t,this.mo}qo(t){-1===this.po.indexOf(t)&&(this.po.push(t),this.Ra(),this.Yo())}Zo(t){let e=this.po.indexOf(t);if(-1===e)throw Error("source is not attached to scale");this.po.splice(e,1),0===this.po.length&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let t=null;for(let e of this.po){let i=e.Ct();null!==i&&(null===t||i.la<t.la)&&(t=i)}return null===t?null:t.Vt}Bo(){return this.cn.invertScale}Ha(){let t=null===this.Ct();if(null!==this.bo&&(t||this.bo.Xo===t))return this.bo.Ha;this.Co.io();let e=this.Co.Ha();return this.bo={Ha:e,Xo:t},this.fo.m(),e}Ko(){return this.fo}Go(t){this.Mh()||this.Oo()||null===this.wo&&null===this.ao&&(this.Ni()||(this.wo=this.ho-t,this.ao=eg(this.Lh()).Th()))}Jo(t){if(this.Mh()||this.Oo()||null===this.wo)return;this.Ro({Wn:!1}),(t=this.ho-t)<0&&(t=0);let e=(this.wo+.2*(this.ho-1))/(t+.2*(this.ho-1)),i=eg(this.ao).Th();e=Math.max(e,.1),i.Vh(e),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(t){this.Vo()||null===this.Mo&&null===this.ao&&(this.Ni()||(this.Mo=t,this.ao=eg(this.Lh()).Th()))}i_(t){if(this.Vo()||null===this.Mo)return;let e=eg(this.Lh()).Dh()/(this.Eo()-1),i=t-this.Mo;this.Bo()&&(i*=-1);let s=i*e,l=eg(this.ao).Th();l.Oh(s),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||null!==this.Mo&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(t,e){switch(this.cn.mode){case 2:return this.s_(s_(t,e));case 3:return this.ba().format(sN(t,e));default:return this.Wh(t)}}eo(t){switch(this.cn.mode){case 2:return this.s_(t);case 3:return this.ba().format(t);default:return this.Wh(t)}}Yl(t){return this.Wh(t,eg(this.e_()).ba())}Zl(t,e){return t=s_(t,e),this.s_(t,sV)}r_(){return this.po}h_(t){this.oo={uo:t,_o:!1}}Vn(){this.po.forEach(t=>t.Vn())}Ra(){this.bo=null;let t=this.e_(),e=100;null!==t&&(e=Math.round(1/t.ma())),this.wa=sT,this.Mh()?(this.wa=sV,e=100):this.Oo()?(this.wa=new e7(100,1),e=100):null!==t&&(this.wa=t.ba()),this.Co=new s$(this,e,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(t,e){if(this.Wo(),this.Ni())return 0;t=this.ro()&&t?sk(t,this.xo):t;let i=eg(this.Lh()),s=this.Fo()+(this.Eo()-1)*(t-i.Ph())/i.Dh();return this.jo(s)}To(t,e){if(this.Wo(),this.Ni())return 0;let i=this.jo(t),s=eg(this.Lh()),l=s.Ph()+s.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?sC(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){var t,e,i,s,l;let n=this.oo.uo;if(null===n)return;let r=null,h=this.r_(),a=0,o=0;for(let t of h){if(!t.yt())continue;let h=t.Ct();if(null===h)continue;let u=t.Il(n.Os(),n.ui()),c=u&&u.Lh();if(null!==c){switch(this.cn.mode){case 1:c=sj(c,this.xo);break;case 2:e=c,i=h.Vt,c=new i7(s_(e.Ph(),i),s_(e.Rh(),i));break;case 3:s=c,l=h.Vt,c=new i7(sN(s.Ph(),l),sN(s.Rh(),l))}if(r=null===r?c:r.ts(eg(c)),null!==u){let t=u.Eh();null!==t&&(a=Math.max(a,t.above),o=Math.max(o,t.below))}}}if(a===this.co&&o===this.do||(this.co=a,this.do=o,this.bo=null,this.Do()),null!==r){if(r.Ph()===r.Rh()){let t=this.e_(),e=5*(null===t||this.Mh()||this.Oo()?1:t.ma());this.ro()&&(r=sE(r,this.xo)),r=new i7(r.Ph()-e,r.Rh()+e),this.ro()&&(r=sj(r,this.xo))}if(this.ro()){let e=sE(r,this.xo),i=sL(e);if(t=this.xo,i.$a!==t.$a||i.Ua!==t.Ua){let t=null!==this.ao?sE(this.ao,this.xo):null;this.xo=i,r=sj(e,i),null!==t&&(this.ao=sj(t,i))}}this.Ao(r)}else null===this.Ih&&(this.Ao(new i7(-.5,.5)),this.xo=sL(null));this.oo._o=!0}Ho(){return this.Mh()?s_:this.Oo()?sN:this.ro()?t=>sk(t,this.xo):null}a_(t,e,i){return void 0===e?(void 0===i&&(i=this.ba()),i.format(t)):e(t)}Wh(t,e){return this.a_(t,this.yo.priceFormatter,e)}s_(t,e){return this.a_(t,this.yo.percentageFormatter,e)}}class sD{constructor(t,e){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new eC,this.yl=t,this.$i=e,this.d_=new sM(this);let i=e.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(t){if(t.leftPriceScale&&this.f_.$h(t.leftPriceScale),t.rightPriceScale&&this.p_.$h(t.rightPriceScale),t.localization&&(this.f_.Ra(),this.p_.Ra()),t.overlayPriceScales)for(let e of Array.from(this.o_.values())){let i=eg(e[0].Dt());i.$h(t.overlayPriceScales),t.localization&&i.Ra()}}w_(t){switch(t){case"left":return this.f_;case"right":return this.p_}return this.o_.has(t)?ep(this.o_.get(t))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(t=>{t.S&&t.S()}),this.c_.m()}M_(){return this.u_}x_(t){this.u_=t}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(t){this.__=t,this.k_()}Lo(t){this.ho=t,this.f_.Lo(t),this.p_.Lo(t),this.po.forEach(e=>{if(this.vr(e)){let i=e.Dt();null!==i&&i.Lo(t)}}),this.k_()}Ba(){return this.po}vr(t){let e=t.Dt();return null===e||this.f_!==e&&this.p_!==e}qo(t,e,i){let s=void 0!==i?i:this.C_().y_+1;this.T_(t,e,s)}Zo(t){let e=this.po.indexOf(t);em(-1!==e,"removeDataSource: invalid data source"),this.po.splice(e,1);let i=eg(t.Dt()).Pa();if(this.o_.has(i)){let e=ep(this.o_.get(i)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.o_.delete(i))}let s=t.Dt();s&&s.Ba().indexOf(t)>=0&&s.Zo(t),null!==s&&(s.Yo(),this.P_(s)),this.mo=null}mr(t){return t===this.f_?"left":t===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(t,e){t.Go(e)}O_(t,e){t.Jo(e),this.k_()}B_(t){t.Qo()}A_(t,e){t.t_(e)}I_(t,e){t.i_(e),this.k_()}z_(t){t.n_()}k_(){this.po.forEach(t=>{t.Vn()})}vn(){let t=null;return this.$i.W().rightPriceScale.visible&&0!==this.p_.Ba().length?t=this.p_:this.$i.W().leftPriceScale.visible&&0!==this.f_.Ba().length?t=this.f_:0!==this.po.length&&(t=this.po[0].Dt()),null===t&&(t=this.p_),t}pr(){let t=null;return this.$i.W().rightPriceScale.visible?t=this.p_:this.$i.W().leftPriceScale.visible&&(t=this.f_),t}P_(t){null!==t&&t.Vo()&&this.L_(t)}E_(t){let e=this.yl.Xs();t.Ro({Wn:!0}),null!==e&&t.h_(e),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(t=>{this.vr(t)&&this.P_(t.Dt())}),this.k_(),this.$i.Uh()}Uo(){return null===this.mo&&(this.mo=sR(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(t){let e=t.r_();if(e&&e.length>0&&!this.yl.Ni()){let e=this.yl.Xs();null!==e&&t.h_(e)}t.Vn()}C_(){let t=this.Uo();if(0===t.length)return{H_:0,y_:0};let e=0,i=0;for(let s=0;s<t.length;s++){let l=t[s].Xi();null!==l&&(l<e&&(e=l),l>i&&(i=l))}return{H_:e,y_:i}}T_(t,e,i){let s=this.w_(e);if(null===s&&(s=this.v_(e,this.$i.W().overlayPriceScales)),this.po.push(t),!e6(e)){let i=this.o_.get(e)||[];i.push(t),this.o_.set(e,i)}s.qo(t),t.Gi(s),t.Ki(i),this.P_(s),this.mo=null}m_(t,e,i){e.Cr!==i.Cr&&this.L_(t)}v_(t,e){let i=new sW(t,Object.assign({visible:!0,autoScale:!0},eR(e)),this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class sB{constructor(t,e,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=t,this.q_=e,this.ir=i}Y_(t){let e=t.time,i=this.q_.cacheKey(e),s=this.tr.get(i);if(void 0!==s)return s.Z_;if(this.Ke===this.ir){let t=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(ep(t)),this.Je++,this.Ke--}let l=this.U_(t);return this.tr.set(i,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,l}}class sI{constructor(t,e){em(t<=e,"right should be >= left"),this.X_=t,this.K_=e}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(t){return this.X_<=t&&t<=this.K_}Ch(t){return this.X_===t.Os()&&this.K_===t.ui()}}function sO(t,e){return null===t||null===e?t===e:t.Ch(e)}class sF{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(t){this.Q_=t,this.tr=null}iu(t,e){this.nu(e),this.tr=null;for(let i=e;i<t.length;++i){let e=t[i],s=this.J_.get(e.timeWeight);void 0===s&&(s=[],this.J_.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}su(t,e){let i=Math.ceil(e/t);return null!==this.tr&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(t){if(0===t)return void this.J_.clear();let e=[];for(let i of(this.J_.forEach((i,s)=>{t<=i[0].index?e.push(s):i.splice(iv(i,t,e=>e.index<t),1/0)}),e))this.J_.delete(i)}ru(t){let e=[];for(let i of Array.from(this.J_.keys()).sort((t,e)=>e-t)){if(!this.J_.get(i))continue;let s=e;e=[];let l=s.length,n=0,r=ep(this.J_.get(i)),h=r.length,a=1/0,o=-1/0;for(let i=0;i<h;i++){let h=r[i],u=h.index;for(;n<l;){let t=s[n],i=t.index;if(!(i<u)){a=i;break}n++,e.push(t),o=i,a=1/0}if(a-u>=t&&u-o>=t)e.push(h),o=u;else if(this.Q_)return s}for(;n<l;n++)e.push(s[n])}return e}}class sA{constructor(t){this.hu=t}lu(){return null===this.hu?null:new sI(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new sA(null)}}function sK(t,e){return t.weight>e.weight?t:e}class sH{constructor(t,e,i,s){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new sF,this.du=new Map,this.fu=sA.ou(),this.vu=!0,this.pu=new eC,this.mu=new eC,this.bu=new eC,this.wu=null,this.gu=null,this.Mu=[],this.cn=e,this.yo=i,this.xu=e.rightOffset,this.Su=e.barSpacing,this.$i=t,this.q_=s,this.ku(),this.cu.tu(e.uniformDistribution)}W(){return this.cn}yu(t){ej(this.yo,t),this.Cu(),this.ku()}$h(t,e){var i;ej(this.cn,t),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),void 0!==t.barSpacing&&this.$i.Gn(t.barSpacing),void 0!==t.rightOffset&&this.$i.Jn(t.rightOffset),void 0!==t.minBarSpacing&&this.$i.Gn(null!=(i=t.barSpacing)?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(t){var e,i;return null!=(i=null==(e=this.uu[t])?void 0:e.time)?i:null}Ui(t){var e;return null!=(e=this.uu[t])?e:null}Va(t,e){if(this.uu.length<1)return null;if(this.q_.key(t)>this.q_.key(this.uu[this.uu.length-1].time))return e?this.uu.length-1:null;let i=iv(this.uu,this.q_.key(t),(t,e)=>this.q_.key(t.time)<e);return this.q_.key(t)<this.q_.key(this.uu[i].time)?e?i:null:i}Ni(){return 0===this.__||0===this.uu.length||null===this._u}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){let t=this.Xs();if(null===t)return null;let e={from:t.Os(),to:t.ui()};return this.Ou(e)}Ou(t){let e=Math.round(t.from),i=Math.round(t.to),s=eg(this.Bu()),l=eg(this.Au());return{from:eg(this.Ui(Math.max(s,e))),to:eg(this.Ui(Math.min(l,i)))}}Iu(t){return{from:eg(this.Va(t.from,!0)),to:eg(this.Va(t.to,!0))}}Hi(){return this.__}S_(t){if(!isFinite(t)||t<=0||this.__===t)return;let e=this.Du(),i=this.__;if(this.__=t,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&0!==i){let e=this.Su*t/i;this.Su=e}this.cn.fixLeftEdge&&null!==e&&0>=e.Os()&&(this.xu-=Math.round((i-t)/this.Su)+1,this.vu=!0),this.zu(),this.Lu()}It(t){if(this.Ni()||!eL(t))return 0;let e=this.Eu()+this.xu-t;return this.__-(e+.5)*this.Su-1}Qs(t,e){let i=this.Eu(),s=void 0===e?0:e.from,l=void 0===e?t.length:e.to;for(let e=s;e<l;e++){let s=t[e].ot,l=i+this.xu-s,n=this.__-(l+.5)*this.Su-1;t[e].nt=n}}Nu(t){return Math.ceil(this.Fu(t))}Jn(t){this.vu=!0,this.xu=t,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(t){this.ju(t),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(null!==this.gu)return this.gu;let t=this.Su,e=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=eg(this.Xs()),l=Math.max(s.Os(),s.Os()-i),n=Math.max(s.ui(),s.ui()-i),r=this.cu.su(t,e),h=this.Bu()+i,a=this.Au()-i,o=this.$u(),u=this.cn.fixLeftEdge||o,c=this.cn.fixRightEdge||o,d=0;for(let t of r){let i;l<=t.index&&t.index<=n&&(d<this.Mu.length?((i=this.Mu[d]).coord=this.It(t.index),i.label=this.Uu(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.It(t.index),label:this.Uu(t),weight:t.weight},this.Mu.push(i)),this.Su>e/2&&!o?i.needAlignCoordinate=!1:i.needAlignCoordinate=u&&t.index<=h||c&&t.index>=a,d++)}return this.Mu.length=d,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(t){this.vu=!0,this._u=t,this.Lu(),this.Tu()}Zu(t,e){let i=this.Fu(t),s=this.le();this.Gn(s+s/10*e),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(t)))}Go(t){this.Mo&&this.n_(),null===this.wo&&null===this.wu&&(this.Ni()||(this.wo=t,this.Xu()))}Jo(t){if(null===this.wu)return;let e=ia(this.__-t,0,this.__),i=ia(this.__-eg(this.wo),0,this.__);0!==e&&0!==i&&this.Gn(this.wu.le*e/i)}Qo(){null!==this.wo&&(this.wo=null,this.Ku())}t_(t){null===this.Mo&&null===this.wu&&(this.Ni()||(this.Mo=t,this.Xu()))}i_(t){if(null===this.Mo)return;let e=(this.Mo-t)/this.le();this.xu=eg(this.wu).Hu+e,this.vu=!0,this.Lu()}n_(){null!==this.Mo&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(t,e=400){if(!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw RangeError("animationDuration (optional) must be finite positive number");let i=this.xu,s=performance.now();this.$i.Zn({Qu:t=>(t-s)/e>=1,tc:l=>{let n=(l-s)/e;return n>=1?t:i+(t-i)*n}})}bt(t,e){this.vu=!0,this.uu=t,this.cu.iu(t,e),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(t){let e=t.G_();this.ju(this.__/e),this.xu=t.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){let t=this.Bu(),e=this.Au();null!==t&&null!==e&&this.rc(new sI(t,e+this.cn.rightOffset))}lc(t){let e=new sI(t.from,t.to);this.rc(e)}qi(t){return void 0!==this.yo.timeFormatter?this.yo.timeFormatter(t.originalTime):this.q_.formatHorzItem(t.time)}$u(){let{handleScroll:t,handleScale:e}=this.$i.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Bu(){return 0===this.uu.length?null:0}Au(){return 0===this.uu.length?null:this.uu.length-1}ac(t){return(this.__-1-t)/this.Su}Fu(t){let e=this.ac(t);return Math.round(1e6*(this.Eu()+this.xu-e))/1e6}ju(t){let e=this.Su;this.Su=t,this.zu(),e!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(sA.ou());let t=this.Eu(),e=this.__/this.Su,i=this.xu+t,s=new sI(i-e+1,i);this._c(new sA(s))}zu(){let t=this.uc();if(this.Su<t&&(this.Su=t,this.vu=!0),0!==this.__){let t=.5*this.__;this.Su>t&&(this.Su=t,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&0!==this.uu.length?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){let t=this.cc();null!==t&&this.xu<t&&(this.xu=t,this.vu=!0);let e=this.dc();this.xu>e&&(this.xu=e,this.vu=!0)}cc(){let t=this.Bu(),e=this._u;return null===t||null===e?null:t-e-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(t){let e=this.du.get(t.weight);return void 0===e&&(e=new sB(t=>this.fc(t),this.q_),this.du.set(t.weight,e)),e.Y_(t)}fc(t){return this.q_.formatTickmark(t,this.yo)}_c(t){let e=this.fu;this.fu=t,sO(e.lu(),this.fu.lu())||this.pu.m(),sO(e.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;let t=this.Bu();if(null===t)return;let e=this.Xs();if(null===e)return;let i=e.Os()-t;if(i<0){let t=this.xu-i-1;this.Jn(t)}this.zu()}Pu(){this.Lu(),this.zu()}}class sX{X(t,e,i){t.useMediaCoordinateSpace(t=>this.K(t,e,i))}gl(t,e,i){t.useMediaCoordinateSpace(t=>this.vc(t,e,i))}vc(t,e,i){}}class sq extends sX{constructor(t){super(),this.mc=new Map,this.zt=t}K(t){}vc(t){if(!this.zt.yt)return;let{context:e,mediaSize:i}=t,s=0;for(let t of this.zt.bc){if(0===t.Kt.length)continue;e.font=t.R;let l=this.wc(e,t.Kt);l>i.width?t.Zu=i.width/l:t.Zu=1,s+=t.gc*t.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((i.height-s)/2,0);break;case"bottom":l=Math.max(i.height-s,0)}for(let t of(e.fillStyle=this.zt.V,this.zt.bc)){e.save();let s=0;switch(this.zt.xc){case"left":e.textAlign="left",s=t.gc/2;break;case"center":e.textAlign="center",s=i.width/2;break;case"right":e.textAlign="right",s=i.width-1-t.gc/2}e.translate(s,l),e.textBaseline="top",e.font=t.R,e.scale(t.Zu,t.Zu),e.fillText(t.Kt,0,t.Sc),e.restore(),l+=t.gc*t.Zu}}wc(t,e){let i=this.kc(t.font),s=i.get(e);return void 0===s&&(s=t.measureText(e).width,i.set(e,s)),s}kc(t){let e=this.mc.get(t);return void 0===e&&(e=new Map,this.mc.set(t,e)),e}}class sG{constructor(t){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new sq(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.V=t.color,e.xc=t.horzAlign,e.Mc=t.vertAlign,e.bc=[{Kt:t.text,R:eD(t.fontSize,t.fontFamily,t.fontStyle),gc:1.2*t.fontSize,Sc:0,Zu:0}])}}class sU extends e3{constructor(t,e){super(),this.cn=e,this.wn=new sG(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(a||(a={}));class sJ{constructor(t,e,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new eC,this.Rc=new eC,this.Dc=null,this.Vc=t,this.cn=e,this.q_=i,this.Oc=new eB(this),this.yl=new sH(this,e.timeScale,this.cn.localization,i),this.vt=new e4(this,e.crosshair),this.Bc=new sy(e.crosshair),this.Ac=new sU(this,e.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(e9.es())}Uh(){this.Nc(e9.ss())}oa(){this.Nc(new e9(1))}Gl(t){let e=this.Fc(t);this.Nc(e)}Wc(){return this.Tc}jc(t){let e=this.Tc;this.Tc=t,null!==e&&this.Gl(e.Hc),null!==t&&this.Gl(t.Hc)}W(){return this.cn}$h(t){ej(this.cn,t),this.yc.forEach(e=>e.b_(t)),void 0!==t.timeScale&&this.yl.$h(t.timeScale),void 0!==t.localization&&this.yl.yu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(t,e){if("left"===t)return void this.$h({leftPriceScale:e});if("right"===t)return void this.$h({rightPriceScale:e});let i=this.Uc(t);null!==i&&(i.Dt.$h(e),this.Pc.m())}Uc(t){for(let e of this.yc){let i=e.w_(t);if(null!==i)return{Ht:e,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(t,e){t.Lo(e),this.Wu()}S_(t){this.__=t,this.yl.S_(this.__),this.yc.forEach(e=>e.S_(t)),this.Wu()}Ic(t){let e=new sD(this.yl,this);void 0!==t?this.yc.splice(t,0,e):this.yc.push(e);let i=void 0===t?this.yc.length-1:t,s=e9.es();return s.Nn(i,{Fn:0,Wn:!0}),this.Nc(s),e}V_(t,e,i){t.V_(e,i)}O_(t,e,i){t.O_(e,i),this.Jl(),this.Nc(this.Gc(t,2))}B_(t,e){t.B_(e),this.Nc(this.Gc(t,2))}A_(t,e,i){e.Vo()||t.A_(e,i)}I_(t,e,i){e.Vo()||(t.I_(e,i),this.Jl(),this.Nc(this.Gc(t,2)))}z_(t,e){e.Vo()||(t.z_(e),this.Nc(this.Gc(t,2)))}E_(t,e){t.E_(e),this.Nc(this.Gc(t,2))}Jc(t){this.yl.Go(t)}Qc(t,e){let i=this.St();if(i.Ni()||0===e)return;let s=i.Hi();t=Math.max(1,Math.min(t,s)),i.Zu(t,e),this.Wu()}td(t){this.nd(0),this.sd(t),this.ed()}rd(t){this.yl.Jo(t),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(t){this.yl.t_(t)}sd(t){this.yl.i_(t),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(t,e,i,s,l){this.vt.gn(t,e);let n=NaN,r=this.yl.Nu(t),h=this.yl.Xs();null!==h&&(r=Math.min(Math.max(h.Os(),r),h.ui()));let a=s.vn(),o=a.Ct();null!==o&&(n=a.pn(e,o)),n=this.Bc.Oa(n,r,s),this.vt.kn(r,n,s),this.oa(),l||this.Rc.m(this.vt.xt(),{x:t,y:e},i)}ad(t,e,i){let s=i.vn(),l=s.Ct(),n=s.Rt(t,eg(l)),r=this.yl.Va(e,!0),h=this.yl.It(eg(r));this.ld(h,n,null,i,!0)}od(t){this.Zc().Cn(),this.oa(),t||this.Rc.m(null,null,null)}Jl(){let t=this.vt.Ht();if(null!==t){let e=this.vt.xn(),i=this.vt.Sn();this.ld(e,i,null,t)}this.vt.Vn()}_d(t,e,i){let s=this.yl.mn(0);void 0!==e&&void 0!==i&&this.yl.bt(e,i);let l=this.yl.mn(0),n=this.yl.Eu(),r=this.yl.Xs();if(null!==r&&null!==s&&null!==l){let e=r.Kr(n),h=this.q_.key(s)>this.q_.key(l),a=null!==t&&t>n&&!h,o=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,u=e&&(void 0!==i||o)&&this.yl.W().shiftVisibleRangeOnNewBar;if(a&&!u){let e=t-n;this.yl.Jn(this.yl.Hu()-e)}}this.yl.Yu(t)}ia(t){null!==t&&t.F_()}dr(t){let e=this.yc.find(e=>e.Uo().includes(t));return void 0===e?null:e}Wu(){this.Ac.Vn(),this.yc.forEach(t=>t.F_()),this.Jl()}S(){this.yc.forEach(t=>t.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(t,e,i){let s=this.yc[0],l=this.fd(e,t,s,i);return this.Cc.push(l),1===this.Cc.length?this.Kl():this.Uh(),l}vd(t){let e=this.dr(t),i=this.Cc.indexOf(t);em(-1!==i,"Series not found"),this.Cc.splice(i,1),eg(e).Zo(t),t.S&&t.S()}Xl(t,e){let i=eg(this.dr(t));i.Zo(t);let s=this.Uc(e);if(null===s){let s=t.Xi();i.qo(t,e,s)}else{let l=s.Ht===i?t.Xi():void 0;s.Ht.qo(t,e,l)}}hc(){let t=e9.ss();t.$n(),this.Nc(t)}pd(t){let e=e9.ss();e.Yn(t),this.Nc(e)}Kn(){let t=e9.ss();t.Kn(),this.Nc(t)}Gn(t){let e=e9.ss();e.Gn(t),this.Nc(e)}Jn(t){let e=e9.ss();e.Jn(t),this.Nc(e)}Zn(t){let e=e9.ss();e.Zn(t),this.Nc(e)}Un(){let t=e9.ss();t.Un(),this.Nc(t)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(t){let e=this.Ec,i=this.zc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Dc||this.Dc.Ps!==i||this.Dc.Rs!==e)this.Dc={Ps:i,Rs:e,wd:new Map};else{let e=this.Dc.wd.get(t);if(void 0!==e)return e}let s=function(t,e,i){let[s,l,n,r]=e_(t),[h,a,o,u]=e_(e),c=[ex(s+i*(h-s)),ex(l+i*(a-l)),ex(n+i*(o-n)),ey(r+i*(u-r))];return`rgba(${c[0]}, ${c[1]}, ${c[2]}, ${c[3]})`}(i,e,t/100);return this.Dc.wd.set(t,s),s}Gc(t,e){let i=new e9(e);if(null!==t){let s=this.yc.indexOf(t);i.Nn(s,{Fn:e})}return i}Fc(t,e){return void 0===e&&(e=2),this.Gc(this.dr(t),e)}Nc(t){this.Vc&&this.Vc(t),this.yc.forEach(t=>t.j_().qh().bt())}fd(t,e,i,s){let l=new sx(this,t,e,i,s),n=void 0!==t.priceScaleId?t.priceScaleId:this.md();return i.qo(l,n),e6(n)||l.$h(t),l}Lc(t){let e=this.cn.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}function sQ(t){return!eE(t)&&!eP(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(o||(o={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(u||(u={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(c||(c={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(d||(d={}));let sY=t=>t.getUTCFullYear();class sZ{constructor(t="yyyy-MM-dd",e="default"){this.gd=t,this.Md=e}Y_(t){return function(t,e,i){return e.replace(/yyyy/g,e8(sY(t),4)).replace(/yy/g,e8(sY(t)%100,2)).replace(/MMMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})).replace(/MMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})).replace(/MM/g,e8(t.getUTCMonth()+1,2)).replace(/dd/g,e8(t.getUTCDate(),2))}(t,this.gd,this.Md)}}class s0{constructor(t){this.xd=t||"%h:%m:%s"}Y_(t){return this.xd.replace("%h",e8(t.getUTCHours(),2)).replace("%m",e8(t.getUTCMinutes(),2)).replace("%s",e8(t.getUTCSeconds(),2))}}let s1={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class s2{constructor(t={}){let e=Object.assign(Object.assign({},s1),t);this.Td=new sZ(e.Sd,e.Cd),this.Pd=new s0(e.kd),this.Rd=e.yd}Y_(t){return`${this.Td.Y_(t)}${this.Rd}${this.Pd.Y_(t)}`}}function s5(t){return 60*t*6e4}function s3(t){return 60*t*1e3}let s4=[{Dd:1e3,Vd:10},{Dd:s3(1),Vd:20},{Dd:s3(5),Vd:21},{Dd:s3(30),Vd:22},{Dd:s5(1),Vd:30},{Dd:s5(3),Vd:31},{Dd:s5(6),Vd:32},{Dd:s5(12),Vd:33}];function s6(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=s4.length-1;i>=0;--i)if(Math.floor(e.getTime()/s4[i].Dd)!==Math.floor(t.getTime()/s4[i].Dd))return s4[i].Vd;return 0}function s9(t){let e=t;if(eP(t)&&(e=s7(t)),!sQ(e))throw Error("time must be of type BusinessDay");return{Od:Math.round(new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0)).getTime()/1e3),Bd:e}}function s8(t){if(!eE(t))throw Error("time must be of type isUTCTimestamp");return{Od:t}}function s7(t){let e=new Date(t);if(isNaN(e.getTime()))throw Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function lt(t){eP(t.time)&&(t.time=s7(t.time))}let le="undefined"!=typeof window;function li(){return!!le&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ls(){return!!le&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ll(t,e,i){let s=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class ln{constructor(t,e,i,s){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=t,this.Ud=e,this.qd=i,this.rs=s}Yd(t,e){if(null!==this.Ld){if(this.Ld.ot===e)return void(this.Ld.zd=t);if(Math.abs(this.Ld.zd-t)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:e,zd:t}}Vr(t,e){var i,s,l,n,r,h;if(null===this.Ld||null===this.Ed||e-this.Ld.ot>50)return;let a=0,o=ll(this.Ld,this.Ed,this.Ud),u=(i=this.Ld,s=this.Ed,i.zd-s.zd),c=[o],d=[u];if(a+=u,null!==this.Nd){let t=ll(this.Ed,this.Nd,this.Ud);if(Math.sign(t)===Math.sign(o)){let e=(l=this.Ed,n=this.Nd,l.zd-n.zd);if(c.push(t),d.push(e),a+=e,null!==this.Fd){let t=ll(this.Nd,this.Fd,this.Ud);if(Math.sign(t)===Math.sign(o)){let e=(r=this.Nd,h=this.Fd,r.zd-h.zd);c.push(t),d.push(e),a+=e}}}}let f=0;for(let t=0;t<c.length;++t)f+=d[t]/a*c[t];Math.abs(f)<this.$d||(this.Wd={zd:t,ot:e},this.Hd=f,this.jd=function(t,e){let i=Math.log(e);return Math.log(-(i/t))/i}(Math.abs(f),this.qd))}tc(t){let e=eg(this.Wd),i=t-e.ot;return e.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(t){return null===this.Wd||this.Zd(t)===this.jd}Zd(t){return Math.min(t-eg(this.Wd).ot,this.jd)}}class lr{constructor(t,e){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=t,this.Qd=e,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return eN(e_(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark","dark"===this.Gd),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function lh(t,e){let i=eg(t.ownerDocument).createElement("canvas");t.appendChild(i);let s=function(t,e){if("device-pixel-content-box"===e.type)return new et(t,e.transform,e.options);throw Error("Unsupported binding target")}(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return s.resizeCanvasElement(e),s}function la(t){var e;t.width=1,t.height=1,null==(e=t.getContext("2d"))||e.clearRect(0,0,1,1)}function lo(t,e,i,s){t.gl&&t.gl(e,i,s)}function lu(t,e,i,s){t.X(e,i,s)}function lc(t,e,i,s){for(let l of t(i,s)){let t=l.gt();null!==t&&e(t)}}class ld{constructor(t,e,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!ls(),this.Af=t=>{this.If(t)},this.zf=t=>{if(this.Lf(t)){let e=this.Ef(t);if(++this._f,this.uf&&this._f>1){let{Nf:i}=this.Ff(lp(t),this.cf);i<30&&!this.wf&&this.Wf(e,this.Hf.jf),this.$f()}}else{let e=this.Ef(t);if(++this.hf,this.lf&&this.hf>1){let{Nf:i}=this.Ff(lp(t),this.af);i<5&&!this.bf&&this.Uf(e,this.Hf.qf),this.Yf()}}},this.Zf=t,this.Hf=e,this.cn=i,this.Xf()}S(){null!==this.gf&&(this.gf(),this.gf=null),null!==this.Mf&&(this.Mf(),this.Mf=null),null!==this.Sf&&(this.Sf(),this.Sf=null),null!==this.kf&&(this.kf(),this.kf=null),null!==this.yf&&(this.yf(),this.yf=null),null!==this.xf&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(t){this.Sf&&this.Sf();let e=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",e)},this.Zf.addEventListener("mousemove",e),this.Lf(t))return;let i=this.Ef(t);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){null!==this.lf&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){null!==this.uf&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(t){if(this.Df||null!==this.pf||this.Lf(t))return;let e=this.Ef(t);this.Uf(e,this.Hf.tv),this.Bf=!0}iv(t){let e=lv(t.changedTouches,eg(this.Of));if(null===e||(this.Vf=lg(t),null!==this.Cf)||this.Rf)return;this.Pf=!0;let{nv:i,sv:s,Nf:l}=this.Ff(lp(e),eg(this.pf));if(this.mf||!(l<5)){if(!this.mf){let t=.5*i,e=s>=t&&!this.cn.ev(),l=t>s&&!this.cn.rv();e||l||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){let i=this.Ef(t,e);this.Wf(i,this.Hf.hv),lm(t)}}}lv(t){if(0!==t.button)return;let{Nf:e}=this.Ff(lp(t),eg(this.vf));if(e>=5&&(this.bf=!0,this.Yf()),this.bf){let e=this.Ef(t);this.Uf(e,this.Hf.av)}}Ff(t,e){let i=Math.abs(e.nt-t.nt),s=Math.abs(e.st-t.st);return{nv:i,sv:s,Nf:i+s}}ov(t){let e=lv(t.changedTouches,eg(this.Of));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.Of=null,this.Vf=lg(t),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);let i=this.Ef(t,e);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){let{Nf:t}=this.Ff(lp(e),this.cf);t<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&lm(t));0===this._f&&lm(t),0===t.touches.length&&this.ff&&(this.ff=!1,lm(t))}If(t){if(0!==t.button)return;let e=this.Ef(t);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),li()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(t))if(this.Uf(e,this.Hf.cv),++this.hf,this.lf&&this.hf>1){let{Nf:i}=this.Ff(lp(t),this.af);i<5&&!this.bf&&this.Uf(e,this.Hf.qf),this.Yf()}else this.bf||this.Uf(e,this.Hf.dv)}Kf(){null!==this.df&&(clearTimeout(this.df),this.df=null)}fv(t){if(null!==this.Of)return;let e=t.changedTouches[0];this.Of=e.identifier,this.Vf=lg(t);let i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=lp(e),this.yf&&(this.yf(),this.yf=null);{let e=this.iv.bind(this),s=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,t),240)}let s=this.Ef(t,e);this.Wf(s,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=lp(e))}mv(t){if(0!==t.button)return;let e=this.Zf.ownerDocument.documentElement;li()&&e.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=lp(t),this.kf&&(this.kf(),this.kf=null);{let t=this.lv.bind(this),i=this.If.bind(this);this.kf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.Df=!0,this.Lf(t))return;let i=this.Ef(t);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=lp(t))}Xf(){var t;this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{let t=this.Zf.ownerDocument,e=t=>{this.Hf.wv&&(t.composed&&this.Zf.contains(t.composedPath()[0])||t.target&&this.Zf.contains(t.target)||this.Hf.wv())};this.Mf=()=>{t.removeEventListener("touchstart",e)},this.gf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}ls()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),t=this.Zf,le&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1}),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){void 0===this.Hf.xv&&void 0===this.Hf.Sv&&void 0===this.Hf.kv||(this.Zf.addEventListener("touchstart",t=>this.yv(t.touches),{passive:!0}),this.Zf.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.Cf&&void 0!==this.Hf.Sv){let e=lf(t.touches[0],t.touches[1])/this.Tf;this.Hf.Sv(this.Cf,e),lm(t)}},{passive:!1}),this.Zf.addEventListener("touchend",t=>{this.yv(t.touches)}))}yv(t){1===t.length&&(this.Pf=!1),2!==t.length||this.Pf||this.ff?this.Cv():this.Tv(t)}Tv(t){let e=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Tf=lf(t[0],t[1]),void 0!==this.Hf.xv&&this.Hf.xv(),this.Kf()}Cv(){null!==this.Cf&&(this.Cf=null,void 0!==this.Hf.kv&&this.Hf.kv())}gv(t){if(this.Sf&&this.Sf(),this.Lf(t)||!this.Bf)return;let e=this.Ef(t);this.Uf(e,this.Hf.Pv),this.Bf=!ls()}vv(t){let e=lv(t.touches,eg(this.Of));if(null===e)return;let i=this.Ef(t,e);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:lg(t)<this.Vf+500}Wf(t,e){e&&e.call(this.Hf,t)}Uf(t,e){e&&e.call(this.Hf,t)}Ef(t,e){let i=e||t,s=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Dv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Vv:t.type,Ov:i.target,Bv:t.view,Av:()=>{"touchstart"!==t.type&&lm(t)}}}}function lf(t,e){let i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function lm(t){t.cancelable&&t.preventDefault()}function lp(t){return{nt:t.pageX,st:t.pageY}}function lg(t){return t.timeStamp||performance.now()}function lv(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function lb(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function lx(t,e){return i=>{var s,l,n,r;return(null!=(l=null==(s=i.Dt())?void 0:s.Pa())?l:"")!==e?[]:null!=(r=null==(n=i.da)?void 0:n.call(i,t))?r:[]}}function ly(t,e,i,s){if(!t.length)return;let l=0,n=i/2,r=t[0].At(s,!0),h=1===e?n-(t[0].Vi()-r/2):t[0].Vi()-r/2-n;h=Math.max(0,h);for(let n=1;n<t.length;n++){let r=t[n],a=t[n-1],o=a.At(s,!1),u=r.Vi(),c=a.Vi();if(1===e?u>c-o:u<c+o){let s=c-o*e;r.Oi(s);let n=s-e*o/2;if((1===e?n<0:n>i)&&h>0){let s=Math.min(1===e?-1-n:n-i,h);for(let i=l;i<t.length;i++)t[i].Oi(t[i].Vi()+e*s);h-=s}}else l=n,h=1===e?c-o-u:u-(c+o)}}class lw{constructor(t,e,i,s){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new iI(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=t,this.cn=e,this.ko=e.layout,this.Oc=i,this.qv="left"===s,this.Yv=lx("normal",s),this.Zv=lx("top",s),this.Xv=lx("bottom",s),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=lh(this.Kv,t9({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);let l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=lh(this.Kv,t9({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);let n=this.Jv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0";let r={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new ld(this.Jv.canvasElement,r,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),la(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),la(this.Gv.canvasElement),this.Gv.dispose(),null!==this.Li&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){let t=this.Oc.W();return this.Qr!==t.R&&(this.Fv.nr(),this.Qr=t.R),t}op(){var t,e;if(null===this.Li)return 0;let i=0,s=this.ap(),l=eg(this.Gv.canvasElement.getContext("2d"));l.save();let n=this.Li.Ha();l.font=this._p(),n.length>0&&(i=Math.max(this.Fv.xi(l,n[0].so),this.Fv.xi(l,n[n.length-1].so)));let r=this.up();for(let t=r.length;t--;){let e=this.Fv.xi(l,r[t].Kt());e>i&&(i=e)}let h=this.Li.Ct();if(null!==h&&null!==this.Ev&&2!==(t=this.cn.crosshair).mode&&t.horzLine.visible&&t.horzLine.labelVisible){let t=this.Li.pn(1,h),e=this.Li.pn(this.Ev.height-2,h);i=Math.max(i,this.Fv.xi(l,this.Li.Fi(Math.floor(Math.min(t,e))+.11111111111111,h)),this.Fv.xi(l,this.Li.Fi(Math.ceil(Math.max(t,e))-.11111111111111,h)))}l.restore();let a=i||34;return(e=Math.ceil(s.C+s.T+s.A+s.I+5+a))+e%2}cp(t){null!==this.Ev&&t8(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`)}dp(){return eg(this.Ev).width}Gi(t){this.Li!==t&&(null!==this.Li&&this.Li.Ko().p(this),this.Li=t,t.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){let t=this.tn.fp();this.tn.$v().$t().E_(t,eg(this.Dt()))}vp(t){if(null===this.Ev)return;if(1!==t){this.pp(),this.Gv.applySuggestedBitmapSize();let t=es(this.Gv);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.mp(t),this.Ie(t)}),this.tn.bp(t,this.Xv),this.wp(t),this.tn.bp(t,this.Yv),this.gp(t))}this.Jv.applySuggestedBitmapSize();let e=es(this.Jv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.Mp(e),this.tn.bp(e,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(t,e,i){let s=this.xp();s.width>0&&s.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}bt(){var t;null==(t=this.Li)||t.Ha()}Qv(t){if(null===this.Li||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,e.V_(i,this.Li,t.localY)}tp(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.$v().$t(),i=this.tn.fp(),s=this.Li;e.O_(i,s,t.localY)}ip(){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let t=this.tn.$v().$t(),e=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,t.B_(e,i))}np(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,e.B_(i,this.Li)}sp(t){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(t){null!==this.Li&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(t){this.kp(0)}up(){let t=[],e=null===this.Li?void 0:this.Li;return(i=>{for(let s=0;s<i.length;++s){let l=i[s].Rn(this.tn.fp(),e);for(let e=0;e<l.length;e++)t.push(l[e])}})(this.tn.fp().Uo()),t}mp({context:t,bitmapSize:e}){let{width:i,height:s}=e,l=this.tn.fp().$t(),n=l.q(),r=l.bd();n===r?eG(t,0,0,i,s,n):eQ(t,0,0,i,s,n,r)}Ie({context:t,bitmapSize:e,horizontalPixelRatio:i}){let s;if(null===this.Ev||null===this.Li||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;let l=Math.max(1,Math.floor(this.ap().C*i));s=this.qv?e.width-l:0,t.fillRect(s,0,l,e.height)}wp(t){if(null===this.Ev||null===this.Li)return;let e=this.Li.Ha(),i=this.Li.W(),s=this.ap(),l=this.qv?this.Ev.width-s.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:n,verticalPixelRatio:r})=>{t.fillStyle=i.borderColor;let h=Math.max(1,Math.floor(r)),a=Math.floor(.5*r),o=Math.round(s.T*n);for(let i of(t.beginPath(),e))t.rect(Math.floor(l*n),Math.round(i.Ea*r)-a,o,h);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{var n;t.font=this._p(),t.fillStyle=null!=(n=i.textColor)?n:this.ko.textColor,t.textAlign=this.qv?"right":"left",t.textBaseline="middle";let r=this.qv?Math.round(l-s.A):Math.round(l+s.T+s.A),h=e.map(e=>this.Fv.Mi(t,e.so));for(let i=e.length;i--;){let s=e[i];t.fillText(s.so,r,s.Ea+h[i])}})}pp(){if(null===this.Ev||null===this.Li)return;let t=[],e=this.Li.Uo().slice(),i=this.tn.fp(),s=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(t=>{i.vr(t)&&e.push(t)});let l=this.Li;e.forEach(e=>{e.Rn(i,l).forEach(e=>{e.Oi(null),e.Bi()&&t.push(e)})}),t.forEach(t=>t.Oi(t.ki())),this.Li.W().alignLabels&&this.yp(t,s)}yp(t,e){if(null===this.Ev)return;let i=this.Ev.height/2,s=t.filter(t=>t.ki()<=i),l=t.filter(t=>t.ki()>i);for(let i of(s.sort((t,e)=>e.ki()-t.ki()),l.sort((t,e)=>t.ki()-e.ki()),t)){let t=Math.floor(i.At(e)/2),s=i.ki();s>-t&&s<t&&i.Oi(t),s>this.Ev.height-t&&s<this.Ev.height+t&&i.Oi(this.Ev.height-t)}ly(s,1,this.Ev.height,e),ly(l,-1,this.Ev.height,e)}gp(t){if(null===this.Ev)return;let e=this.up(),i=this.ap(),s=this.qv?"right":"left";e.forEach(e=>{e.Ai()&&e.gt(eg(this.Li)).X(t,i,this.Fv,s)})}Mp(t){if(null===this.Ev||null===this.Li)return;let e=this.tn.$v().$t(),i=[],s=this.tn.fp(),l=e.Zc().Rn(s,this.Li);l.length&&i.push(l);let n=this.ap(),r=this.qv?"right":"left";i.forEach(e=>{e.forEach(e=>{e.gt(eg(this.Li)).X(t,n,this.Fv,r)})})}kp(t){this.Kv.style.cursor=1===t?"ns-resize":"default"}fo(){let t=this.op();this.Wv<t&&this.tn.$v().$t().Kl(),this.Wv=t}_p(){return eD(this.ko.fontSize,this.ko.fontFamily)}}function lS(t,e){var i,s;return null!=(s=null==(i=t.ua)?void 0:i.call(t,e))?s:[]}function lM(t,e){var i,s;return null!=(s=null==(i=t.Pn)?void 0:i.call(t,e))?s:[]}function lz(t,e){var i,s;return null!=(s=null==(i=t.Ji)?void 0:i.call(t,e))?s:[]}function l_(t,e){var i,s;return null!=(s=null==(i=t.aa)?void 0:i.call(t,e))?s:[]}class lN{constructor(t,e){this.Ev=t9({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new eC,this.Op=new eC,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||null===this.Np||this.$i().Uh()},this.Uv=()=>{this.jv||null===this.Np||this.$i().Uh()},this.Qd=t,this.Np=e,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=lh(i,t9({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);let s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=lh(i,t9({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);let l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new ld(this.Jv.canvasElement,this,{ev:()=>null===this.Ip&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>null===this.Ip&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){null!==this.Cp&&this.Cp.S(),null!==this.Tp&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),la(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),la(this.Gv.canvasElement),this.Gv.dispose(),null!==this.Np&&this.Np.W_().p(this),this.hp.S()}fp(){return eg(this.Np)}qp(t){var e,i;null!==this.Np&&this.Np.W_().p(this),this.Np=t,null!==this.Np&&this.Np.W_().l(lN.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=null!=(e=this.Pp)?e:new lr(this.Wp,this.Qd),this.Pp.bt()):(null==(i=this.Pp)||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(null!==this.Np&&(this.Zp(),0!==this.$i().wt().length)){if(null!==this.Cp){let t=this.Np.R_();this.Cp.Gi(eg(t))}if(null!==this.Tp){let t=this.Np.D_();this.Tp.Gi(eg(t))}}}Xp(){null!==this.Cp&&this.Cp.bt(),null!==this.Tp&&this.Tp.bt()}M_(){return null!==this.Np?this.Np.M_():0}x_(t){this.Np&&this.Np.x_(t)}Qf(t){if(!this.Np)return;this.Kp();let e=t.localX,i=t.localY;this.Gp(e,i,t)}bv(t){this.Kp(),this.Jp(),this.Gp(t.localX,t.localY,t)}tv(t){var e;if(!this.Np)return;this.Kp();let i=t.localX,s=t.localY;this.Gp(i,s,t);let l=this.wr(i,s);this.Qd.Qp(null!=(e=null==l?void 0:l.Lv)?e:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(t){null!==this.Np&&(this.Kp(),this.tm(t))}qf(t){null!==this.Np&&this.im(this.Op,t)}jf(t){this.qf(t)}av(t){this.Kp(),this.nm(t),this.Gp(t.localX,t.localY,t)}cv(t){null!==this.Np&&(this.Kp(),this.Ap=!1,this.sm(t))}uv(t){null!==this.Np&&this.tm(t)}Rv(t){if(this.Ap=!0,null===this.Ip){let e={x:t.localX,y:t.localY};this.rm(e,e,t)}}Pv(t){null!==this.Np&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(t,e){if(!this.Qd.W().handleScale.pinch)return;let i=5*(e-this.Bp);this.Bp=e,this.$i().Qc(t.nt,i)}pv(t){this.Ap=!1,this.zp=null!==this.Ip,this.Jp();let e=this.$i().Zc();null!==this.Ip&&e.yt()&&(this.Lp={x:e.Yt(),y:e.Zt()},this.Ip={x:t.localX,y:t.localY})}hv(t){if(null===this.Np)return;let e=t.localX,i=t.localY;if(null===this.Ip)this.nm(t);else{this.zp=!1;let s=eg(this.Lp),l=s.x+(e-this.Ip.x),n=s.y+(i-this.Ip.y);this.Gp(l,n,t)}}_v(t){0===this.$v().W().trackingMode.exitMode&&(this.zp=!0),this.om(),this.sm(t)}wr(t,e){let i=this.Np;return null===i?null:function(t,e,i){let s=t.Uo(),l=function(t,e,i){var s,l,n,r;let h,a;for(let o of t)for(let t of null!=(l=null==(s=o.va)?void 0:s.call(o,e,i))?l:[])n=t.zOrder,(r=null==h?void 0:h.zOrder)&&("top"!==n||"top"===r)&&("normal"!==n||"bottom"!==r)||(h=t,a=o);return h&&a?{zv:h,Hc:a}:null}(s,e,i);if("top"===(null==l?void 0:l.zv.zOrder))return lb(l);for(let n of s){if(l&&l.Hc===n&&"bottom"!==l.zv.zOrder&&!l.zv.isBackground)return lb(l);let s=function(t,e,i){for(let s of t){let t=s.gt();if(null!==t&&t.wr){let l=t.wr(e,i);if(null!==l)return{Bv:s,Iv:l}}}return null}(n.Pn(t),e,i);if(null!==s)return{Hc:n,Bv:s.Bv,Iv:s.Iv};if(l&&l.Hc===n&&"bottom"!==l.zv.zOrder&&l.zv.isBackground)return lb(l)}return(null==l?void 0:l.zv)?lb(l):null}(i,t,e)}_m(t,e){eg("left"===e?this.Cp:this.Tp).cp(t9({width:t,height:this.Ev.height}))}um(){return this.Ev}cp(t){t8(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Wp.style.width=t.width+"px",this.Wp.style.height=t.height+"px")}dm(){let t=eg(this.Np);for(let e of(t.P_(t.R_()),t.P_(t.D_()),t.Ba()))if(t.vr(e)){let i=e.Dt();null!==i&&t.P_(i),e.Vn()}}xp(){return this.Gv.bitmapSize}Sp(t,e,i){let s=this.xp();s.width>0&&s.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}vp(t){if(0===t||null===this.Np)return;if(t>1&&this.dm(),null!==this.Cp&&this.Cp.vp(t),null!==this.Tp&&this.Tp.vp(t),1!==t){this.Gv.applySuggestedBitmapSize();let t=es(this.Gv);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.mp(t)}),this.Np&&(this.fm(t,lS),this.vm(t),this.pm(t),this.fm(t,lM),this.fm(t,lz)))}this.Jv.applySuggestedBitmapSize();let e=es(this.Jv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.bm(e),this.fm(e,l_))}wm(){return this.Cp}gm(){return this.Tp}bp(t,e){this.fm(t,e)}Fp(){null!==this.Np&&this.Np.W_().p(this),this.Np=null}tm(t){this.im(this.Vp,t)}im(t,e){let i=e.localX,s=e.localY;t.M()&&t.m(this.$i().St().Nu(i),{x:i,y:s},e)}mp({context:t,bitmapSize:e}){let{width:i,height:s}=e,l=this.$i(),n=l.q(),r=l.bd();n===r?eG(t,0,0,i,s,r):eQ(t,0,0,i,s,n,r)}vm(t){let e=eg(this.Np).j_().qh().gt();null!==e&&e.X(t,!1)}pm(t){let e=this.$i().Yc();this.Mm(t,lM,lo,e),this.Mm(t,lM,lu,e)}bm(t){this.Mm(t,lM,lu,this.$i().Zc())}fm(t,e){let i=eg(this.Np).Uo();for(let s of i)this.Mm(t,e,lo,s);for(let s of i)this.Mm(t,e,lu,s)}Mm(t,e,i,s){let l=eg(this.Np),n=l.$t().Wc(),r=null!==n&&n.Hc===s,h=null!==n&&r&&void 0!==n.Iv?n.Iv.Mr:void 0;lc(e,e=>i(e,t,r,h),s,l)}Zp(){if(null===this.Np)return;let t=this.Qd,e=this.Np.R_().W().visible,i=this.Np.D_().W().visible;e||null===this.Cp||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||null===this.Tp||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);let s=t.$t().ud();e&&null===this.Cp&&(this.Cp=new lw(this,t.W(),s,"left"),this.jp.appendChild(this.Cp.lp())),i&&null===this.Tp&&(this.Tp=new lw(this,t.W(),s,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(t){return t.Dv&&this.Ap||null!==this.Ip}Sm(t){return Math.max(0,Math.min(t,this.Ev.width-1))}km(t){return Math.max(0,Math.min(t,this.Ev.height-1))}Gp(t,e,i){this.$i().ld(this.Sm(t),this.km(e),i,eg(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(t,e,i){this.Ip=t,this.zp=!1,this.Gp(e.x,e.y,i);let s=this.$i().Zc();this.Lp={x:s.Yt(),y:s.Zt()}}$i(){return this.Qd.$t()}sm(t){if(!this.Dp)return;let e=this.$i(),i=this.fp();if(e.z_(i,i.vn()),this.Rp=null,this.Dp=!1,e.ed(),null!==this.Ep){let t=performance.now(),i=e.St();this.Ep.Vr(i.Hu(),t),this.Ep.Qu(t)||e.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)eg(document.activeElement).blur();else{let t=document.getSelection();null!==t&&t.removeAllRanges()}this.Np.vn().Ni()||this.$i().St().Ni()}}nm(t){if(null===this.Np)return;let e=this.$i(),i=e.St();if(i.Ni())return;let s=this.Qd.W(),l=s.handleScroll,n=s.kineticScroll;if((!l.pressedMouseMove||t.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Dv))return;let r=this.Np.vn(),h=performance.now();if(null!==this.Rp||this.xm(t)||(this.Rp={x:t.clientX,y:t.clientY,Od:h,ym:t.localX,Cm:t.localY}),null!==this.Rp&&!this.Dp&&(this.Rp.x!==t.clientX||this.Rp.y!==t.clientY)){if(t.Dv&&n.touch||!t.Dv&&n.mouse){let t=i.le();this.Ep=new ln(.2/t,7/t,.997,15/t),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;r.Ni()||e.A_(this.Np,r,t.localY),e.nd(t.localX),this.Dp=!0}this.Dp&&(r.Ni()||e.I_(this.Np,r,t.localY),e.sd(t.localX),null!==this.Ep&&this.Ep.Yd(i.Hu(),h))}}class lk{constructor(t,e,i,s,l){this.ft=!0,this.Ev=t9({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv="left"===t,this.Oc=i.ud,this.cn=e,this.Tm=s,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=lh(this.Kv,t9({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),la(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(t){t8(this.Ev,t)||(this.Ev=t,this.Gv.resizeCanvasElement(t),this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`,this.ft=!0)}vp(t){if(t<3&&!this.ft||0===this.Ev.width||0===this.Ev.height)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();let e=es(this.Gv);null!==e&&e.useBitmapCoordinateSpace(t=>{this.mp(t),this.Ie(t)})}xp(){return this.Gv.bitmapSize}Sp(t,e,i){let s=this.xp();s.width>0&&s.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}Ie({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.Tm())return;t.fillStyle=this.cn.timeScale.borderColor;let l=Math.floor(this.Oc.W().C*i),n=Math.floor(this.Oc.W().C*s),r=this.qv?e.width-l:0;t.fillRect(r,0,l,n)}mp({context:t,bitmapSize:e}){eG(t,0,0,e.width,e.height,this.Pm())}}function lC(t){return e=>{var i,s;return null!=(s=null==(i=e.fa)?void 0:i.call(e,t))?s:[]}}let lj=lC("normal"),lE=lC("top"),lL=lC("bottom");class lP{constructor(t,e){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=t9({width:0,height:0}),this.Om=new eC,this.Fv=new iI(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=t,this.q_=e,this.cn=t.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=lh(this.Im,t9({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);let i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=lh(this.Im,t9({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);let s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new ld(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),null!==this.Rm&&this.Rm.S(),null!==this.Dm&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),la(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),la(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(t){if(this.Vm)return;this.Vm=!0;let e=this.Qd.$t();!e.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&e.Jc(t.localX)}pv(t){this.bv(t)}wv(){let t=this.Qd.$t();!t.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&t.hd())}av(t){let e=this.Qd.$t();!e.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&e.rd(t.localX)}hv(t){this.av(t)}cv(){this.Vm=!1;let t=this.Qd.$t();t.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||t.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(t,e,i){t8(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`,this.Om.m(t)),null!==this.Rm&&this.Rm.cp(t9({width:e,height:t.height})),null!==this.Dm&&this.Dm.cp(t9({width:i,height:t.height}))}Wm(){let t=this.jm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(t,e,i){let s=this.xp();s.width>0&&s.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}vp(t){if(0===t)return;if(1!==t){this.Gv.applySuggestedBitmapSize();let e=es(this.Gv);null!==e&&(e.useBitmapCoordinateSpace(t=>{this.mp(t),this.Ie(t),this.$m(e,lL)}),this.wp(e),this.$m(e,lj)),null!==this.Rm&&this.Rm.vp(t),null!==this.Dm&&this.Dm.vp(t)}this.Jv.applySuggestedBitmapSize();let e=es(this.Jv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],e),this.$m(e,lE))}$m(t,e){let i=this.Qd.$t().wt();for(let s of i)lc(e,e=>lo(e,t,!1,void 0),s,void 0);for(let s of i)lc(e,e=>lu(e,t,!1,void 0),s,void 0)}mp({context:t,bitmapSize:e}){eG(t,0,0,e.width,e.height,this.Qd.$t().bd())}Ie({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){t.fillStyle=this.qm();let s=Math.max(1,Math.floor(this.jm().C*i));t.fillRect(0,0,e.width,s)}}wp(t){let e=this.Qd.$t().St(),i=e.Ha();if(!i||0===i.length)return;let s=this.q_.maxTickMarkWeight(i),l=this.jm(),n=e.W();n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.qm(),t.fillStyle=this.qm();let n=Math.max(1,Math.floor(e)),r=Math.floor(.5*e);t.beginPath();let h=Math.round(l.T*s);for(let s=i.length;s--;){let l=Math.round(i[s].coord*e);t.rect(l-r,0,n,h)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{let e=l.C+l.T+l.L+l.P/2;for(let l of(t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this._p(),i))if(l.weight<s){let i=l.needAlignCoordinate?this.Ym(t,l.coord,l.label):l.coord;t.fillText(l.label,i,e)}for(let l of(this.Qd.W().timeScale.allowBoldLabels&&(t.font=this.Zm()),i))if(l.weight>=s){let i=l.needAlignCoordinate?this.Ym(t,l.coord,l.label):l.coord;t.fillText(l.label,i,e)}})}Ym(t,e,i){let s=this.Fv.xi(t,i),l=Math.floor(e-s/2)+.5;return l<0?e+=Math.abs(0-l):l+s>this.Ev.width&&(e-=Math.abs(this.Ev.width-(l+s))),e}Um(t,e){let i=this.jm();for(let s of t)for(let t of s.Qi())t.gt().X(e,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return eD(this.j(),this.cn.fontFamily)}Zm(){return eD(this.j(),this.cn.fontFamily,"bold")}jm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new iI,Hm:0});let t=this.k,e=this._p();if(t.R!==e){let i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.ji=9*i/12,t.N=0,t.Hm=4*i/12,t.Wi.nr()}return this.k}kp(t){this.Kv.style.cursor=1===t?"ew-resize":"default"}zm(){let t=this.Qd.$t(),e=t.W();e.leftPriceScale.visible||null===this.Rm||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),e.rightPriceScale.visible||null===this.Dm||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);let i={ud:this.Qd.$t().ud()},s=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,l=()=>t.bd();e.leftPriceScale.visible&&null===this.Rm&&(this.Rm=new lk("left",e,i,s,l),this.Bm.appendChild(this.Rm.lp())),e.rightPriceScale.visible&&null===this.Dm&&(this.Dm=new lk("right",e,i,s,l),this.Am.appendChild(this.Dm.lp()))}}let l$=!!le&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!le&&((null==(f=null==navigator?void 0:navigator.userAgentData)?void 0:f.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class lR{constructor(t,e,i){var s;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new eC,this.Op=new eC,this.Rc=new eC,this.ib=null,this.nb=null,this.Jd=t,this.cn=e,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(s=this.Xd).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),lV(this.cn)&&this.hb(!0),this.$i=new sJ(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new lP(this,this.q_),this.sb.appendChild(this.ab.lp());let l=e.autoSize&&this.ob(),n=this.cn.width,r=this.cn.height;if(l||0===n||0===r){let e=t.getBoundingClientRect();n=n||e.width,r=r||e.height}this._b(n,r),this.ub(),t.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){for(let t of(this.hb(!1),0!==this.Km&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S(),this.Xm))this.sb.removeChild(t.lp()),t.lm().p(this),t.am().p(this),t.S();this.Xm=[],eg(this.ab).S(),null!==this.Xd.parentElement&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(t,e,i=!1){if(this.ho===e&&this.__===t)return;let s=function(t){let e=Math.floor(t.width),i=Math.floor(t.height);return t9({width:e-e%2,height:i-i%2})}(t9({width:t,height:e}));this.ho=s.height,this.__=s.width;let l=this.ho+"px",n=this.__+"px";eg(this.Xd).style.height=l,eg(this.Xd).style.width=n,this.sb.style.height=l,this.sb.style.width=n,i?this.mb(e9.es(),performance.now()):this.$i.Kl()}vp(t){void 0===t&&(t=e9.es());for(let e=0;e<this.Xm.length;e++)this.Xm[e].vp(t.Hn(e).Fn);this.cn.timeScale.visible&&this.ab.vp(t.jn())}$h(t){let e=lV(this.cn);this.$i.$h(t);let i=lV(this.cn);i!==e&&this.hb(i),this.cb(),this.bb(t)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){null!==this.Qm&&(this.mb(this.Qm,performance.now()),this.Qm=null);let t=this.gb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=eg(e.getContext("2d"));return this.gb(i),e}Mb(t){return("left"!==t||this.xb())&&("right"!==t||this.Sb())&&0!==this.Xm.length?eg("left"===t?this.Xm[0].wm():this.Xm[0].gm()).dp():0}kb(){return this.cn.autoSize&&null!==this.ib}yb(){return this.Xd}Qp(t){this.nb=t,this.nb?this.yb().style.setProperty("cursor",t):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return ep(this.Xm[0]).um()}bb(t){(void 0!==t.autoSize||!this.ib||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.ib&&this.ob(),!1===t.autoSize&&null!==this.ib&&this.pb(),t.autoSize||void 0===t.width&&void 0===t.height||this._b(t.width||this.__,t.height||this.ho))}gb(t){let e=0,i=0,s=this.Xm[0],l=(e,i)=>{let s=0;for(let l=0;l<this.Xm.length;l++){let n=this.Xm[l],r=eg("left"===e?n.wm():n.gm()),h=r.xp();null!==t&&r.Sp(t,i,s),s+=h.height}};this.xb()&&(l("left",0),e+=eg(s.wm()).xp().width);for(let s=0;s<this.Xm.length;s++){let l=this.Xm[s],n=l.xp();null!==t&&l.Sp(t,e,i),i+=n.height}e+=s.xp().width,this.Sb()&&(l("right",e),e+=eg(s.gm()).xp().width);let n=(e,i,s)=>{eg("left"===e?this.ab.Lm():this.ab.Em()).Sp(eg(t),i,s)};if(this.cn.timeScale.visible){let e=this.ab.xp();if(null!==t){let l=0;this.xb()&&(n("left",l,i),l=eg(s.wm()).xp().width),this.ab.Sp(t,l,i),l+=e.width,this.Sb()&&n("right",l,i)}i+=e.height}return t9({width:e,height:i})}Pb(){var t,e,i;let s=0,l=0,n=0;for(let t of this.Xm)this.xb()&&(l=Math.max(l,eg(t.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,eg(t.gm()).op(),this.cn.rightPriceScale.minimumWidth)),s+=t.M_();l=(e=l)+e%2,n=(i=n)+i%2;let r=this.__,h=this.ho,a=Math.max(r-l-n,0),o=this.cn.timeScale.visible,u=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0,c=0+(u=(t=u)+t%2),d=h<c?0:h-c,f=d/s,m=0;for(let t=0;t<this.Xm.length;++t){let e=this.Xm[t];e.qp(this.$i.qc()[t]);let i=0,s=0;i=Math.max(t===this.Xm.length-1?d-m:Math.round(e.M_()*f),2),m+=i,e.cp(t9({width:a,height:i})),this.xb()&&e._m(l,"left"),this.Sb()&&e._m(n,"right"),e.fp()&&this.$i.Kc(e.fp(),i)}this.ab.Fm(t9({width:o?a:0,height:u}),o?l:0,o?n:0),this.$i.S_(a),this.Gm!==l&&(this.Gm=l),this.Jm!==n&&(this.Jm=n)}hb(t){t?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return l$?1/window.devicePixelRatio:1}rb(t){if(!(0!==t.deltaX&&this.cn.handleScroll.mouseWheel||0!==t.deltaY&&this.cn.handleScale.mouseWheel))return;let e=this.Rb(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.cn.handleScale.mouseWheel){let e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(i,e)}0!==i&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(t,e){var i;let s=t.jn();3===s&&this.Db(),3!==s&&2!==s||(this.Vb(t),this.Ob(t,e),this.ab.bt(),this.Xm.forEach(t=>{t.Xp()}),3===(null==(i=this.Qm)?void 0:i.jn())&&(this.Qm.ts(t),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,e),t=this.Qm,this.Qm=null)),this.vp(t)}Ob(t,e){for(let i of t.Qn())this.ns(i,e)}Vb(t){let e=this.$i.qc();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].N_()}ns(t,e){let i=this.$i.St();switch(t.qn){case 0:i.hc();break;case 1:i.lc(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.qu();break;case 5:t.Vt.Qu(e)||i.Jn(t.Vt.tc(e))}}Vc(t){null!==this.Qm?this.Qm.ts(t):this.Qm=t,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(t=>{if(this.tb=!1,this.Km=0,null!==this.Qm){let e=this.Qm;for(let i of(this.Qm=null,this.mb(e,t),e.Qn()))if(5===i.qn&&!i.Vt.Qu(t)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){let t=this.$i.qc(),e=t.length,i=this.Xm.length;for(let t=e;t<i;t++){let t=ep(this.Xm.pop());this.sb.removeChild(t.lp()),t.lm().p(this),t.am().p(this),t.S()}for(let s=i;s<e;s++){let e=new lN(this,t[s]);e.lm().l(this.Bb.bind(this),this),e.am().l(this.Ab.bind(this),this),this.Xm.push(e),this.sb.insertBefore(e.lp(),this.ab.lp())}for(let i=0;i<e;i++){let e=t[i],s=this.Xm[i];s.fp()!==e?s.qp(e):s.Up()}this.cb(),this.Pb()}Ib(t,e,i){var s;let l,n=new Map;if(null!==t&&this.$i.wt().forEach(e=>{let i=e.In().ll(t);null!==i&&n.set(e,i)}),null!==t){let e=null==(s=this.$i.St().Ui(t))?void 0:s.originalTime;void 0!==e&&(l=e)}let r=this.$t().Wc();return{zb:l,ee:null!=t?t:void 0,Lb:null!=e?e:void 0,Eb:null!==r&&r.Hc instanceof sx?r.Hc:void 0,Nb:n,Fb:null!==r&&void 0!==r.Iv?r.Iv.gr:void 0,Wb:null!=i?i:void 0}}Bb(t,e,i){this.Vp.m(()=>this.Ib(t,e,i))}Ab(t,e,i){this.Op.m(()=>this.Ib(t,e,i))}lb(t,e,i){this.Rc.m(()=>this.Ib(t,e,i))}cb(){let t=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=t}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(t=>{let e=t.find(t=>t.target===this.Jd);e&&this._b(e.contentRect.width,e.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){null!==this.ib&&this.ib.disconnect(),this.ib=null}}function lV(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function lT(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(s=Object.getOwnPropertySymbols(t);l<s.length;l++)0>e.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(i[s[l]]=t[s[l]])}return i}function lW(t,e,i,s){let l=i.value,n={ee:e,ot:t,Vt:[l,l,l,l],zb:s};return void 0!==i.color&&(n.V=i.color),n}function lD(t,e,i,s){let l=i.value,n={ee:e,ot:t,Vt:[l,l,l,l],zb:s};return void 0!==i.lineColor&&(n.lt=i.lineColor),void 0!==i.topColor&&(n.Ps=i.topColor),void 0!==i.bottomColor&&(n.Rs=i.bottomColor),n}function lB(t,e,i,s){let l=i.value,n={ee:e,ot:t,Vt:[l,l,l,l],zb:s};return void 0!==i.topLineColor&&(n.Re=i.topLineColor),void 0!==i.bottomLineColor&&(n.De=i.bottomLineColor),void 0!==i.topFillColor1&&(n.ke=i.topFillColor1),void 0!==i.topFillColor2&&(n.ye=i.topFillColor2),void 0!==i.bottomFillColor1&&(n.Ce=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(n.Te=i.bottomFillColor2),n}function lI(t,e,i,s){let l={ee:e,ot:t,Vt:[i.open,i.high,i.low,i.close],zb:s};return void 0!==i.color&&(l.V=i.color),l}function lO(t,e,i,s){let l={ee:e,ot:t,Vt:[i.open,i.high,i.low,i.close],zb:s};return void 0!==i.color&&(l.V=i.color),void 0!==i.borderColor&&(l.Ot=i.borderColor),void 0!==i.wickColor&&(l.Xh=i.wickColor),l}function lF(t,e,i,s,l){let n=ep(l)(i),r=Math.max(...n),h=Math.min(...n),a=n[n.length-1],{time:o,color:u}=i;return{ee:e,ot:t,Vt:[a,r,h,a],zb:s,$e:lT(i,["time","color"]),V:u}}function lA(t){return void 0!==t.Vt}function lK(t,e){return void 0!==e.customValues&&(t.jb=e.customValues),t}function lH(t){return(e,i,s,l,n,r)=>{var h,a;return(h=s,(a=r)?a(h):void 0===h.open&&void 0===h.value)?lK({ot:e,ee:i,zb:l},s):lK(t(e,i,s,l,n),s)}}function lX(t){return({Candlestick:lH(lO),Bar:lH(lI),Area:lH(lD),Baseline:lH(lB),Histogram:lH(lW),Line:lH(lW),Custom:lH(lF)})[t]}function lq(t){return{ee:0,Hb:new Map,la:t}}function lG(t,e){if(void 0!==t&&0!==t.length)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function lU(t){let e;return t.forEach(t=>{void 0===e&&(e=t.zb)}),ep(e)}class lJ{constructor(t){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=t}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(t,e){let i=0!==this.qb.size,s=!1,l=this.Yb.get(t);if(void 0!==l)if(1===this.Yb.size)i=!1,s=!0,this.qb.clear();else for(let e of this.Xb)e.pointData.Hb.delete(t)&&(s=!0);let n=[];if(0!==e.length){let i=e.map(t=>t.time),l=this.q_.createConverterToInternalObj(e),r=lX(t.Qh()),h=t.Ca(),a=t.Ta();n=e.map((e,n)=>{let o=l(e.time),u=this.q_.key(o),c=this.qb.get(u);void 0===c&&(c=lq(o),this.qb.set(u,c),s=!0);let d=r(o,c.ee,e,i[n],h,a);return c.Hb.set(t,d),d})}i&&this.Gb(),this.Jb(t,n);let r=-1;if(s){let t=[];this.qb.forEach(e=>{t.push({timeWeight:0,time:e.la,pointData:e,originalTime:lU(e.Hb)})}),t.sort((t,e)=>this.q_.key(t.time)-this.q_.key(e.time)),r=this.Qb(t)}return this.tw(t,r,function(t,e,i){let s=lG(t,i),l=lG(e,i);if(void 0!==s&&void 0!==l)return{ta:s.Ub>=l.Ub&&s.$b>=l.$b}}(this.Yb.get(t),l,this.q_))}vd(t){return this.Kb(t,[])}iw(t,e){void 0===e.zb&&(e.zb=e.time),this.q_.preprocessData(e);let i=this.q_.createConverterToInternalObj([e])(e.time),s=this.Zb.get(t);if(void 0!==s&&this.q_.key(i)<this.q_.key(s))throw Error(`Cannot update oldest data, last time=${s}, new time=${i}`);let l=this.qb.get(this.q_.key(i)),n=void 0===l;void 0===l&&(l=lq(i),this.qb.set(this.q_.key(i),l));let r=lX(t.Qh()),h=t.Ca(),a=t.Ta(),o=r(i,l.ee,e,e.zb,h,a);l.Hb.set(t,o),this.nw(t,o);let u={ta:lA(o)};if(!n)return this.tw(t,-1,u);let c={timeWeight:0,time:l.la,pointData:l,originalTime:lU(l.Hb)},d=iv(this.Xb,this.q_.key(c.time),(t,e)=>this.q_.key(t.time)<e);this.Xb.splice(d,0,c);for(let t=d;t<this.Xb.length;++t)lQ(this.Xb[t].pointData,t);return this.q_.fillWeightsForPoints(this.Xb,d),this.tw(t,d,u)}nw(t,e){let i=this.Yb.get(t);void 0===i&&(i=[],this.Yb.set(t,i));let s=0!==i.length?i[i.length-1]:null;null===s||this.q_.key(e.ot)>this.q_.key(s.ot)?lA(e)&&i.push(e):lA(e)?i[i.length-1]=e:i.splice(-1,1),this.Zb.set(t,e.ot)}Jb(t,e){0!==e.length?(this.Yb.set(t,e.filter(lA)),this.Zb.set(t,e[e.length-1].ot)):(this.Yb.delete(t),this.Zb.delete(t))}Gb(){for(let t of this.Xb)0===t.pointData.Hb.size&&this.qb.delete(this.q_.key(t.time))}Qb(t){let e=-1;for(let i=0;i<this.Xb.length&&i<t.length;++i){let s=this.Xb[i],l=t[i];if(this.q_.key(s.time)!==this.q_.key(l.time)){e=i;break}l.timeWeight=s.timeWeight,lQ(l.pointData,i)}if(-1===e&&this.Xb.length!==t.length&&(e=Math.min(this.Xb.length,t.length)),-1===e)return -1;for(let i=e;i<t.length;++i)lQ(t[i].pointData,i);return this.q_.fillWeightsForPoints(t,e),this.Xb=t,e}sw(){if(0===this.Yb.size)return null;let t=0;return this.Yb.forEach(e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].ee))}),t}tw(t,e,i){let s={ew:new Map,St:{Eu:this.sw()}};if(-1!==e)this.Yb.forEach((e,l)=>{s.ew.set(l,{$e:e,rw:l===t?i:void 0})}),this.Yb.has(t)||s.ew.set(t,{$e:[],rw:i}),s.St.hw=this.Xb,s.St.lw=e;else{let e=this.Yb.get(t);s.ew.set(t,{$e:e||[],rw:i})}return s}}function lQ(t,e){t.ee=e,t.Hb.forEach(t=>{t.ee=e})}function lY(t){let e={value:t.Vt[3],time:t.zb};return void 0!==t.jb&&(e.customValues=t.jb),e}function lZ(t){let e=lY(t);return void 0!==t.V&&(e.color=t.V),e}function l0(t){let e=lY(t);return void 0!==t.lt&&(e.lineColor=t.lt),void 0!==t.Ps&&(e.topColor=t.Ps),void 0!==t.Rs&&(e.bottomColor=t.Rs),e}function l1(t){let e=lY(t);return void 0!==t.Re&&(e.topLineColor=t.Re),void 0!==t.De&&(e.bottomLineColor=t.De),void 0!==t.ke&&(e.topFillColor1=t.ke),void 0!==t.ye&&(e.topFillColor2=t.ye),void 0!==t.Ce&&(e.bottomFillColor1=t.Ce),void 0!==t.Te&&(e.bottomFillColor2=t.Te),e}function l2(t){let e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return void 0!==t.jb&&(e.customValues=t.jb),e}function l5(t){let e=l2(t);return void 0!==t.V&&(e.color=t.V),e}function l3(t){let e=l2(t),{V:i,Ot:s,Xh:l}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==l&&(e.wickColor=l),e}function l4(t){return({Area:l0,Line:lZ,Baseline:l1,Histogram:lZ,Bar:l5,Candlestick:l3,Custom:l6})[t]}function l6(t){let e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}let l9={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},l8={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},l7={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:eW,attributionLogo:!0},nt={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},ne={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},ni={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:eW,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function ns(){return{width:0,height:0,autoSize:!1,layout:l7,crosshair:l9,grid:l8,overlayPriceScales:Object.assign({},nt),leftPriceScale:Object.assign(Object.assign({},nt),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},nt),{visible:!0}),timeScale:ne,watermark:ni,localization:{locale:le?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class nl{constructor(t,e){this.aw=t,this.ow=e}applyOptions(t){this.aw.$t().$c(this.ow,t)}options(){return this.Li().W()}width(){return e6(this.ow)?this.aw.Mb(this.ow):0}Li(){return eg(this.aw.$t().Uc(this.ow)).Dt}}function nn(t,e,i){let s=Object.assign({time:e},lT(t,["time","originalTime"]));return void 0!==i&&(s.originalTime=i),s}let nr={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class nh{constructor(t){this.Nh=t}applyOptions(t){this.Nh.$h(t)}options(){return this.Nh.W()}_w(){return this.Nh}}class na{constructor(t,e,i,s,l){this.uw=new eC,this.Es=t,this.cw=e,this.dw=i,this.q_=l,this.fw=s}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(t){let e=this.Es.Ct();return null===e?null:this.Es.Dt().Rt(t,e.Vt)}coordinateToPrice(t){let e=this.Es.Ct();return null===e?null:this.Es.Dt().pn(t,e.Vt)}barsInLogicalRange(t){if(null===t)return null;let e=new sA(new sI(t.from,t.to)).lu(),i=this.Es.In();if(i.Ni())return null;let s=i.ll(e.Os(),1),l=i.ll(e.ui(),-1),n=eg(i.el()),r=eg(i.An());if(null!==s&&null!==l&&s.ee>l.ee)return{barsBefore:t.from-n,barsAfter:r-t.to};let h={barsBefore:null===s||s.ee===n?t.from-n:s.ee-n,barsAfter:null===l||l.ee===r?r-t.to:r-l.ee};return null!==s&&null!==l&&(h.from=s.zb,h.to=l.zb),h}setData(t){this.q_,this.Es.Qh(),this.cw.pw(this.Es,t),this.mw("full")}update(t){this.Es.Qh(),this.cw.bw(this.Es,t),this.mw("update")}dataByIndex(t,e){let i=this.Es.In().ll(t,e);return null===i?null:l4(this.seriesType())(i)}data(){let t=l4(this.seriesType());return this.Es.In().ne().map(e=>t(e))}subscribeDataChanged(t){this.uw.l(t)}unsubscribeDataChanged(t){this.uw.v(t)}setMarkers(t){this.q_;let e=t.map(t=>nn(t,this.q_.convertHorzItemToInternal(t.time),t.time));this.Es.na(e)}markers(){return this.Es.sa().map(t=>nn(t,t.originalTime,void 0))}applyOptions(t){this.Es.$h(t)}options(){return eR(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(t){let e=ej(eR(nr),t);return new nh(this.Es.ea(e))}removePriceLine(t){this.Es.ra(t._w())}seriesType(){return this.Es.Qh()}attachPrimitive(t){this.Es.ka(t),t.attached&&t.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(t){this.Es.ya(t),t.detached&&t.detached()}mw(t){this.uw.M()&&this.uw.m(t)}}class no{constructor(t,e,i){this.ww=new eC,this.mu=new eC,this.Om=new eC,this.$i=t,this.yl=t.St(),this.ab=e,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(t,e){e?this.yl.Ju(t,1e3):this.$i.Jn(t)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){let t=this.yl.Vu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.q_.convertHorzItemToInternal(t.from),to:this.q_.convertHorzItemToInternal(t.to)},i=this.yl.Iu(e);this.$i.pd(i)}getVisibleLogicalRange(){let t=this.yl.Du();return null===t?null:{from:t.Os(),to:t.ui()}}setVisibleLogicalRange(t){em(t.from<=t.to,"The from index cannot be after the to index."),this.$i.pd(t)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(t){let e=this.$i.St();return e.Ni()?null:e.It(t)}coordinateToLogical(t){return this.yl.Ni()?null:this.yl.Nu(t)}timeToCoordinate(t){let e=this.q_.convertHorzItemToInternal(t),i=this.yl.Va(e,!1);return null===i?null:this.yl.It(i)}coordinateToTime(t){let e=this.$i.St(),i=e.Nu(t),s=e.Ui(i);return null===s?null:s.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(t){this.ww.l(t)}unsubscribeVisibleTimeRangeChange(t){this.ww.v(t)}subscribeVisibleLogicalRangeChange(t){this.mu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.mu.v(t)}subscribeSizeChange(t){this.Om.l(t)}unsubscribeSizeChange(t){this.Om.v(t)}applyOptions(t){this.yl.$h(t)}options(){return Object.assign(Object.assign({},eR(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(t){this.Om.m(t.width,t.height)}}function nu(t){return function(t){if(e$(t.handleScale)){let e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){let{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;e$(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),e$(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}let e=t.handleScroll;e$(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}Object.assign(Object.assign({},ec),eu);var nc=i(33788);let nd=(0,tM.A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),nf=(0,tM.A)("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),nm=[];function np({symbol:t="DEMO",data:e=nm,height:i=400,showTimeframes:s=!0,showIndicators:l=!0,className:n=""}){let r=(0,p.useRef)(null);(0,p.useRef)(null),(0,p.useRef)(null),(0,p.useRef)(nm);let[h,a]=(0,p.useState)("1D"),[o,u]=(0,p.useState)("candlestick"),[c,d]=(0,p.useState)(!0),[f,v]=(0,p.useState)([]),{theme:b}=(0,nc.D)(),x=t=>{a(t)},y=f.length>0?f[f.length-1].close:0,w=f.length>1?f[f.length-2].close:y,S=y-w,M=w>0?S/w*100:0,z=S>=0;return(0,m.jsxs)("div",{className:`glass-card ${n}`,children:[(0,m.jsxs)("div",{className:"p-4 border-b border-white/10 dark:border-black/10",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",y.toFixed(2)]}),(0,m.jsxs)("div",{className:`flex items-center space-x-1 ${z?"text-success":"text-danger"}`,children:[z?(0,m.jsx)(tB,{className:"w-4 h-4"}):(0,m.jsx)(tI,{className:"w-4 h-4"}),(0,m.jsxs)("span",{className:"font-medium",children:[z?"+":"",S.toFixed(2)," (",M.toFixed(2),"%)"]})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(g.P.button,{onClick:()=>u("candlestick"),className:`p-2 rounded-md transition-colors duration-200 ${"candlestick"===o?"bg-destock-primary text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,whileTap:{scale:.95},children:(0,m.jsx)(nd,{className:"w-4 h-4"})}),(0,m.jsx)(g.P.button,{onClick:()=>u("line"),className:`p-2 rounded-md transition-colors duration-200 ${"line"===o?"bg-destock-primary text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,whileTap:{scale:.95},children:(0,m.jsx)(nf,{className:"w-4 h-4"})})]})]}),s&&(0,m.jsx)("div",{className:"flex space-x-1",children:["1H","4H","1D","1W","1M"].map(t=>(0,m.jsx)(g.P.button,{onClick:()=>x(t),className:`px-3 py-1 text-sm font-medium rounded-md transition-all duration-200 ${h===t?"bg-destock-primary text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,whileTap:{scale:.95},children:t},t))})]}),(0,m.jsxs)("div",{className:"relative",children:[c&&(0,m.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:(0,m.jsx)(tj,{})}),(0,m.jsx)(g.P.div,{ref:r,className:`${c?"opacity-30":"opacity-100"} transition-opacity duration-200`,initial:{opacity:0,scale:.95},animate:{opacity:c?.3:1,scale:1},transition:{duration:.3},style:{height:`${i}px`}})]}),(0,m.jsx)("div",{className:"p-4 border-t border-white/10 dark:border-black/10",children:(0,m.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Open"}),(0,m.jsxs)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:["$",f.length>0?f[f.length-1].open.toFixed(2):"0.00"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block",children:"High"}),(0,m.jsxs)("span",{className:"font-medium text-success",children:["$",f.length>0?f[f.length-1].high.toFixed(2):"0.00"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Low"}),(0,m.jsxs)("span",{className:"font-medium text-danger",children:["$",f.length>0?f[f.length-1].low.toFixed(2):"0.00"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Volume"}),(0,m.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:f.length>0?(f[f.length-1].volume||0).toLocaleString():"0"})]})]})})]})}function ng({className:t}){let[e,i]=(0,p.useState)([]),[s,l]=(0,p.useState)(!0),n=t=>t>5?"from-green-500 to-green-600":t>2?"from-green-400 to-green-500":t>0?"from-green-300 to-green-400":t>-2?"from-red-300 to-red-400":t>-5?"from-red-400 to-red-500":"from-red-500 to-red-600",r=t=>Math.abs(t)>3?"text-white":"text-gray-800";return s?(0,m.jsxs)("div",{className:`glass-card p-6 ${t}`,children:[(0,m.jsx)("h3",{className:"text-xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Market Heat Map"}),(0,m.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:[...Array(12)].map((t,e)=>(0,m.jsx)("div",{className:"aspect-square rounded-lg bg-gray-700/30 animate-pulse"},e))})]}):(0,m.jsxs)(g.P.div,{className:`glass-card p-6 ${t}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,m.jsx)("h3",{className:"text-xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Market Heat Map"}),(0,m.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:e.map((t,e)=>(0,m.jsxs)(g.P.div,{className:`
              aspect-square rounded-lg p-2 cursor-pointer
              bg-gradient-to-br ${n(t.change)}
              hover:scale-105 transition-all duration-200
              flex flex-col justify-between
              ${r(t.change)}
            `,style:{minHeight:`${Math.max(t.size,60)}px`,opacity:.8+Math.abs(t.change)/20*.2},initial:{opacity:0,scale:.8},animate:{opacity:.8+Math.abs(t.change)/20*.2,scale:1},transition:{duration:.3,delay:.05*e},whileHover:{scale:1.05,opacity:1,transition:{duration:.2}},title:`${t.name} (${t.symbol}): ${t.change>0?"+":""}${t.change.toFixed(2)}%`,children:[(0,m.jsx)("div",{className:"text-xs font-semibold truncate",children:t.symbol}),(0,m.jsxs)("div",{className:"text-xs font-bold",children:[t.change>0?"+":"",t.change.toFixed(1),"%"]})]},t.id))}),(0,m.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-400",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)("div",{className:"w-3 h-3 rounded bg-gradient-to-r from-green-400 to-green-500"}),(0,m.jsx)("span",{children:"Positive"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)("div",{className:"w-3 h-3 rounded bg-gradient-to-r from-red-400 to-red-500"}),(0,m.jsx)("span",{children:"Negative"})]})]}),(0,m.jsx)("div",{className:"text-xs",children:"Size = Market Cap | Color = 24h Change"})]})]})}function nv({speed:t=50,direction:e="left",className:i="",pauseOnHover:s=!0}){let[l,n]=(0,p.useState)([]),[r,h]=(0,p.useState)(!1),[a,o]=(0,p.useState)(!0);return a?(0,m.jsx)("div",{className:`glass-card h-16 flex items-center justify-center ${i}`,children:(0,m.jsx)("div",{className:"flex space-x-4",children:Array.from({length:5}).map((t,e)=>(0,m.jsxs)("div",{className:"flex space-x-2 animate-pulse",children:[(0,m.jsx)("div",{className:"w-12 h-4 bg-gray-300 dark:bg-gray-600 rounded"}),(0,m.jsx)("div",{className:"w-16 h-4 bg-gray-300 dark:bg-gray-600 rounded"}),(0,m.jsx)("div",{className:"w-12 h-4 bg-gray-300 dark:bg-gray-600 rounded"})]},e))})}):(0,m.jsxs)("div",{className:`glass-card overflow-hidden relative ${i}`,onMouseEnter:()=>s&&h(!0),onMouseLeave:()=>s&&h(!1),children:[(0,m.jsx)("div",{className:"h-16 flex items-center",children:(0,m.jsx)(g.P.div,{className:"flex space-x-8 whitespace-nowrap",animate:{x:"left"===e?"-50%":"50%"},transition:{duration:t,repeat:1/0,ease:"linear"},style:{animationPlayState:r?"paused":"running"},children:[...l,...l].map((t,e)=>(0,m.jsxs)(g.P.div,{className:"flex items-center space-x-3 min-w-fit",whileHover:s?{scale:1.05}:{},children:[(0,m.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t.symbol}),(0,m.jsx)(tZ,{value:t.price,format:"currency",decimals:2,className:"font-medium text-gray-900 dark:text-gray-100"}),(0,m.jsxs)("div",{className:`flex items-center space-x-1 ${t.change>=0?"text-success":"text-danger"}`,children:[t.change>=0?(0,m.jsx)(tB,{className:"w-3 h-3"}):(0,m.jsx)(tI,{className:"w-3 h-3"}),(0,m.jsxs)("span",{className:"text-sm font-medium",children:[t.change>=0?"+":"",t.change.toFixed(2)]}),(0,m.jsxs)("span",{className:"text-sm",children:["(",t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%)"]})]}),(0,m.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Vol: ",(t.volume/1e6).toFixed(1),"M"]})]},`${t.symbol}-${e}`))})}),(0,m.jsx)("div",{className:"absolute left-0 top-0 w-12 h-full bg-gradient-to-r from-white/80 dark:from-gray-900/80 to-transparent pointer-events-none"}),(0,m.jsx)("div",{className:"absolute right-0 top-0 w-12 h-full bg-gradient-to-l from-white/80 dark:from-gray-900/80 to-transparent pointer-events-none"})]})}function nb(){let t=(0,p.useMemo)(()=>[{id:"trading",title:"Trading Interface",component:(0,m.jsx)(t1,{}),defaultSize:40,minSize:30},{id:"chart",title:"Price Chart",component:(0,m.jsx)(np,{symbol:"DSTK",height:350}),defaultSize:60,minSize:40}],[]),e=(0,p.useMemo)(()=>[{id:"companies",title:"Market Overview",component:(0,m.jsx)(t6,{}),defaultSize:60,minSize:50},{id:"heatmap",title:"Market Heat Map",component:(0,m.jsx)(ng,{}),defaultSize:40,minSize:30}],[]);return(0,m.jsxs)(g.P.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,m.jsxs)(g.P.div,{className:"text-center glass-card p-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:[(0,m.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Welcome to DeStock"}),(0,m.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-4xl mx-auto",children:"The professional decentralized trading platform with advanced charting, real-time analytics, and seamless Web3 integration. Trade company shares using DSTK tokens with institutional-grade tools."})]}),(0,m.jsx)(g.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:(0,m.jsx)(nv,{})}),(0,m.jsx)(g.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.5},children:(0,m.jsx)(tL,{widgets:t})}),(0,m.jsx)(g.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:(0,m.jsx)(tL,{widgets:e,layout:"grid"})})]})}},27910:t=>{"use strict";t.exports=require("stream")},28354:t=>{"use strict";t.exports=require("util")},29021:t=>{"use strict";t.exports=require("fs")},29294:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:t=>{"use strict";t.exports=require("path")},34631:t=>{"use strict";t.exports=require("tls")},51049:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GlobalError:()=>r.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>d,tree:()=>o});var s=i(24332),l=i(48819),n=i(67851),r=i.n(n),h=i(97540),a={};for(let t in h)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(t)&&(a[t]=()=>h[t]);i.d(e,a);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,85851)),"/home/shri/web3Hackathon/DeStock/apps/web/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,34356)),"/home/shri/web3Hackathon/DeStock/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,92341,23)),"next/dist/client/components/unauthorized-error"]}],u=["/home/shri/web3Hackathon/DeStock/apps/web/app/page.tsx"],c={require:i,loadChunk:()=>Promise.resolve()},d=new s.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55511:t=>{"use strict";t.exports=require("crypto")},55591:t=>{"use strict";t.exports=require("https")},63033:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:t=>{"use strict";t.exports=require("zlib")},77295:(t,e,i)=>{"use strict";i.d(e,{P:()=>a});var s=i(38049),l=i(24665),n=i(4574),r=i(86535),h=i(77943);function a(){let{chainId:t}=(0,s.F)(),e=(0,r.RZ)("DESTOCK",t??31337),{data:i,refetch:a}=(0,l.Q)({abi:r.$B,address:e,functionName:"nextCompanyId"}),{writeContractAsync:o,isPending:u,isConfirming:c,isConfirmed:d,error:f}=(0,n.x)(),m=async(t,i,s,l)=>{await o({abi:r.$B,address:e,functionName:"registerCompany",args:[t,BigInt(i),(0,h.g)(s),l]}),a()},{writeContractAsync:p}=(0,n.x)(),{writeContractAsync:g}=(0,n.x)();return{nextCompanyId:Number(i),registerCompany:m,isPending:u,isConfirming:c,isConfirmed:d,error:f,getCompany:t=>(0,l.Q)({abi:r.$B,address:e,functionName:"getCompanyDetails",args:[BigInt(t)]}),getSharePrice:t=>(0,l.Q)({abi:r.$B,address:e,functionName:"getSharePrice",args:[BigInt(t)]}),getBuyPrice:(t,i)=>(0,l.Q)({abi:r.$B,address:e,functionName:"getBuyPrice",args:[BigInt(t),BigInt(i)]}),getSellPrice:(t,i)=>(0,l.Q)({abi:r.$B,address:e,functionName:"getSellPrice",args:[BigInt(t),BigInt(i)]}),buyShares:p,sellShares:g}}},77598:t=>{"use strict";t.exports=require("node:crypto")},79428:t=>{"use strict";t.exports=require("buffer")},79551:t=>{"use strict";t.exports=require("url")},79646:t=>{"use strict";t.exports=require("child_process")},81630:t=>{"use strict";t.exports=require("http")},83997:t=>{"use strict";t.exports=require("tty")},85851:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});let s=(0,i(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/shri/web3Hackathon/DeStock/apps/web/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/shri/web3Hackathon/DeStock/apps/web/app/page.tsx","default")},91645:t=>{"use strict";t.exports=require("net")},94735:t=>{"use strict";t.exports=require("events")},97746:(t,e,i)=>{Promise.resolve().then(i.bind(i,85851))}};var e=require("../webpack-runtime.js");e.C(t);var i=t=>e(e.s=t),s=e.X(0,[191,436,397,520],()=>i(51049));module.exports=s})();