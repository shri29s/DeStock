(()=>{var e={};e.id=370,e.ids=[370],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15335:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>x,routeModule:()=>g,tree:()=>o});var a=t(24332),s=t(48819),d=t(67851),i=t.n(d),l=t(97540),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let o={children:["",{children:["trading",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,85979)),"D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\trading\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,34356)),"D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,x=["D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\trading\\[id]\\page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/trading/[id]/page",pathname:"/trading/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},42659:(e,r,t)=>{Promise.resolve().then(t.bind(t,88887))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66635:(e,r,t)=>{Promise.resolve().then(t.bind(t,85979))},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},77943:(e,r,t)=>{"use strict";t.d(r,{g:()=>d});var a=t(48259),s=t(77096);function d(e,r="wei"){return(0,s.X)(e,a.eL[r])}},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85979:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\intel\\\\web3ssh\\\\DeStock\\\\apps\\\\web\\\\app\\\\trading\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\intel\\web3ssh\\DeStock\\apps\\web\\app\\trading\\[id]\\page.tsx","default")},88887:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var a=t(13486),s=t(60159),d=t(2984),i=t(25543),l=t(77295);function n({companyId:e,height:r=400}){let{orderBooks:t,subscribe:d,unsubscribe:n,isConnected:o}=(0,i.h)(),{getSharePrice:x}=(0,l.P)(),[c,g]=(0,s.useState)(0),[m,h]=(0,s.useState)(0),y=t.get(e),u=e=>e.toFixed(4),b=e=>e.toLocaleString();if(!o)return(0,a.jsx)("div",{className:"h-96 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connecting to market data..."})]})});if(!y)return(0,a.jsx)("div",{className:"h-96 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading order book..."})});let p=Math.max(...y.bids.map(e=>e.total),...y.asks.map(e=>e.total));return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Order Book"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsxs)("span",{className:"inline-flex items-center",children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full mr-2 ${o?"bg-green-500":"bg-red-500"}`}),o?"Live":"Disconnected"]})})]}),c>0&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Spread: ",(0,a.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:u(c)})]}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["(",(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[m.toFixed(2),"%"]}),")"]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium text-gray-600 dark:text-gray-400 mb-3",children:[(0,a.jsx)("div",{className:"text-right",children:"Price"}),(0,a.jsx)("div",{className:"text-right",children:"Amount"}),(0,a.jsx)("div",{className:"text-right",children:"Total"})]}),(0,a.jsxs)("div",{className:"space-y-1",style:{height:r-120,overflowY:"auto"},children:[(0,a.jsx)("div",{className:"space-y-1",children:y.asks.sort((e,r)=>r.price-e.price).slice(0,10).map((e,r)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-red-50 dark:bg-red-900/20",style:{width:`${e.total/p*100}%`,right:0}}),(0,a.jsxs)("div",{className:"relative grid grid-cols-3 gap-4 text-sm py-1 px-2",children:[(0,a.jsx)("div",{className:"text-right text-red-600 dark:text-red-400 font-medium",children:u(e.price)}),(0,a.jsx)("div",{className:"text-right text-gray-900 dark:text-white",children:b(e.amount)}),(0,a.jsx)("div",{className:"text-right text-gray-600 dark:text-gray-400",children:b(e.total)})]})]},`ask-${r}`))}),c>0&&(0,a.jsx)("div",{className:"my-4 py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded text-center",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Spread: ",u(c)," (",m.toFixed(2),"%)"]})}),(0,a.jsx)("div",{className:"space-y-1",children:y.bids.sort((e,r)=>r.price-e.price).slice(0,10).map((e,r)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-green-50 dark:bg-green-900/20",style:{width:`${e.total/p*100}%`,right:0}}),(0,a.jsxs)("div",{className:"relative grid grid-cols-3 gap-4 text-sm py-1 px-2",children:[(0,a.jsx)("div",{className:"text-right text-green-600 dark:text-green-400 font-medium",children:u(e.price)}),(0,a.jsx)("div",{className:"text-right text-gray-900 dark:text-white",children:b(e.amount)}),(0,a.jsx)("div",{className:"text-right text-gray-600 dark:text-gray-400",children:b(e.total)})]})]},`bid-${r}`))})]})]})]})}function o({companyId:e,height:r=300}){let t=(0,s.useRef)(null),{orderBooks:d,subscribe:l,unsubscribe:n,isConnected:o}=(0,i.h)(),[x,c]=(0,s.useState)({bids:[],asks:[]});return(d.get(e),o)?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Market Depth"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Bids"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Asks"})]})]})]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("canvas",{ref:t,className:"w-full",style:{height:r-80}})})]}):(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center justify-center",style:{height:r},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading depth chart..."})]})})}var x=t(38049);function c({companyId:e,currentPrice:r=0}){let{address:t}=(0,x.F)(),{buyShares:d,sellShares:i,placeOrder:n,isPending:o}=(0,l.P)(),[c,g]=(0,s.useState)("buy"),[m,h]=(0,s.useState)("market"),[y,u]=(0,s.useState)(""),[b,p]=(0,s.useState)(""),[j,k]=(0,s.useState)(""),f=e=>{u(e),"limit"===m&&b?k(((parseFloat(e)||0)*(parseFloat(b)||0)).toFixed(4)):"market"===m&&r&&k(((parseFloat(e)||0)*r).toFixed(4))},N=e=>{p(e),y&&k(((parseFloat(y)||0)*(parseFloat(e)||0)).toFixed(4))},v=e=>{k(e),"limit"===m&&b?u(((parseFloat(e)||0)/(parseFloat(b)||0)).toFixed(0)):"market"===m&&r&&u(((parseFloat(e)||0)/r).toFixed(0))},w=e=>{h(e),"market"===e?(p(r.toString()),y&&r&&k(((parseFloat(y)||0)*r).toFixed(4))):p("")};return t?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Place Order"}),r>0&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Current Price: ",r.toFixed(4)," DSTK"]})]}),(0,a.jsxs)("form",{onSubmit:r=>{r.preventDefault(),t&&y&&(b||"limit"!==m)&&("market"===m?"buy"===c?d(e,y):i(e,y):n(e,"buy"===c,y,b),u(""),p(""),k(""))},className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g("buy"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"buy"===c?"bg-green-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Buy"}),(0,a.jsx)("button",{type:"button",onClick:()=>g("sell"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"sell"===c?"bg-red-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Sell"})]}),(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>w("market"),className:`flex-1 py-2 px-4 text-sm font-medium transition-colors ${"market"===m?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Market"}),(0,a.jsx)("button",{type:"button",onClick:()=>w("limit"),className:`flex-1 py-2 px-4 text-sm font-medium transition-colors ${"limit"===m?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Limit"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (Shares)"}),(0,a.jsx)("input",{type:"number",value:y,onChange:e=>f(e.target.value),placeholder:"0",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),"limit"===m&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price (DSTK per share)"}),(0,a.jsx)("input",{type:"number",value:b,onChange:e=>N(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total (DSTK)"}),(0,a.jsx)("input",{type:"number",value:j,onChange:e=>v(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["25%","50%","75%","100%"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{f({"25%":"25","50%":"50","75%":"75","100%":"100"}[e])},className:"py-2 px-3 text-xs font-medium text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e},e))}),(0,a.jsx)("button",{type:"submit",disabled:!(t&&y&&("limit"!==m||b)&&1)||o,className:`w-full py-3 px-4 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"buy"===c?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):`${"buy"===c?"Buy":"Sell"} ${"market"===m?"Market":"Limit"}`}),y&&("market"===m||b)&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Order Summary"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Side:"}),(0,a.jsx)("span",{className:`font-medium ${"buy"===c?"text-green-600":"text-red-600"}`,children:c.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:m.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:[y," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Price:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["market"===m?`${r.toFixed(4)} (Market)`:b," DSTK"]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[j," DSTK"]})]})]})]})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Place Order"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to start trading"})})]})}function g(){let{address:e}=(0,x.F)(),[r]=(0,s.useState)([{id:1,companyId:1,type:"buy",amount:100,price:.0025,timestamp:new Date(Date.now()-3e5)},{id:2,companyId:3,type:"sell",amount:50,price:.0034,timestamp:new Date(Date.now()-6e5)}]),t=e=>{console.log("Cancel order:",e)},d=e=>e.toLocaleString();return e?0===r.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Open Orders"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No open orders"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Place an order to see it here"})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Open Orders"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[r.length," active order",1!==r.length?"s":""]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Company"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>{let r=e.amount*e.price;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"buy"===e.type?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:"buy"===e.type?"Buy":"Sell"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.companyId]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.amount}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.price.toFixed(4)," DSTK"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[r.toFixed(4)," DSTK"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d(e.timestamp)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("button",{onClick:()=>t(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium",children:"Cancel"})})]},e.id)})})]})})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Open Orders"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to view open orders"})})]})}function m({companyId:e,currentPrice:r=0}){let{address:t}=(0,x.F)(),{addLiquidity:d,removeLiquidity:i,getLPTokenBalance:n,isPending:o}=(0,l.P)(),[c,g]=(0,s.useState)("add"),[m,h]=(0,s.useState)(""),[y,u]=(0,s.useState)(""),[b,p]=(0,s.useState)(""),{data:j}=n(e),k=e=>{h(e),r>0&&u(((parseFloat(e)||0)/r).toFixed(0))},f=e=>{u(e),r>0&&h(((parseFloat(e)||0)*r).toFixed(4))};return t?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Liquidity Provider"}),j&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Your LP Tokens: ",j.toString()]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex mb-6 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>g("add"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"add"===c?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Add Liquidity"}),(0,a.jsx)("button",{onClick:()=>g("remove"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"remove"===c?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:"Remove Liquidity"})]}),"add"===c&&(0,a.jsxs)("form",{onSubmit:r=>{r.preventDefault(),m&&y&&(d(e,m,y),h(""),u(""))},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:"Important Information"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[(0,a.jsx)("li",{children:"• You'll receive LP tokens representing your share of the pool"}),(0,a.jsx)("li",{children:"• LP tokens earn trading fees from the pool"}),(0,a.jsx)("li",{children:"• Token amounts are automatically calculated based on current ratio"}),(0,a.jsx)("li",{children:"• You're exposed to impermanent loss risk"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"DSTK Token Amount"}),(0,a.jsx)("input",{type:"number",value:m,onChange:e=>k(e.target.value),placeholder:"0.0000",min:"0",step:"0.0001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Share Amount"}),(0,a.jsx)("input",{type:"number",value:y,onChange:e=>f(e.target.value),placeholder:"0",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),r>0&&m&&y&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Liquidity Summary"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"DSTK Tokens:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:m})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Shares:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:y})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Rate:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["1 Share = ",r.toFixed(4)," DSTK"]})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:!(t&&m&&y&&parseFloat(m)>0&&parseFloat(y)>0)||o,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]}),"remove"===c&&(0,a.jsxs)("form",{onSubmit:r=>{r.preventDefault(),b&&(i(e,b),p(""))},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-2",children:"Remove Liquidity"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Removing liquidity will burn your LP tokens and return the underlying assets. You'll stop earning fees from this pool."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LP Token Amount"}),(0,a.jsx)("input",{type:"number",value:b,onChange:e=>p(e.target.value),placeholder:"0",min:"0",max:j?j.toString():void 0,step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),j&&(0,a.jsx)("div",{className:"mt-2 flex gap-2",children:["25%","50%","75%","100%"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{p(Math.floor(Number(j)*({"25%":.25,"50%":.5,"75%":.75,"100%":1})[e]).toString())},className:"py-1 px-3 text-xs font-medium text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e},e))})]}),(0,a.jsx)("button",{type:"submit",disabled:!(t&&b&&parseFloat(b)>0)||o,className:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Removing Liquidity..."]}):"Remove Liquidity"})]})]})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Liquidity Provider"}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to provide liquidity"})})]})}var h=t(45672);function y(){let e=(0,d.useParams)(),r=parseInt(e?.id),{getCompany:t,getSharePrice:i}=(0,l.P)(),[x,y]=(0,s.useState)("trade"),{data:u}=t(r),{data:b}=i(r),p=b?parseFloat(b.toString())/1e18:0;return u?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[u[1]," "]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Company ID: #",r]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[p.toFixed(6)," DSTK"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Price"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Price Chart"})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(h.k,{symbol:u[1],height:400})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(n,{companyId:r,height:500}),(0,a.jsx)(o,{companyId:r,height:500})]}),(0,a.jsx)(g,{})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{onClick:()=>y("trade"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"trade"===x?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Trade"}),(0,a.jsx)("button",{onClick:()=>y("liquidity"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${"liquidity"===x?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Liquidity"})]})}),"trade"===x?(0,a.jsx)(c,{companyId:r,currentPrice:p}):(0,a.jsx)(m,{companyId:r,currentPrice:p}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Market Info"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Supply:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[u[3]?.toString()||"0"," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Token Reserve:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[u[4]?(parseFloat(u[4].toString())/1e18).toFixed(4):"0"," DSTK"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Share Reserve:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[u[5]?.toString()||"0"," shares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"LP Token Supply:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[u[6]?(parseFloat(u[6].toString())/1e18).toFixed(4):"0"," LP"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Collected Fees:"}),(0,a.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[u[7]?(parseFloat(u[7].toString())/1e18).toFixed(4):"0"," DSTK"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Trading Features"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Real-time order book"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Market & limit orders"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Liquidity provision"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Professional charts"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"0.25% trading fees"]})]})]})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading company data..."})]})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[191,379,430,912,864],()=>t(15335));module.exports=a})();