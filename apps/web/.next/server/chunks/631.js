"use strict";exports.id=631,exports.ids=[631],exports.modules={24162:(e,a,s)=>{s.d(a,{k:()=>n});var t=s(13486),i=s(67892),r=s(4627);function n({size:e="medium",variant:a="circular",className:s="",overlay:n=!1}){return"circular"===a?(0,t.jsx)("div",{className:(0,r.$)("flex items-center justify-center",n&&"fixed inset-0 glass-modal z-50",s),children:(0,t.jsx)(i.P.div,{className:(0,r.$)("border-2 border-destock-primary/20 border-t-destock-primary rounded-full",{small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[e]),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):"dots"===a?(0,t.jsx)("div",{className:(0,r.$)("flex items-center justify-center space-x-1",n&&"fixed inset-0 glass-modal z-50",s),children:[0,1,2].map(e=>(0,t.jsx)(i.P.div,{className:"w-2 h-2 bg-destock-primary rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2*e}},e))}):"bars"===a?(0,t.jsx)("div",{className:(0,r.$)("flex items-center justify-center space-x-1",n&&"fixed inset-0 glass-modal z-50",s),children:[0,1,2,3].map(a=>(0,t.jsx)(i.P.div,{className:"w-1 bg-destock-primary rounded-full",style:{height:"small"===e?16:"medium"===e?24:32},animate:{scaleY:[1,2,1]},transition:{duration:1,repeat:1/0,delay:.1*a}},a))}):null}},25935:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(29697).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},54401:(e,a,s)=>{s.d(a,{s:()=>k});var t=s(13486),i=s(60159),r=s(85626),n=s(85519),l=s(67201),c=s(67892),d=s(4653),o=s(77295),m=s(16818),x=s(38049),y=s(29697);let u=(0,y.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var p=s(63818),h=s(57207);let g=(0,y.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var f=s(59327),j=s(60260),b=s(24162);let N=l.Ik({companyId:l.Yj().min(1,"Please select a company"),amount:l.Yj().min(1,"Amount is required")});function k(){let{isConnected:e}=(0,x.F)(),{buyShares:a,sellShares:s,getSharePrice:l,getShareBalance:y,nextCompanyId:k,isPending:v,isConfirming:w,isConfirmed:S,error:P}=(0,o.P)(),{balance:B}=(0,m.O)(),[F,I]=(0,i.useState)([]),[$,C]=(0,i.useState)(null),[T,A]=(0,i.useState)("buy"),[M,D]=(0,i.useState)("0"),[q,z]=(0,i.useState)(!1),{register:K,handleSubmit:Y,formState:{errors:O},watch:Q,setValue:H,reset:L}=(0,r.mN)({resolver:(0,n.u)(N)});Q("companyId");let U=Q("amount"),E=()=>$&&U?(parseFloat($.price)*parseFloat(U)).toFixed(2):"0",G=async e=>{if($){z(!0);try{"buy"===T?await a($.id,e.amount):await s($.id,e.amount),L()}catch(e){console.error("Trade failed:",e)}finally{z(!1)}}},R=()=>{if(!$||!U)return!1;let e=parseFloat(U);if(e<=0)return!1;if("buy"!==T)return parseFloat(M)>=e;{let e=parseFloat(E());return parseFloat(B)>=e}};return e?(0,t.jsxs)(c.P.div,{className:"glass-card p-6 widget-enter",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)(c.P.h3,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:"Trade Shares"}),(0,t.jsxs)(c.P.div,{className:"flex glass-button rounded-lg p-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,t.jsx)(c.P.button,{onClick:()=>A("buy"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${"buy"===T?"bg-success text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,whileTap:{scale:.95},children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(p.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Buy"})]})}),(0,t.jsx)(c.P.button,{onClick:()=>A("sell"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${"sell"===T?"bg-danger text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,whileTap:{scale:.95},children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Sell"})]})})]})]}),(0,t.jsxs)(c.P.form,{onSubmit:Y(G),className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,t.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"companyId",children:"Select Company"}),(0,t.jsxs)("select",{...K("companyId"),id:"companyId",className:"destock-input",children:[(0,t.jsx)("option",{value:"",children:"Choose a company"}),F.map(e=>(0,t.jsxs)("option",{value:e.id.toString(),children:[e.name," - ",e.price," DSTK"]},e.id))]}),(0,t.jsx)(d.N,{children:O.companyId&&(0,t.jsxs)(c.P.p,{className:"mt-1 text-sm text-danger flex items-center space-x-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,t.jsx)(g,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:O.companyId.message})]})})]}),(0,t.jsx)(d.N,{children:$&&(0,t.jsxs)(c.P.div,{className:"glass-card p-4",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",stiffness:300,damping:25},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:$.name}),(0,t.jsx)(c.P.span,{className:"text-lg font-bold text-destock-primary",initial:{scale:1.2,color:"#10B981"},animate:{scale:1,color:"#3B82F6"},transition:{duration:.3},children:(0,t.jsx)(j.q,{value:parseFloat($.price),suffix:" DSTK",decimals:2})},$.price)]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Your Holdings:"}),(0,t.jsx)(j.q,{value:parseFloat(M),suffix:" shares",decimals:0,className:"font-medium"})]})]})}),(0,t.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,t.jsx)("label",{className:"destock-label",htmlFor:"amount",children:"Amount"}),(0,t.jsx)("input",{...K("amount"),type:"number",step:"1",min:"1",id:"amount",className:"destock-input",placeholder:"Number of shares"}),(0,t.jsx)(d.N,{children:O.amount&&(0,t.jsxs)(c.P.p,{className:"mt-1 text-sm text-danger flex items-center space-x-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,t.jsx)(g,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:O.amount.message})]})})]}),(0,t.jsx)(d.N,{children:$&&U&&(0,t.jsxs)(c.P.div,{className:"glass-card p-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:300,damping:25},children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center space-x-2",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Transaction Summary"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shares:"}),(0,t.jsx)("span",{className:"font-medium",children:U})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Price per share:"}),(0,t.jsxs)("span",{className:"font-medium",children:[$.price," DSTK"]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold border-t border-white/10 dark:border-black/10 pt-2 text-gray-900 dark:text-gray-100",children:[(0,t.jsxs)("span",{children:["Total ","buy"===T?"Cost":"Proceeds",":"]}),(0,t.jsx)(j.q,{value:parseFloat(E()),suffix:" DSTK",decimals:2,className:"buy"===T?"text-danger":"text-success"})]})]}),"buy"===T&&(0,t.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Your DSTK Balance:"}),(0,t.jsx)(j.q,{value:parseFloat(B||"0"),suffix:" DSTK",decimals:2,className:"font-medium"})]})]})}),(0,t.jsx)(d.N,{children:P&&(0,t.jsx)(c.P.div,{className:"glass-card p-4 border border-danger/30 bg-danger/10",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:(0,t.jsxs)("p",{className:"text-sm text-danger flex items-center space-x-2",children:[(0,t.jsx)(g,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Transaction failed: ",P.message]})]})})}),(0,t.jsxs)(c.P.button,{type:"submit",disabled:!R()||v||w||q,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-md font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${"buy"===T?"bg-success hover:bg-success/80 text-white shadow-lg":"bg-danger hover:bg-danger/80 text-white shadow-lg"}`,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[v||w||q?(0,t.jsx)(b.k,{size:"small"}):"buy"===T?(0,t.jsx)(p.A,{className:"w-5 h-5"}):(0,t.jsx)(h.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:v||w||q?"Processing...":R()?`${"buy"===T?"Buy":"Sell"} Shares`:"buy"===T?"Insufficient Balance":"Insufficient Shares"})]}),(0,t.jsx)(d.N,{children:S&&(0,t.jsx)(c.P.div,{className:"glass-card p-4 border border-success/30 bg-success/10",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",stiffness:300,damping:25},children:(0,t.jsxs)("p",{className:"text-sm text-success flex items-center space-x-2",children:[(0,t.jsx)(p.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Transaction completed successfully! \uD83C\uDF89"})]})})})]})]}):(0,t.jsxs)("div",{className:"trading-card text-center",children:[(0,t.jsx)(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Connect your wallet to start trading shares."})]})}},60260:(e,a,s)=>{s.d(a,{q:()=>c});var t=s(13486),i=s(60159),r=s(45566),n=s(2261),l=s(67892);function c({value:e,format:a="decimal",decimals:s=2,prefix:c="",suffix:d="",duration:o=.5,className:m="",colorChange:x=!1,previousValue:y}){let[u,p]=(0,i.useState)(e),[h,g]=(0,i.useState)(!1),f=(0,r.z)(e,{stiffness:100,damping:15}),j=(0,n.G)(f,e=>{let t;switch(a){case"currency":t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:s,maximumFractionDigits:s}).format(e);break;case"percentage":t=`${e.toFixed(s)}%`;break;case"integer":t=Math.round(e).toLocaleString();break;default:t=e.toFixed(s)}return`${c}${t}${d}`});return(0,t.jsx)(l.P.span,{className:`number-counter ${!x||void 0===y?"":e>y?"text-success":e<y?"text-danger":""} ${m}`,animate:h?{scale:[1,1.05,1]}:{},transition:{type:"tween",duration:.3,ease:"easeInOut"},"aria-live":"polite",children:j})}},77295:(e,a,s)=>{s.d(a,{P:()=>o});var t=s(38049),i=s(4574),r=s(61997),n=s(24665),l=s(86535),c=s(60159),d=s(77943);function o(){let{address:e,chainId:a}=(0,t.F)(),s=(0,c.useMemo)(()=>{if(a)return(0,l.RZ)("DESTOCK",a)},[a]),{writeContract:o,data:m,error:x,isPending:y}=(0,i.x)(),{isLoading:u,isSuccess:p}=(0,r.g)({hash:m}),{data:h}=(0,n.Q)({address:s,abi:l.$B,functionName:"nextCompanyId"}),g=(0,c.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"companies",args:[BigInt(e)]}),[s]),f=(0,c.useCallback)(e=>(0,n.Q)({address:s,abi:l.$B,functionName:"getSharePrice",args:[BigInt(e)]}),[s]),j=(0,c.useCallback)((a,t)=>{let i=t||e;return(0,n.Q)({address:s,abi:l.$B,functionName:"balanceOf",args:i?[i,BigInt(a)]:void 0,query:{enabled:!!i}})},[s,e]),b=(0,c.useCallback)((e,a,t)=>{s&&o({address:s,abi:l.$B,functionName:"registerCompany",args:[e,(0,d.g)(a),BigInt(t)]})},[s,o]),N=(0,c.useCallback)((e,a)=>{s&&o({address:s,abi:l.$B,functionName:"buyShares",args:[BigInt(e),BigInt(a)]})},[s,o]),k=(0,c.useCallback)((e,a)=>{s&&o({address:s,abi:l.$B,functionName:"sellShares",args:[BigInt(e),BigInt(a)]})},[s,o]);return{contractAddress:s,nextCompanyId:h?Number(h):0,getCompany:g,getSharePrice:f,getShareBalance:j,registerCompany:b,buyShares:N,sellShares:k,hash:m,isPending:y,isConfirming:u,isConfirmed:p,error:x}}}};